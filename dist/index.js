!function(){"use strict";var t={n:function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},d:function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}};!function(){var e=anime,n=t.n(e),r={int:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},uint:function(t){return r.int(0,t)},char:function(t){return t.charAt(r.uint(t.length-1))}};function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.from,r=e.to,i=e.steps,a=e.stagger,s=e.noise,u=e.charset,c=e.origin,l=e.output;o(this,t),Object.assign(this,{from:n,to:r,steps:i,stagger:a,noise:s,charset:u,origin:c,output:l}),this.length=Math.max(n.length,r.length),l&&(l.textform=this),this.build(),this.reset()}var e,n,a;return e=t,(n=[{key:"build",value:function(){var t=this,e=this.length,n=this.from,o=this.to,i=this.compute(),a=function(e){var a=n.charAt(e),s=o.charAt(e),u=function(t){return t.match(/\r|\n|\t/)};if(u(a))return[{frame:0,char:a}];if(u(s))return[{frame:0,char:s}];var c=t.applyNoise(t.steps),l=i[e],f=l+c;return Array.from({length:c+1},(function(e,n){return function(e){var n=l+e;return{frame:n,char:n===l?a:n===f?s:r.char(t.charset)}}(n)}))},s=Array.from({length:e},(function(t,e){return a(e)}));this.finalFrame=s.flat().reduce((function(t,e){return Math.max(t,e.frame)}),0),this.scenario=s}},{key:"compute",value:function(){var t=this,e=this.length,n=this.stagger,r=this.origin;return r?Array.from({length:e},(function(o,i){var a=i-r,s=a>=0?a*n:(e+a)*n;return t.applyNoise(s)})):Array.from({length:e},(function(e,r){var o=r*n;return t.applyNoise(o)}))}},{key:"applyNoise",value:function(t){var e=this.noise;return e?r.int(t,t+e):t}},{key:"getCharAt",value:function(t,e){var n=this.scenario[t],r=n.filter((function(t){return t.frame===e}))[0];if(!r){var o=n[0].frame,i=n[n.length-1].frame,a=e>i?i:o;r=n.filter((function(t){return t.frame===a}))[0]}return r.char}},{key:"reset",value:function(){this.progress=0}},{key:"update",value:function(){var t=this,e=this.frame,n=this.length,r=this.output;this.chars=Array.from({length:n},(function(n,r){return t.getCharAt(r,e)})),this.text=this.chars.join(""),r&&r.update()}},{key:"frame",get:function(){return this._frame},set:function(t){t!==this._frame&&(this._frame=t,this.update())}},{key:"progress",get:function(){return this._progress},set:function(t){this._progress=t,this.frame=Math.round(this.finalFrame*t)}},{key:"hasOrigin",get:function(){var t=this.origin,e=this.length;return void 0!==t&&t>=0&&t<e}}])&&i(e.prototype,n),a&&i(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s(this,t),this.callbacks="function"==typeof e?[e]:e,this.fps=n,this.elapsed=0,this._previous=0,this._delta=0,this._isPlaying=!1}var e,n,r;return e=t,n=[{key:"reset",value:function(){this.elapsed=0}},{key:"start",value:function(){this._previous=this.now,this._delta=0,this._isPlaying=!0,this.requestAnimationFrame()}},{key:"pause",value:function(){this._isPlaying=!1}},{key:"stop",value:function(){this.pause(),this.reset()}},{key:"update",value:function(){if(this.isPlaying){var t=this.now,e=t-this._previous;this._previous=t,this._delta+=e,this.elapsed+=e;var n=this._frameDuration-this._delta;n<=0&&(this.callbacks.forEach((function(t){return t.call()})),this._delta=Math.abs(n)),this.requestAnimationFrame()}}},{key:"requestAnimationFrame",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){requestAnimationFrame(this.update.bind(this))}))},{key:"fps",get:function(){return this._fps},set:function(t){this._fps=t,this._frameDuration=t>0?Math.floor(1e3/t):0}},{key:"isPlaying",get:function(){return this._isPlaying}},{key:"now",get:function(){return t.time.now()}}],n&&u(e.prototype,n),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();c.time=void 0===performance?Date:performance;var l={linear:function(t){return t}},f={Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Quad:function(t){return Math.pow(t,2)},Cubic:function(t){return Math.pow(t,4)},Quart:function(t){return Math.pow(t,6)},Quint:function(t){return Math.pow(t,8)},Expo:function(t){return Math.pow(t,10)}};Object.keys(f).forEach((function(t){var e=f[t];l["easeIn"+t]=e,l["easeOut"+t]=function(t){return 1-e(1-t)},l["easeInOut"+t]=function(t){return t<.5?e(2*t)/2:1-e(-2*t+2)/2}}));var h={};function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.keys(l).forEach((function(t){var e=t.toUpperCase(),n=e.match(/(EASEINOUT|EASEOUT|EASEIN)(.*)/);if(n){var r=n[1].replace("EASE","").replace("INOUT","IN_OUT"),o=n[2];e="".concat(o,"_").concat(r)}h[e]=t})),l.keys=h;var d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.textform,r=e.delay,o=e.duration,i=e.easing,a=e.reversed,s=e.reverseSpeed,u=e.reverseDelay,f=e.repeat,h=e.yoyo,y=e.onBegin,d=e.onUpdate,m=e.onChange,v=e.onComplete;p(this,t),this.clock=new c(this.animate.bind(this),t.FPS_CAP),this._progress=0,this._isReversed=a,u||(u=r),Object.assign(this,{textform:n,delay:r,duration:o,reverseSpeed:s,reverseDelay:u,repeat:f,isYoyo:h,onBegin:y,onUpdate:d,onChange:m,onComplete:v}),this.ease=l[i]||l.linear}var e,n,r;return e=t,n=[{key:"animate",value:function(){var t=this.isReversed?this.reverseSpeed:1,e=this.isReversed?this.reverseDelay:this.delay,n=this.clock.elapsed*t-e;if(!(n<0)){this.onUpdate&&this.onUpdate.call();var r=n/this.duration;this.progress=this.isReversed?1-r:r,r>=1&&(this.progress=Math.round(this.progress),this.isReversed&&this.onBegin?this.onBegin.call():this.onComplete&&this.onComplete.call(),this.isYoyo&&(this.isReversed=!this.isReversed),this.stop(),0!==this.repeat&&this.play(!0),this.repeat>0&&this.repeat--)}}},{key:"reset",value:function(){this.textform.progress=this.isReversed?1:0}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(this.isPlaying||this.isComplete)&&(this.stop(),t||(this.reset(),this.isReversed&&this.onComplete?this.onComplete.call():!this.isReversed&&this.onBegin&&this.onBegin.call())),this.start()}},{key:"start",value:function(){this.clock.start()}},{key:"pause",value:function(){this.clock.pause()}},{key:"stop",value:function(){this.clock.stop()}},{key:"setClockFromProgress",value:function(){this.clock.elapsed=this.isReversed?(this.delay+(1-this.progress)*this.duration)/this.reverseSpeed:this.delay+this.progress*this.duration}},{key:"frame",get:function(){return this.textform.frame}},{key:"progress",get:function(){return this._progress},set:function(t){t<0?t=0:t>1&&(t=1),this._progress=t,this.isPlaying||this.setClockFromProgress();var e=this.textform.frame;this.textform.progress=this.ease(t),this.textform.frame!==e&&this.onChange&&this.onChange.call()}},{key:"isReversed",get:function(){return this._isReversed},set:function(t){t!==this._isReversed&&(this._isReversed=t,this.setClockFromProgress())}},{key:"isPlaying",get:function(){return this.clock.isPlaying}},{key:"isComplete",get:function(){return this.isYoyo?this.isReversed?this.progress>=1:this.progress<=0:this.isReversed?this.progress<=0:this.progress>=1}}],n&&y(e.prototype,n),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=w(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},g.apply(this,arguments)}function w(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}function x(t,e){return x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},x(t,e)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=k(t);if(e){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P(this,n)}}function P(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}d.FPS_CAP=60;var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}(i,t);var e,n,r,o=O(i);function i(){return v(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"compute",value:function(){return g(k(i.prototype),"compute",this).call(this).reverse()}}])&&b(e.prototype,n),r&&b(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(a);function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e){return E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},E(t,e)}function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=M(t);if(e){var o=M(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function R(t,e){if(e&&("object"===j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}var D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(i,t);var e,n,r,o=C(i);function i(){return _(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"compute",value:function(){var t=this,e=this.length,n=this.stagger,r=this.origin,o=this.hasOrigin,i=o?r:Math.floor((e-1)/2),a=o||e%2!=0?i:i+1;return Array.from({length:e},(function(e,r){var o=r<a?i-r:r-a;return t.applyNoise(o*n)}))}}])&&T(e.prototype,n),r&&T(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(a);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function B(t,e){return B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},B(t,e)}function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=G(t);if(e){var o=G(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return F(this,n)}}function F(t,e){if(e&&("object"===A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function G(t){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},G(t)}var X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e)}(i,t);var e,n,r,o=I(i);function i(){return z(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"compute",value:function(){var t=this,e=this.length,n=this.stagger,r=this.origin,o=this.hasOrigin?r:Math.round((e-1)/2);return Array.from({length:e},(function(r,i){var a=i<o?i:e-1-i;return t.applyNoise(a*n)}))}}])&&U(e.prototype,n),r&&U(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(a);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function Y(t){return function(t){if(Array.isArray(t))return V(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function N(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Z(){return Z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=W(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Z.apply(this,arguments)}function W(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=K(t)););return t}function Q(t,e){return Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Q(t,e)}function q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=K(t);if(e){var o=K(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $(this,n)}}function $(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function K(t){return K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},K(t)}var J=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q(t,e)}(i,t);var e,n,r,o=q(i);function i(){return N(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"compute",value:function(){var t=this.origin,e=this.stagger,n=i.shuffle(Z(K(i.prototype),"compute",this).call(this));return this.hasOrigin&&e>0?((n=n.filter((function(t){return t>0}))).splice(t,0,0),n):n}}])&&H(e.prototype,n),r&&H(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(a);J.shuffle=function(t){for(var e=Y(t),n=t.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1)),o=[e[r],e[n]];e[n]=o[0],e[r]=o[1]}return e};var tt="ABCDEFGHIJKLMNOPQRSTUVWXYZ",et=tt.toLowerCase(),nt="0123456789",rt="!@#$%&",ot=[tt,et,nt,rt].join(""),it={UPPERCASE:tt,LOWERCASE:et,DIGITS:nt,SYMBOLS:rt,ALL:ot},at={pad:function(t,e,n,r){var o=r-t.length;if(0===o)return t;var i,a,s,u={left:function(){return 0},center:function(){return Math.floor(o/2)},right:function(){return o},default:function(){return e}},c=(u[e]||u.default)();return(i=n,a=t,s=c,[i.slice(0,s),a,i.slice(s)].join("")).slice(0,r)},align:function(t,e,n){if(e===at.to.NONE)return t;n||(n=" ");var r=t.reduce((function(t,e){return Math.max(t,e.length)}),0),o=n.length,i=Math.ceil(r/o),a=n.repeat(i).substring(0,r);return t.map((function(t){return at.pad(t,e,a,r)}))},to:{NONE:"none",LEFT:"left",CENTER:"center",RIGHT:"right"}};function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ut=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.input=e}var e,n,r;return e=t,(n=[{key:"update",value:function(){var t=this;if(this.textform){var e=this.textform.text;if(this.object)return this.object.textform=e;if(this.console)return console.log(e);if(this.elements){var n=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},r=function(r){for(var o=[],i=0;i<r.length;i++)" "===(null==t?void 0:t.referenceText.charAt(i))?o.push(" "):" "===e.charAt(i)?o.push("&numsp;"):o.push(n(e.charAt(i)));return o.join("").replace(/\t/g,"&emsp;").replace(/\n/g,"<br>")}(e);this.elements.forEach((function(t){return t.innerHTML=r}))}}}},{key:"input",get:function(){return this._input},set:function(t){if(this.console=null,this.elements=null,this.object=null,void 0!==t)if(t!==console)if(void 0===t.innerHTML){if("string"==typeof t){if(t.match(/\.\w\S*/)){var e=document.getElementsByClassName(t.substring(1));return void(e.length&&(this.elements=Array.from(e)))}if(t.match(/#\w\S*/)){var n=document.querySelector(t);return void(n&&(this.elements=[n]))}}try{void 0===t.textform&&(t.textform=""),this.object=t}catch(t){return}}else this.elements=[t];else this.console=t}},{key:"isValid",get:function(){return void 0!==this.object||void 0!==this.console||void 0!==this.elements}},{key:"inputText",get:function(){return this.object&&this.object.textform?this.object.textform:this.elements?this.elements[0].textContent:void 0}}])&&st(e.prototype,n),r&&st(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(n),!0).forEach((function(e){ft(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ft(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var yt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.mode,r=void 0===n?t.modes.BASIC:n,o=e.from,i=e.to,a=e.steps,s=void 0===a?5:a,u=e.stagger,c=void 0===u?3:u,l=e.noise,f=void 0===l?0:l,h=e.charset,p=void 0===h?t.charsets.ALL:h,y=e.origin,d=e.output,m=e.align,v=void 0===m?t.align.NONE:m,b=e.fill,g=void 0===b?" ":b,w=e.autoplay,x=void 0===w||w,O=e.speed,P=void 0===O?t.DEFAULT_SPEED:O,k=e.easing,S=void 0===k?t.DEFAULT_EASING:k,j=e.delay,_=void 0===j?0:j,T=e.duration,E=void 0===T?0:T,C=e.reversed,R=void 0!==C&&C,M=e.reverseSpeed,D=void 0===M?1:M,A=e.reverseDelay,z=e.repeat,U=void 0===z?0:z,B=e.loop,I=void 0!==B&&B,F=e.yoyo,G=void 0!==F&&F,X=e.onBegin,L=e.onUpdate,Y=e.onChange,V=e.onComplete,N=e.hover,H=void 0!==N&&N,Z=e.press,W=void 0!==Z&&Z;ht(this,t),this.__init(),this.build({mode:r,from:o,to:i,steps:s,stagger:c,noise:f,charset:p,origin:y,output:d,align:v,fill:g,autoplay:x,speed:P,easing:S,delay:_,duration:E,reversed:R,reverseSpeed:D,reverseDelay:A,repeat:U,loop:I,yoyo:G,onBegin:X,onUpdate:L,onChange:Y,onComplete:V,hover:H,press:W})}var e,n,r;return e=t,n=[{key:"build",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options;this.options=t,this.dispose();var e={default:a,basic:a,reverse:S,expand:D,collapse:X,shuffle:J},n=e[t.mode]||e.default,r=new n(this.__.textformOptions());if(this.textform=r,t.hover||t.press)this.bind();else if(!t.autoplay)return;this.player=new d(this.__.autoplayOptions()),t.autoplay&&this.play()}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{output:void 0},n=lt(lt({},this.options),e);return new t(n)}},{key:"dispose",value:function(){this.stop(),this.unbind()}},{key:"convertSpeedToDuration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.speed;if(!this.textform)return t.DEFAULT_DURATION;var n=this.textform.finalFrame;return n*(1e3/e)}},{key:"__init",value:function(){var e={};e.in=function(){var t=this.player;t&&(t.isReversed=!1),!t.isPlaying&&t.progress<1&&t.play()}.bind(this),e.out=function(){var t=this.player;t&&(t.isReversed=!0),!t.isPlaying&&t.progress>0&&t.play()}.bind(this),e.textformOptions=function(){var e=t.DEFAULT_TEXT,n=lt({},this.options),r=n.from,o=n.to,i=n.align,a=n.fill,s=new ut(n.output);if(s.isValid){var u=s.inputText||e;s.referenceText=o||r||u,void 0===r&&(n.from=u),void 0===o&&(n.to=u),n.output=s}else n.output=void 0;if(n.from||(n.from=e),n.to||(n.to=e),i){var c=at.align([n.from,n.to],i,a);n.from=c[0],n.to=c[1]}return n}.bind(this),e.autoplayOptions=function(){var t=this.textform,e=lt(lt({},this.options),{},{textform:t});return e.duration||(e.duration=this.convertSpeedToDuration(e.speed)),e.loop&&(e.repeat=-1),e}.bind(this),this.__=e}},{key:"bind",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.hover,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.press,r=this.textform,o=this.options;if(Object.assign(o,{hover:e,press:n}),(e||n)&&r&&r.output&&r.output.elements){var i=r.output.elements;i.forEach((function(r){e&&(r.addEventListener("pointerenter",t.__.in),r.addEventListener("pointerleave",t.__.out)),n&&(r.addEventListener("pointerdown",t.__.in),r.addEventListener("pointerup",t.__.out))})),this.dispatchers=i}}},{key:"unbind",value:function(){var t=this;this.dispatchers&&(this.dispatchers.forEach((function(e){e.addEventListener("pointerenter",t.__.in),e.addEventListener("pointerleave",t.__.out),e.addEventListener("pointerdown",t.__.in),e.addEventListener("pointerup",t.__.out)})),this.dispatchers=null)}},{key:"play",value:function(){this.player&&this.player.play()}},{key:"pause",value:function(){this.player&&this.player.pause()}},{key:"stop",value:function(){this.player&&this.player.stop()}},{key:"progress",get:function(){return this.player?this.player.progress:this.textform.progress},set:function(t){this.player?this.player.progress=t:this.textform.progress=t}},{key:"speed",get:function(){return this.options.speed},set:function(e){var n=this.options;e<1&&(e=t.DEFAULT_SPEED),n.speed=e,n.duration=this.convertSpeedToDuration(e)}},{key:"text",get:function(){return this.textform.text}}],n&&pt(e.prototype,n),r&&pt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}yt.align=at.to,yt.charsets=it,yt.easing=l,yt.ease=l.keys,yt.modes={BASIC:"basic",REVERSE:"reverse",EXPAND:"expand",COLLAPSE:"collapse",SHUFFLE:"shuffle"},yt.DEFAULT_TEXT="",yt.DEFAULT_SPEED=15,yt.DEFAULT_DURATION=1e3,yt.DEFAULT_EASING=yt.ease.LINEAR;var mt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.domElement=document.getElementById("menu-button")}var e,r,o;return e=t,(r=[{key:"tween",value:function(t,e){this.tweening&&this.tweening.pause();var r=function(){this.tweening=null}.bind(this),o=new yt({autoplay:!1,steps:12,stagger:8,from:this.domElement.innerText,to:t,output:this.domElement,mode:e?yt.modes.NORMAL:yt.modes.REVERSE});this.tweening=n()({targets:o,progress:1,easing:"easeInOutQuad",duration:700,complete:r})}}])&&dt(e.prototype,r),o&&dt(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var gt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";vt(this,t),this.domElement=e,this.displayType=n,this.completeTweenIn=function(){var t;null!==(t=this.tweeningIn)&&void 0!==t&&t.reversed&&this.hide(),this.tweeningIn=null}.bind(this),this.completeTweenOut=function(){var t;null!==(t=this.tweeningOut)&&void 0!==t&&t.reversed||this.hide(),this.tweeningOut=null}.bind(this)}var e,n,r;return e=t,(n=[{key:"get",value:function(t){return this.domElement.querySelector(t)}},{key:"getAll",value:function(t){return Array.from(this.domElement.querySelectorAll(t))}},{key:"prepTextform",value:function(t){return this.getAll(t).map((function(t){return{element:t,text:t.innerText}}))}},{key:"setup",value:function(){}},{key:"show",value:function(){this.domElement.style.display=this.displayType}},{key:"hide",value:function(){this.domElement.style.display="none"}},{key:"tweenIn",value:function(t){this.tweeningIn&&this.tweeningIn.pause(),this.tweeningOut&&(this.tweeningOut.pause(),this.tweeningOut=null),this.tweeningIn||this.tweeningOut||this.setup(t),this.show()}},{key:"tweenOut",value:function(){this.tweeningOut&&this.tweeningOut.pause(),this.tweeningIn&&(this.tweeningIn.pause(),this.tweeningIn=null)}},{key:"setX",value:function(t,e){t.style.transform="translateX(".concat(e,"rem)")}},{key:"setY",value:function(t,e){t.style.transform="translateY(".concat(e,"rem)")}},{key:"setOpacity",value:function(t,e){t.style.opacity=e}}])&&bt(e.prototype,n),r&&bt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function wt(t){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt(t)}function xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(n),!0).forEach((function(e){Pt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function St(){return St="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=jt(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},St.apply(this,arguments)}function jt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ct(t)););return t}function _t(t,e){return _t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_t(t,e)}function Tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ct(t);if(e){var o=Ct(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Et(this,n)}}function Et(t,e){if(e&&("object"===wt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ct(t){return Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ct(t)}var Rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_t(t,e)}(a,t);var e,r,o,i=Tt(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,document.querySelector("#demo-overlay"),"flex")).firstName=t.prepTextform("#name-first")[0],t.lastName=t.prepTextform("#name-alias")[0],t.job=t.prepTextform("#vocation")[0],t.demoLauncher=t.prepTextform("#demo-launcher-link")[0],t.links=Array.from(document.querySelectorAll(".placeholder.demo-launch")).reduce((function(t,e){return t[e.parentElement.getAttribute("id")]=e.getAttribute("href"),t}),{}),t.tweenX=10,t}return e=a,(r=[{key:"setup",value:function(t){var e=t?-this.tweenX:this.tweenX;this.setOpacity(this.domElement,0),this.setX(this.domElement,2*e),this.setOpacity(this.demoLauncher.element,0),this.setX(this.demoLauncher.element,e)}},{key:"set",value:function(t){var e=this.links[t];e&&(this.demoLauncher.element.href=e)}},{key:"tweenIn",value:function(t){St(Ct(a.prototype),"tweenIn",this).call(this,t);var e={autoplay:!1,from:"",steps:14,stagger:6,align:yt.align.LEFT},r=[new yt(Ot(Ot({},e),{},{to:this.firstName.text,output:this.firstName.element,mode:yt.modes.REVERSE})),new yt(Ot(Ot({},e),{},{to:this.lastName.text,output:this.lastName.element,mode:yt.modes.EXPAND})),new yt(Ot(Ot({},e),{},{to:this.job.text,output:this.job.element}))];this.tweeningIn=n().timeline({complete:this.completeTweenIn,duration:700,delay:150,easing:"easeOutCirc"}).add({targets:this.domElement,opacity:1,translateX:0},0).add({targets:this.demoLauncher.element,opacity:1,translateX:0},0).add({targets:r,progress:1},100)}},{key:"tweenOut",value:function(t){St(Ct(a.prototype),"tweenOut",this).call(this,t);var e=t?this.tweenX:-this.tweenX,r={autoplay:!1,to:"",mode:t?yt.modes.BASIC:yt.modes.REVERSE,align:yt.align.LEFT},o=[new yt(Ot(Ot({},r),{},{from:this.firstName.text,output:this.firstName.element})),new yt(Ot(Ot({},r),{},{from:this.lastName.text,output:this.lastName.element})),new yt(Ot(Ot({},r),{},{from:this.job.text,output:this.job.element}))];this.tweeningOut=n().timeline({complete:this.completeTweenOut,duration:300,easing:"easeInOutQuad"}).add({targets:o,progress:1},0).add({targets:this.domElement,opacity:0,translateX:2*e},50).add({easing:"easeOutQuad",targets:this.demoLauncher.element,opacity:0,translateX:e},50)}}])&&kt(e.prototype,r),o&&kt(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(gt);function Mt(t){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(t)}function Dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function At(t,e){return At=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},At(t,e)}function zt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Bt(t);if(e){var o=Bt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ut(this,n)}}function Ut(t,e){if(e&&("object"===Mt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Bt(t){return Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Bt(t)}var It=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&At(t,e)}(i,t);var e,n,r,o=zt(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,document.getElementById(t),"flex")).id=t,n.sketch=e,n}return e=i,n&&Dt(e.prototype,n),r&&Dt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(gt);function Ft(t){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(t)}function Gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xt(t,e){return Xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Xt(t,e)}function Lt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Vt(t);if(e){var o=Vt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yt(this,n)}}function Yt(t,e){if(e&&("object"===Ft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Vt(t){return Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Vt(t)}var Nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xt(t,e)}(i,t);var e,n,r,o=Lt(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,e)}return e=i,n&&Gt(e.prototype,n),r&&Gt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(It);function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function Zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wt(){return Wt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Qt(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Wt.apply(this,arguments)}function Qt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jt(t)););return t}function qt(t,e){return qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},qt(t,e)}function $t(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jt(t);if(e){var o=Jt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Kt(this,n)}}function Kt(t,e){if(e&&("object"===Ht(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Jt(t){return Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Jt(t)}var te=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qt(t,e)}(a,t);var e,r,o,i=$t(a);function a(t,e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,"cover",t)).nav=e,n.invitation=document.getElementById("invitation"),n.invitationText=n.invitation.innerText,n.footer=document.getElementsByTagName("footer")[0];n.translate=4,n.nav.back.style.transform="translateX(-".concat(4,"rem)"),n.nav.forward.style.transform="translateX(".concat(4,"rem)"),n.nav.domElement.style.transform="translateY(-".concat(4,"rem)"),n.footer.style.bottom="-".concat(4,"rem"),n.gridOffset=15*t.tileSize,n.nav.domElement.style.opacity=0,n.footer.style.opacity=0;var r=window.location.hash;return r.length&&"#cover"!==r||n.show(),n}return e=a,(r=[{key:"tweenIn",value:function(){Wt(Jt(a.prototype),"tweenIn",this).call(this),this.tweeningIn=n().timeline({easing:"easeOutCirc",duration:500,complete:this.completeTweenIn}).add({duration:1200,targets:this.sketch,offset:0}).add({targets:this.invitation,opacity:1,translateX:0},300).add({targets:this.nav.back,opacity:0,translateX:this.translate},0).add({targets:this.nav.forward,opacity:0,translateX:-this.translate},0).add({targets:this.nav.domElement,translateY:-this.translate,opacity:0},0).add({targets:this.footer,opacity:0,bottom:-this.translate},0)}},{key:"tweenOut",value:function(){Wt(Jt(a.prototype),"tweenOut",this).call(this),this.tweeningOut=n().timeline({easing:"easeInOutQuad",duration:300,complete:this.completeTweenOut}).add({targets:this.sketch,offset:this.gridOffset}).add({targets:this.invitation,opacity:0,translateX:-200},0).add({targets:this.nav.domElement,translateY:0,opacity:1},200).add({targets:this.footer,opacity:1,bottom:0},200).add({targets:this.nav.back,opacity:1,translateX:0},150).add({targets:this.nav.forward,opacity:1,translateX:0},150)}}])&&Zt(e.prototype,r),o&&Zt(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(It);function ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ne=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.portfolio=e,this.overlay=new Rt,this.dynamicTitle=new mt}var e,r,o;return e=t,(r=[{key:"tween",value:function(t,e,n){this.tweenProgress(),this.tweenScreens(t,e,n),this.tweenOverlay(t,e,n),this.tweenTitle(t,e,n),this.tweenBackground(t,e,n)}},{key:"tweenProgress",value:function(){this.portfolio.navProgress.tween(this.portfolio.index)}},{key:"tweenScreens",value:function(t,e,n){e.tweenIn&&e.tweenIn(n),t.tweenOut&&t.tweenOut(n)}},{key:"tweenTitle",value:function(t,e,n){var r=e instanceof te?"":e.id.replaceAll("-"," ");this.dynamicTitle.tween(r,n)}},{key:"tweenOverlay",value:function(t,e,n){var r=t instanceof Nt,o=e instanceof Nt;!r&&o?this.overlay.tweenIn(n):r&&!o&&this.overlay.tweenOut(n),o&&this.overlay.set(this.portfolio.currentScreen.id)}},{key:"tweenBackground",value:function(t,e,r){var o=this,i=this.portfolio.background.mixer;if(t.sketch!==e.sketch){if(i.anime)return i.anime.complete=function(){i.anime=null,o.tweenBackground(t,e,r)};var a=t.sketch,s=e.sketch,u=[0,1];r&&(a=e.sketch,s=t.sketch,u=[1,0]),i.set(a,s),i.resize(window.innerWidth,window.innerHeight),i.material.uniforms.uBackwards.value=r,i.anime=n()({duration:550+100*window.innerWidth/window.innerHeight,easing:"cubicBezier(0.465, 0.450, 0.160, 1.000)",targets:i,complete:function(){return i.anime=null},mix:u})}}}])&&ee(e.prototype,r),o&&ee(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}(),re=THREE;function oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ie(t,e,n){return e&&oe(t.prototype,e),n&&oe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var ae=ie((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n||(n=de.getTextureSize(e.length));var r=de.createDataTexture(n);return r.needsUpdate=!0,de.FloatPack.pack(e,r.image.data),new re.Uniform(r)}));var se={glsl:"\nvec4 packFloat( float value ) {\n\n\tif ( value == 0.0 ) return vec4( 0.0, 0.0, 0.0, 0.0 );\n\n\tfloat mag = abs( value );\n\t\n\tfloat exponent = floor( log2( mag ) );\n\texponent += float( exp2( exponent ) <= mag / 2.0 );\n\texponent -= float( exp2( exponent ) > mag );\n\n\tfloat mantissa = ( exponent > 100.0 )\n\t\t? mag / 1024.0 / exp2( exponent - 10.0 ) - 1.0\n\t\t: mag / float( exp2( exponent ) ) - 1.0;\n\n\tfloat r = exponent + 127.0;\n\tmantissa *= 256.0;\n\n\tfloat g = floor( mantissa );\n\tmantissa -= g;\n\tmantissa *= 256.0;\n\n\tfloat b = floor( mantissa );\n\tmantissa -= b;\n\tmantissa *= 128.0;\n\n\tfloat a = floor( mantissa ) * 2.0 + float( value < 0.0 );\n\n\treturn vec4( r, g, b, a ) / 255.0;\n\n}\n\nfloat unpackFloat( vec4 value ) {\n\n\tfloat r = floor( value.r * 255.0 + 0.5 );\n\tfloat g = floor( value.g * 255.0 + 0.5 );\n\tfloat b = floor( value.b * 255.0 + 0.5 );\n\tfloat a = floor( value.a * 255.0 + 0.5 );\n\n\tfloat exponent = r - 127.0;\n\tfloat sign = 1.0 - mod( a, 2.0 ) * 2.0;\n\tfloat mantissa = float( r > 0.0 ) + g / 256.0 + b / 65536.0\n\t\t+ floor( a / 2.0 ) / 8388608.0;\n\treturn sign * mantissa * exp2( exponent );\n\n}",pack:function(t,e){var n,r,o,i,a,s,u;e||(e=new Uint8Array(4*t.length));for(var c=0,l=0,f=t.length;c<f;c++)0!==(n=t[c])&&(r=Math.abs(n),o=Math.floor(Math.log2(r)),o+=(i=Math.pow(2,o))<=r/2,a=(o-=i>r)>100?r/1024/Math.pow(2,o-10)-1:r/i-1,e[l]=o+127,a*=256,s=Math.floor(a),e[l+1]=s,a=256*(a-s),u=Math.floor(a),e[l+2]=u,a=128*(a-u),e[l+3]=2*Math.floor(a)+(n<0)),l+=4;return e},unpack:function(t,e){var n,r,o,i,a,s;e||(e=new Float32Array(t.length/4));for(var u=0,c=0,l=t.length;u<l;u+=4)n=t[u],r=t[u+1],o=t[u+2],a=n-127,s=(1-(i=t[u+3])%2*2)*((n>0)+r/256+o/65536+Math.floor(i/2)/8388608)*Math.pow(2,a),e[c]=s,c++}};function ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var le=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data,r=e.defaultValue,o=e.textureSize,i=e.length,a=void 0===i?65536:i,s=e.name,u=void 0===s?"data":s,c=e.prefix,l=void 0===c?"GPGPU_":c,f=e.shader,h=void 0===f?t.fragmentShader:f,p=e.uniforms,y=void 0===p?{}:p;if(ue(this,t),!de.renderer)throw new Error("Use GPUVariable.init( renderer ) before instancing.");n?a=n.length:o&&(a=o*o),o||(o=de.getTextureSize(a)),this.textureSize=o,this.rt1=de.createRenderTarget(o),this.rt2=de.createRenderTarget(o),this.renderTarget=this.rt1,this.dataTexture=de.createDataTexture(o),this.dataTexture.needsUpdate=!0,n?this.write(n):(n=this.createDataArray(r),r&&this.write(n)),this.output=new re.Uniform(this.dataTexture),this.name=l?l+u:u,this.uniforms=y,this.uniforms[this.name]=this.output,this.material=new re.ShaderMaterial({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:h});var d=o.toFixed(1);this.material.defines.resolution="vec2( ".concat(d,", ").concat(d," )")}var e,n,r;return e=t,(n=[{key:"update",value:function(){this.renderTarget=this.renderTarget===this.rt1?this.rt2:this.rt1,de.render(this.material,this.renderTarget),this.output.value=this.renderTarget.texture}},{key:"dispose",value:function(){this.rt1.dispose(),this.rt2.dispose(),this.dataTexture.dispose(),this.material.dispose()}},{key:"createDataArray",value:function(t){var e=new Float32Array(this.textureSize*this.textureSize);return t&&e.fill(t),e}},{key:"read",value:function(){de.renderer.readRenderTargetPixels(this.renderTarget,0,0,this.textureSize,this.textureSize,this.buffer);var t=this.createDataArray();return se.unpack(this.buffer,t),t}},{key:"write",value:function(t){se.pack(t,this.buffer)}},{key:"buffer",get:function(){return this.dataTexture.image.data}}])&&ce(e.prototype,n),r&&ce(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function fe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function he(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fe(Object(n),!0).forEach((function(e){pe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}le.vertexShader="\n    void main() {\n\n        gl_Position = vec4( position, 1.0 );\n\n    }\n",le.fragmentShader="\n    uniform sampler2D GPGPU_data;\n\n    ".concat(se.glsl,"\n\n    void main() {\n        \n        vec2 uv = gl_FragCoord.xy / resolution.xy;\n        float data = unpackFloat( texture2D( GPGPU_data, uv ) );\n\n        // Modify data...\n\n        gl_FragColor = packFloat( data );\n\n    }\n");var de=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._textureSize=t.getTextureSize(e),this.variables={}}var e,n,r;return e=t,(n=[{key:"addVariable",value:function(t,e){var n=new le(he(he({},e),{},{name:t,textureSize:this._textureSize}));this.variables[t]=n,this[t]=n.output}},{key:"addConstant",value:function(t,e){this[t]=new ae(e,this._textureSize)}},{key:"assign",value:function(t,e){var n=this.variables[t],r=this.variables[e];n.uniforms[r.name]=r.output}},{key:"tick",value:function(){Object.values(this.variables).forEach((function(t){return t.update()}))}},{key:"textureSize",get:function(){return this._textureSize}}])&&ye(e.prototype,n),r&&ye(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function me(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}de.init=function(t){if(!de.renderer){de.renderer=t;de.isSupported=!0,de.renderer.capabilities.maxVertexTextures||(console.warn("No support for vertex textures."),de.isSupported=!1),de.isSupported||window.alert("Incompatible hardware."),de.isSupported&&(de.renderer=t,de.scene=new re.Scene,de.camera=new re.Camera,de.mesh=new re.Mesh(new re.PlaneGeometry(2,2)),de.scene.add(de.mesh))}},de.getTextureSize=function(t){if(isNaN(t)||!isFinite(t)||!Number.isInteger(t)||t<1)throw new RangeError("Parameter must be an int > 0 ");for(var e=1,n=2;n*n<t;)n=Math.pow(2,e),e++;return n},de.createDataTexture=function(t){return new re.DataTexture(new Uint8Array(t*t*4),t,t,re.RGBAFormat,re.UnsignedByteType)},de.createRenderTarget=function(t){return new re.WebGLRenderTarget(t,t,{wrapS:re.ClampToEdgeWrapping,wrapT:re.ClampToEdgeWrapping,minFilter:re.NearestFilter,magFilter:re.NearestFilter,stencilBuffer:!1,depthBuffer:!1,format:re.RGBAFormat,type:re.UnsignedByteType})},de.render=function(t,e){de.mesh.material=t,de.renderer.setRenderTarget(e),de.renderer.render(de.scene,de.camera),de.renderer.setRenderTarget(null)},de.FloatPack=se;var be=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;me(this,t),this.callbacks="function"==typeof e?[e]:e,this.fps=n,this.elapsed=0,this._last=0,this._deltaOffset=0,this._isPlaying=!1,this._update=this.update.bind(this)}var e,n,r;return e=t,(n=[{key:"add",value:function(t){this.has(t)||this.callbacks.push(t)}},{key:"remove",value:function(t){this.has(t)&&this.callbacks.splice(this.callbacks.indexOf(t),1)}},{key:"has",value:function(t){return this.callbacks.includes(t)}},{key:"reset",value:function(){this.elapsed=0}},{key:"start",value:function(){this._last=this.now,this._deltaOffset=0,this._isPlaying=!0,this.requestFrame()}},{key:"pause",value:function(){this._isPlaying=!1}},{key:"stop",value:function(){this.pause(),this.reset()}},{key:"update",value:function(){if(this.isPlaying){this.requestFrame();var e=Math.min(this.now-this._last,t.maxDelta);if(this._last=this.now,this.elapsed+=e,e>=this._frameDuration)return this.tick(e);this._deltaOffset+=e;var n=this._frameDuration-this._deltaOffset;n<=0&&(this.tick(this._frameDuration),this._deltaOffset=Math.abs(n)%this._frameDuration)}}},{key:"tick",value:function(t){var e=this;this.callbacks.forEach((function(n){return n(t,e.elapsed)}))}},{key:"requestFrame",value:function(){requestAnimationFrame(this._update)}},{key:"fps",get:function(){return this._fps},set:function(t){this._fps=t,this._frameDuration=t>0?Math.floor(1e3/t):0}},{key:"isPlaying",get:function(){return this._isPlaying}},{key:"now",get:function(){return t.time.now()}}])&&ve(e.prototype,n),r&&ve(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function we(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}be.maxDelta=100,be.time=Date||performance;var xe=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.container,r=void 0===n?"sketch":n,o=e.width,i=e.height,a=e.fps,s=e.renderer,u=void 0===s?new re.WebGLRenderer({powerPreference:"high-performance",antialias:!1,stencil:!1,depth:!1}):s,c=e.debug,l=e.stats;if(ge(this,t),this.renderer=u,this.canvas=u.domElement,this.pixelRatio=Math.min(window.devicePixelRatio,2),"string"==typeof r&&(r=document.getElementById(r)),r||(r=document.body),r.appendChild(this.canvas),r.style.touchAction="none",this.width=o>0?o:void 0,this.height=i>0?i:void 0,this.debug=c,this.fps=c?0:a,this.ticker=new be(this.tick.bind(this),a),l||c){this.stats=new t.Stats,r.appendChild(this.stats.domElement);var f=function(){this.stats.update()}.bind(this);this.ticker.add(f)}}var e,n,r;return e=t,n=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.sketch;this.sketch=t,this.resize(),this.sketch.init(),this.onResize=function(){this.needsResize=!0}.bind(this),window.addEventListener("resize",this.onResize),this.tick(0,0),this.ticker.start()}},{key:"dispose",value:function(){this.ticker.stop(),window.removeEventListener("resize",this.onResize),window.removeEventListener("touchstart",this.onTouchStart)}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.width,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.height;t||(t=window.innerWidth),e||(e=window.innerHeight),this.renderer.setPixelRatio(this.pixelRatio),this.renderer.setSize(t,e),this.sketch.resize(t,e,this.pixelRatio),this.wide=t>1e3,this.needsResize=!1}},{key:"tick",value:function(t,e){this.needsResize&&this.resize(),this.renderer.clear(),this.sketch.tick(t,e)}}],n&&we(e.prototype,n),r&&we(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();xe.Stats=window.Stats;var Oe="vec3 bayerMatrixDither( vec3 color ) {\r\n\r\n\t// Silly code because old devices ( OpenGL ES < 3 ) don't support arrays\r\n\r\n\tint index = int( mod( gl_FragCoord.x - 0.5, 8.0 ) ) + \r\n\t\tint( mod( gl_FragCoord.y - 0.5, 8.0 ) * 8.0 );\r\n\r\n\tfloat dither = 0.0078;\r\n\r\n\tdither = ( index == 1 ) ? 0.0039 : dither;\r\n\tdither = ( index == 2 ) ? 0.0068 : dither;\r\n\tdither = ( index == 3 ) ? 0.0029 : dither;\r\n\tdither = ( index == 4 ) ? 0.0076 : dither;\r\n\tdither = ( index == 5 ) ? 0.0036 : dither;\r\n\tdither = ( index == 6 ) ? 0.0066 : dither;\r\n\tdither = ( index == 7 ) ? 0.0027 : dither;\r\n\r\n\tdither = ( index == 8 )  ? 0.0019 : dither;\r\n\tdither = ( index == 9 )  ? 0.0059 : dither;\r\n\tdither = ( index == 10 ) ? 0.0009 : dither;\r\n\tdither = ( index == 11 ) ? 0.0049 : dither;\r\n\tdither = ( index == 12 ) ? 0.0017 : dither;\r\n\tdither = ( index == 13 ) ? 0.0056 : dither;\r\n\tdither = ( index == 14 ) ? 0.0007 : dither;\r\n\tdither = ( index == 15 ) ? 0.0046 : dither;\r\n\r\n\tdither = ( index == 16 ) ? 0.0063 : dither;\r\n\tdither = ( index == 17 ) ? 0.0024 : dither;\r\n\tdither = ( index == 18 ) ? 0.0073 : dither;\r\n\tdither = ( index == 19 ) ? 0.0034 : dither;\r\n\tdither = ( index == 20 ) ? 0.0061 : dither;\r\n\tdither = ( index == 21 ) ? 0.0022 : dither;\r\n\tdither = ( index == 22 ) ? 0.0071 : dither;\r\n\tdither = ( index == 23 ) ? 0.0032 : dither;\r\n\r\n\tdither = ( index == 24 ) ? 0.0005 : dither;\r\n\tdither = ( index == 25 ) ? 0.0044 : dither;\r\n\tdither = ( index == 26 ) ? 0.0014 : dither;\r\n\tdither = ( index == 27 ) ? 0.0054 : dither;\r\n\tdither = ( index == 28 ) ? 0.0002 : dither;\r\n\tdither = ( index == 29 ) ? 0.0041 : dither;\r\n\tdither = ( index == 30 ) ? 0.0012 : dither;\r\n\tdither = ( index == 31 ) ? 0.0051 : dither;\r\n\r\n\tdither = ( index == 32 ) ? 0.0074 : dither;\r\n\tdither = ( index == 33 ) ? 0.0035 : dither;\r\n\tdither = ( index == 34 ) ? 0.0065 : dither;\r\n\tdither = ( index == 35 ) ? 0.0025 : dither;\r\n\tdither = ( index == 36 ) ? 0.0077 : dither;\r\n\tdither = ( index == 37 ) ? 0.0038 : dither;\r\n\tdither = ( index == 38 ) ? 0.0067 : dither;\r\n\tdither = ( index == 39 ) ? 0.0028 : dither;\r\n\r\n\tdither = ( index == 40 ) ? 0.0016 : dither;\r\n\tdither = ( index == 41 ) ? 0.0055 : dither;\r\n\tdither = ( index == 42 ) ? 0.0006 : dither;\r\n\tdither = ( index == 43 ) ? 0.0045 : dither;\r\n\tdither = ( index == 44 ) ? 0.0018 : dither;\r\n\tdither = ( index == 45 ) ? 0.0057 : dither;\r\n\tdither = ( index == 46 ) ? 0.0008 : dither;\r\n\tdither = ( index == 47 ) ? 0.0047 : dither;\r\n\r\n\tdither = ( index == 48 ) ? 0.006  : dither;\r\n\tdither = ( index == 49 ) ? 0.0021 : dither;\r\n\tdither = ( index == 50 ) ? 0.007  : dither;\r\n\tdither = ( index == 51 ) ? 0.003  : dither;\r\n\tdither = ( index == 52 ) ? 0.0062 : dither;\r\n\tdither = ( index == 53 ) ? 0.0023 : dither;\r\n\tdither = ( index == 54 ) ? 0.0072 : dither;\r\n\tdither = ( index == 55 ) ? 0.0033 : dither;\r\n\r\n\tdither = ( index == 56 ) ? 0.0001 : dither;\r\n\tdither = ( index == 57 ) ? 0.004  : dither;\r\n\tdither = ( index == 58 ) ? 0.0011 : dither;\r\n\tdither = ( index == 59 ) ? 0.005  : dither;\r\n\tdither = ( index == 60 ) ? 0.0003 : dither;\r\n\tdither = ( index == 61 ) ? 0.0043 : dither;\r\n\tdither = ( index == 62 ) ? 0.0013 : dither;\r\n\tdither = ( index == 63 ) ? 0.0052 : dither;\r\n\r\n\treturn color - dither;\r\n\t\r\n}",Pe="vec3 linearGradient( \r\n\tvec2 origin,\r\n\tvec2 target,\r\n\tvec3 color1,\r\n\tvec3 color2,\r\n\tfloat angle\r\n) {\r\n\r\n\tfloat toTarget = length( target );\r\n\tangle = radians( angle ) + atan( target.y, target.x );\r\n\r\n\tfloat progressX = cos( angle ) * toTarget;\r\n\tfloat progressY = sin( angle ) * toTarget;\r\n\tvec2 progress = vec2( progressX, progressY ) + origin;\r\n\r\n\treturn mix( color1, color2, smoothstep( 0.0, 1.0, progress.x ) );\r\n\t\r\n}",ke="float loopValue( float value, float minimum, float change ) {\r\n\r\n\treturn minimum + mod( value - minimum, change );\r\n\r\n}",Se="//\tSimplex 3D Noise \n//\tby Ian McEwan, Ashima Arts\n//\nvec4 permute( vec4 x ){ return mod( ( ( x * 34.0 ) + 1.0 ) * x, 289.0 ); }\nvec4 taylorInvSqrt( vec4 r ){ return 1.79284291400159 - 0.85373472095314 * r; }\n\nfloat simplex3D( float vx, float vy, float vz ) {\n\n\tvec3 v = vec3( vx, vy, vz );\n\t\n\tconst vec2 C = vec2( 1.0/6.0, 1.0/3.0   );\n\tconst vec4 D = vec4( 0.0, 0.5, 1.0, 2.0 );\n\n\t// First corner\n\tvec3 i  = floor( v + dot( v, C.yyy ) );\n\tvec3 x0 =   v - i + dot( i, C.xxx ) ;\n\n\t// Other corners\n\tvec3 g = step( x0.yzx, x0.xyz );\n\tvec3 l = 1.0 - g;\n\tvec3 i1 = min(  g.xyz, l.zxy );\n\tvec3 i2 = max(  g.xyz, l.zxy );\n\n\t// x0 = x0 - 0. + 0.0 * C \n\tvec3 x1 = x0 - i1 + 1.0 * C.xxx;\n\tvec3 x2 = x0 - i2 + 2.0 * C.xxx;\n\tvec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n\t// Permutations\n\ti = mod( i, 289.0 ); \n\tvec4 p = permute( permute( permute(\n\t\t\t i.z + vec4( 0.0, i1.z, i2.z, 1.0 ) )\n\t\t   + i.y + vec4( 0.0, i1.y, i2.y, 1.0 ) ) \n\t\t   + i.x + vec4( 0.0, i1.x, i2.x, 1.0 ) );\n\n\t// Gradients\n\t// ( N*N points uniformly over a square, mapped onto an octahedron.)\n  \tfloat n_ = 1.0/7.0; // N=7\n  \tvec3  ns = n_ * D.wyz - D.xzx;\n\n  \tvec4 j = p - 49.0 * floor( p * ns.z *ns.z ); //  mod( p,N*N)\n\n  \tvec4 x_ = floor( j * ns.z );\n  \tvec4 y_ = floor( j - 7.0 * x_ ); // mod( j,N)\n\n  \tvec4 x = x_ *ns.x + ns.yyyy;\n  \tvec4 y = y_ *ns.x + ns.yyyy;\n  \tvec4 h = 1.0 - abs( x ) - abs( y );\n\n  \tvec4 b0 = vec4( x.xy, y.xy );\n  \tvec4 b1 = vec4( x.zw, y.zw );\n\n  \tvec4 s0 = floor( b0 )*2.0 + 1.0;\n  \tvec4 s1 = floor( b1 )*2.0 + 1.0;\n  \tvec4 sh = -step( h, vec4( 0.0 ) );\n\n  \tvec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  \tvec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  \tvec3 p0 = vec3( a0.xy,h.x );\n  \tvec3 p1 = vec3( a0.zw,h.y );\n  \tvec3 p2 = vec3( a1.xy,h.z );\n  \tvec3 p3 = vec3( a1.zw,h.w );\n\n\t// Normalise gradients\n  \tvec4 norm = taylorInvSqrt( \n\t\tvec4( dot( p0, p0 ), dot( p1, p1 ), dot( p2, p2 ), dot( p3, p3 ) )\n\t);\n  \tp0 *= norm.x;\n  \tp1 *= norm.y;\n  \tp2 *= norm.z;\n  \tp3 *= norm.w;\n\n\t// Mix final noise value\n  \tvec4 m = max( \n\t\t0.6 - vec4( dot( x0, x0 ), dot( x1, x1 ), dot( x2, x2 ), dot( x3, x3 ) ), \n\t\t0.0\n\t);\n  \tm = m * m;\n  \treturn 42.0 * dot( \n\t\tm*m,\n\t\tvec4( dot( p0,x0 ), dot( p1,x1 ), dot( p2,x2 ), dot( p3,x3 ) )\n\t);\n\n}",je={parabola:"float parabola( float x, float power ) {\r\n\r\n\treturn pow( 4.0 * x * ( 1.0 - x ), power );\r\n\r\n}",rotateX:"mat3 rotateX( float angle ) {\r\n\treturn mat3(\r\n\t\tvec3(   1.0,\t        0.0,             0.0\t    ),\r\n\t\tvec3(   0.0, \t        cos(angle), \t-sin(angle) ),\r\n\t\tvec3(   0.0, \t        sin(angle), \t cos(angle) )\r\n\t);\r\n}",rotateY:"mat3 rotateY( float angle ) {\r\n\treturn mat3(\r\n\t\tvec3(   cos(angle),    0.0,           sin(angle)  ),\r\n\t\tvec3(   0.0,           1.0,           0.0         ),\r\n\t\tvec3(   -sin(angle),   0.0,           cos(angle)  )\r\n\t);\r\n}",rotateZ:"mat3 rotateZ( float angle ) {\r\n\treturn mat3(\r\n\t\tvec3(   cos(angle),   -sin(angle),     0.0   ),\r\n\t\tvec3(   sin(angle),    cos(angle),     0.0   ),\r\n\t\tvec3(   0.0,           0.0,            1.0   )\r\n\t);\r\n}",scale:"mat3 scale( float x, float y, float z ) {\r\n\treturn mat3(\r\n\t\tvec3(   x,      0.0,    0.0   ),\r\n\t\tvec3(   0.0,    y,      0.0   ),\r\n\t\tvec3(   0.0,    0.0,    z     )\r\n\t);\r\n}",bayerMatrixDither:Oe,linearGradient:Pe,loopValue:ke,simplex3D:Se,floatPack:se.glsl,getBase:function(){return{blending:re.NormalBlending,transparent:!0}},editBasic:function(t,e,n,r,o){var i="\n",a="#include <common>",s="#include <begin_vertex>",u="#include <logdepthbuf_fragment>";return e&&(t.vertexShader=t.vertexShader.replace(a,a+i+e)),n&&(t.vertexShader=t.vertexShader.replace(s,s+i+n)),r&&(t.fragmentShader=t.fragmentShader.replace(a,a+i+r)),o&&(t.fragmentShader=t.fragmentShader.replace(u,o+i+"\t"+u)),je.debug&&(console.log(t.vertexShader),console.log(t.fragmentShader)),t}},_e={};function Te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}_e.uniforms={tMixA:{value:null},tMixB:{value:null},uCellsX:{value:30},uCellsY:{value:100},uDisplace:{value:.2},uMix:{value:0},uSeed:{value:0},uBackwards:{value:!0},uAspect:{value:.5}},_e.vertexShader="\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\n\t\tvUv = uv;\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t}\n",_e.fragmentShader="\nuniform bool uBackwards;\nuniform float uAspect;\nuniform float uCellsX;\nuniform float uCellsY;\nuniform float uDisplace;\nuniform float uMix;\nuniform float uSeed;\nuniform sampler2D tMixA;\nuniform sampler2D tMixB;\nvarying vec2 vUv;\n\nfloat random( float x, float y ) {\n\n    vec2 st = vec2( x, y );\n\n    return fract(\n\t\tsin( dot( st.xy, vec2( 12.9898, 78.233 ) ) ) * 43758.5453123\n\t);\n\n}\n\nfloat perlin( float i, float j ) {\n\n    i = floor( i );\n    j = fract( j );\n    float k = random( i, uSeed );\n    float l = random( i + 1.0, uSeed );\n\n    return mix( k, l, smoothstep( 0.0, 1.0, j ) );\n\n}\n\n".concat(je.parabola,"\n\nvoid main() {\n\n\t// Glitch\n\n\tvec2 cells = vec2( uCellsX, uCellsY );\n\n\tvec2 cellM = vUv * cells;\n\tvec2 cellXS = cellM * 10.000;\n\tvec2 cellS = cellM * 5.000;\n\tvec2 cellL = cellM * 0.5;\n\tvec2 cellXL = cellM * 0.1;\n\n    float bands = perlin( \n\t\tcellM.y + uMix, \n\t\tcellM.y * 0.01\n\t);\n\t\n\tfloat smallBands = perlin( \n\t\tcellL.x + random( cellXL.y, 100000.0 ) * 8.0 + uMix * perlin( cellXL.y, cellXL.y ) * 50.0, \n\t\tcellXL.y * 0.001\n\t) * uMix * 0.5;\n\n\tfloat smallNoise = perlin(\n\t\tcellS.x + random( cellM.y, 10000000.0 ) + uMix * perlin( cellXS.y, cellXS.y ) * 1.0,\n\t\tcellM.y * 0.2\n\t) * uMix * 0.75;\n\n\tfloat glitch = parabola( uMix, 2.0 ) * ( bands - smallBands - smallNoise );\n\n\t// Displacement\n\n\tfloat displacement = parabola( vUv.x, 1.0 ) * glitch * uDisplace; \n\tvec2 displacedUv = vec2( vUv.x + displacement, vUv.y );\n\n\t// Slanted mask\n\t\n\tfloat slant = 0.12 / uAspect;\n\tconst float slantEase = 0.5;\n\tfloat offset = ( uBackwards ) \n\t\t? slant * mix( 1.0, uMix, slantEase )\n\t\t: -slant * mix( 1.0, 1.0 - uMix, slantEase );\n\toffset *= ( 1.0 - vUv.y ) * parabola( uMix, 2.0 );\n\tfloat mask = step( 1.0 - vUv.x + offset, uMix );\n\n\tvec4 texelA = texture2D( tMixA, vec2( displacedUv.x + uMix * 0.2 * uAspect, displacedUv.y ) );\n\tvec4 texelB = texture2D( tMixB, displacedUv );\n\n\tfloat mixValue = clamp( mask + offset * displacement, 0.0, 1.0 );\n\n\t// Final mix\n\n\tgl_FragColor = mix( texelA, texelB, mixValue );\n\n}\n");var Ee=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=new re.Scene;this.camera=new re.OrthographicCamera(-1,1,1,-1,-1,1),this.geometry=new re.PlaneGeometry(2,2),this.material=new re.ShaderMaterial(_e),this.quad=new re.Mesh(this.geometry,this.material),this.scene.add(this.quad),this.sketches=n,this.renderer=e}var e,n,r;return e=t,(n=[{key:"init",value:function(){this.sketches.forEach((function(t){return t.init()})),this.set(this.sketches[0],this.sketches[1])}},{key:"set",value:function(t,e){this.mixA=t,this.mixB=e,this.material.uniforms.tMixA.value=this.mixA.output,this.material.uniforms.tMixB.value=this.mixB.output}},{key:"resize",value:function(t,e,n){this.sketches.forEach((function(r){return r.resize(t,e,n)}));var r=t/e,o=Math.ceil(18*r);this.material.uniforms.uCellsX.value=o;var i=.2/r;this.material.uniforms.uDisplace.value=i,this.material.uniforms.uAspect.value=r}},{key:"tick",value:function(t){var e=this.mixA,n=this.mixB,r=this.mix;r>0&&r<1?(t*=2,this.lastTicked=this.lastTicked===e?n:e):this.lastTicked=0===r?e:n,this.lastTicked.tick(t),this.renderer.render(this.scene,this.camera)}},{key:"mix",get:function(){return this.material.uniforms.uMix.value},set:function(t){this.material.uniforms.uMix.value=t}}])&&Te(e.prototype,n),r&&Te(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Re=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r||(r=n),this.camera=e,this.near=n,this.far=r,this.depth=Math.abs(r-n),this.x=new re.Vector3,this.y=new re.Vector3,this.z=new re.Vector3}var e,n,r;return e=t,(n=[{key:"update",value:function(){var t=this.getVisibleHeight(this.far),e=t*this.camera.aspect;this.height=t,this.width=e,this.left=.5*-e,this.right=.5*e,this.top=.5*t,this.bottom=.5*-t,this.x.set(this.left,this.right,this.width),this.y.set(this.bottom,this.top,this.height),this.z.set(this.far,this.near,this.depth),this.needsUpdate=!1}},{key:"getVisibleHeight",value:function(e){return t.getVisibleHeight(this.camera,e)}},{key:"getVisibleWidth",value:function(e){return t.getVisibleWidth(this.camera,e)}}])&&Ce(e.prototype,n),r&&Ce(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Me(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function De(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ae(t,e,n){return e&&De(t.prototype,e),n&&De(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}Re.getVisibleHeight=function(t,e){var n=t.position.z;void 0===e&&(e=n),e+=e<n?-n:n;var r=t.fov*Math.PI/180;return 2*Math.tan(r/2)*Math.abs(e)},Re.getVisibleWidth=function(t,e){return Re.getVisibleHeight(t,e)*t.aspect};var ze=function(){function t(){Me(this,t),this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}return Ae(t,[{key:"setSize",value:function(){}},{key:"render",value:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}]),t}(),Ue=new re.OrthographicCamera(-1,1,1,-1,0,1),Be=new re.BufferGeometry;Be.setAttribute("position",new re.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),Be.setAttribute("uv",new re.Float32BufferAttribute([0,2,0,0,2,0],2));var Ie=function(){function t(e){Me(this,t),this._mesh=new re.Mesh(Be,e)}return Ae(t,[{key:"dispose",value:function(){this._mesh.geometry.dispose()}},{key:"render",value:function(t){t.render(this._mesh,Ue)}},{key:"material",get:function(){return this._mesh.material},set:function(t){this._mesh.material=t}}]),t}(),Fe={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}"},Ge={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new re.Color(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"};function Xe(t){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xe(t)}function Le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ye(t,e){return Ye=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ye(t,e)}function Ve(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=He(t);if(e){var o=He(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ne(this,n)}}function Ne(t,e){if(e&&("object"===Xe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function He(t){return He=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},He(t)}var Ze=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ye(t,e)}(i,t);var e,n,r,o=Ve(i);function i(t,e,n,r){var a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this)).strength=void 0!==e?e:1,a.radius=n,a.threshold=r,a.resolution=void 0!==t?new re.Vector2(t.x,t.y):new re.Vector2(256,256),a.clearColor=new re.Color(0,0,0);var s={minFilter:re.LinearFilter,magFilter:re.LinearFilter,format:re.RGBAFormat};a.renderTargetsHorizontal=[],a.renderTargetsVertical=[],a.nMips=5;var u=Math.round(a.resolution.x/2),c=Math.round(a.resolution.y/2);a.renderTargetBright=new re.WebGLRenderTarget(u,c,s),a.renderTargetBright.texture.name="UnrealBloomPass.bright",a.renderTargetBright.texture.generateMipmaps=!1;for(var l=0;l<a.nMips;l++){var f=new re.WebGLRenderTarget(u,c,s);f.texture.name="UnrealBloomPass.h"+l,f.texture.generateMipmaps=!1,a.renderTargetsHorizontal.push(f);var h=new re.WebGLRenderTarget(u,c,s);h.texture.name="UnrealBloomPass.v"+l,h.texture.generateMipmaps=!1,a.renderTargetsVertical.push(h),u=Math.round(u/2),c=Math.round(c/2)}void 0===Ge&&console.error("THREE.UnrealBloomPass relies on LuminosityHighPassShader");var p=Ge;a.highPassUniforms=re.UniformsUtils.clone(p.uniforms),a.highPassUniforms.luminosityThreshold.value=r,a.highPassUniforms.smoothWidth.value=.01,a.materialHighPassFilter=new re.ShaderMaterial({uniforms:a.highPassUniforms,vertexShader:p.vertexShader,fragmentShader:p.fragmentShader,defines:{}}),a.separableBlurMaterials=[];var y=[3,5,7,9,11];u=Math.round(a.resolution.x/2),c=Math.round(a.resolution.y/2);for(var d=0;d<a.nMips;d++)a.separableBlurMaterials.push(a.getSeperableBlurMaterial(y[d])),a.separableBlurMaterials[d].uniforms.texSize.value=new re.Vector2(u,c),u=Math.round(u/2),c=Math.round(c/2);a.compositeMaterial=a.getCompositeMaterial(a.nMips),a.compositeMaterial.uniforms.blurTexture1.value=a.renderTargetsVertical[0].texture,a.compositeMaterial.uniforms.blurTexture2.value=a.renderTargetsVertical[1].texture,a.compositeMaterial.uniforms.blurTexture3.value=a.renderTargetsVertical[2].texture,a.compositeMaterial.uniforms.blurTexture4.value=a.renderTargetsVertical[3].texture,a.compositeMaterial.uniforms.blurTexture5.value=a.renderTargetsVertical[4].texture,a.compositeMaterial.uniforms.bloomStrength.value=e,a.compositeMaterial.uniforms.bloomRadius.value=.1,a.compositeMaterial.needsUpdate=!0;a.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],a.bloomTintColors=[new re.Vector3(1,1,1),new re.Vector3(1,1,1),new re.Vector3(1,1,1),new re.Vector3(1,1,1),new re.Vector3(1,1,1)],a.compositeMaterial.uniforms.bloomTintColors.value=a.bloomTintColors,void 0===Fe&&console.error("THREE.UnrealBloomPass relies on CopyShader");var m=Fe;return a.copyUniforms=re.UniformsUtils.clone(m.uniforms),a.copyUniforms.opacity.value=1,a.materialCopy=new re.ShaderMaterial({uniforms:a.copyUniforms,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,blending:re.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),a.enabled=!0,a.needsSwap=!1,a._oldClearColor=new re.Color,a.oldClearAlpha=1,a.basic=new re.MeshBasicMaterial,a.fsQuad=new Ie(null),a}return e=i,(n=[{key:"dispose",value:function(){for(var t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(var e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()}},{key:"setSize",value:function(t,e){var n=Math.round(t/2),r=Math.round(e/2);this.renderTargetBright.setSize(n,r);for(var o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(n,r),this.renderTargetsVertical[o].setSize(n,r),this.separableBlurMaterials[o].uniforms.texSize.value=new re.Vector2(n,r),n=Math.round(n/2),r=Math.round(r/2)}},{key:"render",value:function(t,e,n,r,o){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();var a=t.autoClear;t.autoClear=!1,t.setClearColor(this.clearColor,0),o&&t.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,t.setRenderTarget(null),t.clear(),this.fsQuad.render(t)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),this.fsQuad.render(t);for(var s=this.renderTargetBright,u=0;u<this.nMips;u++)this.fsQuad.material=this.separableBlurMaterials[u],this.separableBlurMaterials[u].uniforms.colorTexture.value=s.texture,this.separableBlurMaterials[u].uniforms.direction.value=i.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[u]),t.clear(),this.fsQuad.render(t),this.separableBlurMaterials[u].uniforms.colorTexture.value=this.renderTargetsHorizontal[u].texture,this.separableBlurMaterials[u].uniforms.direction.value=i.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[u]),t.clear(),this.fsQuad.render(t),s=this.renderTargetsVertical[u];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,o&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(n),this.fsQuad.render(t)),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=a}},{key:"getSeperableBlurMaterial",value:function(t){return new re.ShaderMaterial({defines:{KERNEL_RADIUS:t,SIGMA:t},uniforms:{colorTexture:{value:null},texSize:{value:new re.Vector2(.5,.5)},direction:{value:new re.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat fSigma = float(SIGMA);\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})}},{key:"getCompositeMaterial",value:function(t){return new re.ShaderMaterial({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform sampler2D dirtTexture;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}])&&Le(e.prototype,n),r&&Le(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(ze);function We(t){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},We(t)}function Qe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $e(t,e){return $e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},$e(t,e)}function Ke(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tn(t);if(e){var o=tn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Je(this,n)}}function Je(t,e){if(e&&("object"===We(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function tn(t){return tn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},tn(t)}Ze.BlurDirectionX=new re.Vector2(1,0),Ze.BlurDirectionY=new re.Vector2(0,1);var en=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$e(t,e)}(i,t);var e,n,r,o=Ke(i);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.strength,n=void 0===e?.6:e,r=t.radius,a=void 0===r?1:r,s=t.threshold,u=void 0===s?.3:s;return Qe(this,i),o.call(this,new re.Vector2,n,a,u)}return e=i,(n=[{key:"getCompositeMaterial",value:function(t){return new re.ShaderMaterial({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform sampler2D dirtTexture;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\t".concat(Oe,"\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 color = bloomStrength * ( \n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv)\n\t\t\t\t\t);\n\n\t\t\t\t\tcolor.rgb = bayerMatrixDither( color.rgb );\n\n\t\t\t\t\tgl_FragColor = color;\n\t\t\t\t}\n\t\t\t")})}}])&&qe(e.prototype,n),r&&qe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Ze);function nn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var on=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math;nn(this,t),this.prng=e}var e,n,r;return e=t,n=[{key:"random",value:function(){return this.prng.random()}},{key:"amount",value:function(){return this.random()}},{key:"number",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.random();return isNaN(t)||isNaN(e)?r:n?Math.floor(r*(e-t+1)+t):r*(e-t)+t}},{key:"noise",value:function(){return this.number(-1,1)}},{key:"int",value:function(t,e){return this.number(t,e,!0)}},{key:"uint",value:function(t){return this.int(0,t)}},{key:"boolean",value:function(){return this.random()<.5}},{key:"chance",value:function(t){return this.random()<t}},{key:"item",value:function(t){return t[this.uint(t.length-1)]}},{key:"char",value:function(t){return t.charAt(this.uint(t.length-1))}}],n&&rn(e.prototype,n),r&&rn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function an(t){return an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},an(t)}function sn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function un(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sn(Object(n),!0).forEach((function(e){cn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function cn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hn(t,e){return hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},hn(t,e)}function pn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=dn(t);if(e){var o=dn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yn(this,n)}}function yn(t,e){if(e&&("object"===an(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function dn(t){return dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},dn(t)}var mn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hn(t,e)}(i,t);var e,n,r,o=pn(i);function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.color1,r=void 0===n?16777215:n,a=e.color2,s=void 0===a?0:a,u=e.angle,c=void 0===u?90:u;ln(this,i);var l=new re.PlaneGeometry(2,2),f=new re.ShaderMaterial(un(un({},i.shader),{},{uniforms:{uAngle:{value:c},uColor1:{value:new re.Color(r)},uColor2:{value:new re.Color(s)}}}));return(t=o.call(this,l,f)).frustumCulled=!1,t}return e=i,(n=[{key:"angle",get:function(){return this.material.uniforms.uAngle.value},set:function(t){this.material.uniforms.uAngle.value=t}},{key:"color1",get:function(){return this.material.uniforms.uColor1.value},set:function(t){this.material.uniforms.uColor1.value=t}},{key:"color2",get:function(){return this.material.uniforms.uColor2.value},set:function(t){this.material.uniforms.uColor2.value=t}}])&&fn(e.prototype,n),r&&fn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(re.Mesh);function vn(t){return vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vn(t)}function bn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gn(t,e){return gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},gn(t,e)}function wn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=On(t);if(e){var o=On(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xn(this,n)}}function xn(t,e){if(e&&("object"===vn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function On(t){return On=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},On(t)}mn.shader={depthWrite:!1,depthTest:!1,vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\r\n\tgl_Position = vec4( position, 1.0 );\r\n\r\n}",fragmentShader:"\n\t\tuniform float uAngle;\n\t\tuniform vec3 uColor1;\n\t\tuniform vec3 uColor2;\n\t\tvarying vec2 vUv;\n\t\t\n\t\t".concat(Pe,"\n\t\t").concat(Oe,"\n\n\t\tvoid main() {\n\n\t\t\tvec2 origin = vec2( 0.5, 0.5 );\n\t\t\tvec2 target = vUv - origin;\n\t\t\tvec3 color = linearGradient( origin, target, uColor1, uColor2, uAngle );\n\t\t\t\n\t\t\tcolor = bayerMatrixDither( color );\n\n\t\t\tgl_FragColor = vec4( color, 1.0 );\n\t\t\t\n\t\t}")};var Pn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gn(t,e)}(i,t);var e,n,r,o=wn(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this)).textureID=void 0!==e?e:"tDiffuse",t instanceof re.ShaderMaterial?(n.uniforms=t.uniforms,n.material=t):t&&(n.uniforms=re.UniformsUtils.clone(t.uniforms),n.material=new re.ShaderMaterial({defines:Object.assign({},t.defines),uniforms:n.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),n.fsQuad=new Ie(n.material),n}return e=i,(n=[{key:"render",value:function(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}}])&&bn(e.prototype,n),r&&bn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(ze);function kn(t){return kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kn(t)}function Sn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _n(t,e,n){return e&&jn(t.prototype,e),n&&jn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&En(t,e)}function En(t,e){return En=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},En(t,e)}function Cn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Mn(t);if(e){var o=Mn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rn(this,n)}}function Rn(t,e){if(e&&("object"===kn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Mn(t){return Mn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Mn(t)}var Dn=function(t){Tn(n,t);var e=Cn(n);function n(t,r){var o;return Sn(this,n),(o=e.call(this)).scene=t,o.camera=r,o.clear=!0,o.needsSwap=!1,o.inverse=!1,o}return _n(n,[{key:"render",value:function(t,e,n){var r,o,i=t.getContext(),a=t.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(r=0,o=1):(r=1,o=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),a.buffers.stencil.setFunc(i.ALWAYS,r,4294967295),a.buffers.stencil.setClear(o),a.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(i.EQUAL,1,4294967295),a.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),a.buffers.stencil.setLocked(!0)}}]),n}(ze),An=function(t){Tn(n,t);var e=Cn(n);function n(){var t;return Sn(this,n),(t=e.call(this)).needsSwap=!1,t}return _n(n,[{key:"render",value:function(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}]),n}(ze);function zn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bn(t,e,n){return e&&Un(t.prototype,e),n&&Un(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var In=function(){function t(e,n){if(zn(this,t),this.renderer=e,void 0===n){var r={minFilter:re.LinearFilter,magFilter:re.LinearFilter,format:re.RGBAFormat},o=e.getSize(new re.Vector2);this._pixelRatio=e.getPixelRatio(),this._width=o.width,this._height=o.height,(n=new re.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,r)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===Fe&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===Pn&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new Pn(Fe),this.clock=new re.Clock}return Bn(t,[{key:"swapBuffers",value:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}},{key:"addPass",value:function(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"insertPass",value:function(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"removePass",value:function(t){var e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)}},{key:"isLastEnabledPass",value:function(t){for(var e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}},{key:"render",value:function(t){void 0===t&&(t=this.clock.getDelta());for(var e=this.renderer.getRenderTarget(),n=!1,r=0,o=this.passes.length;r<o;r++){var i=this.passes[r];if(!1!==i.enabled){if(i.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),i.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),i.needsSwap){if(n){var a=this.renderer.getContext(),s=this.renderer.state.buffers.stencil;s.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),s.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==Dn&&(i instanceof Dn?n=!0:i instanceof An&&(n=!1))}}this.renderer.setRenderTarget(e)}},{key:"reset",value:function(t){if(void 0===t){var e=this.renderer.getSize(new re.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}},{key:"setSize",value:function(t,e){this._width=t,this._height=e;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(var o=0;o<this.passes.length;o++)this.passes[o].setSize(n,r)}},{key:"setPixelRatio",value:function(t){this._pixelRatio=t,this.setSize(this._width,this._height)}}]),t}(),Fn=(new re.OrthographicCamera(-1,1,1,-1,0,1),new re.BufferGeometry);Fn.setAttribute("position",new re.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),Fn.setAttribute("uv",new re.Float32BufferAttribute([0,2,0,0,2,0],2));function Gn(t){return Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gn(t)}function Xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ln(t,e){return Ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ln(t,e)}function Yn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Nn(t);if(e){var o=Nn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vn(this,n)}}function Vn(t,e){if(e&&("object"===Gn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Nn(t){return Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Nn(t)}var Hn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ln(t,e)}(i,t);var e,n,r,o=Yn(i);function i(t,e,n,r,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this)).scene=t,s.camera=e,s.overrideMaterial=n,s.clearColor=r,s.clearAlpha=void 0!==a?a:0,s.clear=!0,s.clearDepth=!1,s.needsSwap=!1,s._oldClearColor=new re.Color,s}return e=i,(n=[{key:"render",value:function(t,e,n){var r,o,i=t.autoClear;t.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),r=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,r),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),t.autoClear=i}}])&&Xn(e.prototype,n),r&&Xn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(ze);function Zn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Qn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.renderer,r=e.stage,o=e.renderToScreen,i=void 0===o||o;Zn(this,t),this.composer=new In(n),this.composer.renderToScreen=i,this.passes={},this.add("render",new Hn(r.scene,r.camera))}var e,n,r;return e=t,(n=[{key:"add",value:function(t,e){this.passes[t]=e,this.composer.addPass(e)}},{key:"remove",value:function(t){var e,n=this.passes[t];n&&(this.composer.removePass(n),null==n||null===(e=n.dispose)||void 0===e||e.call(n),delete this.passes[t])}},{key:"resize",value:function(t,e,n){this.composer.setSize(t,e),Object.values(this.passes).forEach((function(r){return null==r?void 0:r.setSize(t,e,n)}))}},{key:"tick",value:function(){this.composer.render()}},{key:"dispose",value:function(){Object.values(this.passes).forEach((function(t){var e;return null==t||null===(e=t.dispose)||void 0===e?void 0:e.call(t)})),Object.values(this).forEach((function(t){var e;return null==t||null===(e=t.dispose)||void 0===e?void 0:e.call(t)}))}}])&&Wn(e.prototype,n),r&&Wn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Kn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.target,r=void 0===n?window:n,o=e.width,i=void 0===o?window.innerWidth:o,a=e.height,s=void 0===a?window.innerHeight:a,u=e.margin,c=void 0===u?0:u,l=e.marginTop,f=e.marginRight,h=e.marginBottom,p=e.marginLeft,y=e.enabled,d=void 0===y||y,m=e.debug,v=void 0!==m&&m,b=e.preventDefault,g=void 0!==b&&b,w=e.onChange;qn(this,t);var x=function(t){return"number"==typeof t&&t>=0?t:c};this.margin={top:x(l),right:x(f),bottom:x(h),left:x(p)},this.hitbox={top:this.margin.top,left:this.margin.left,width:i,height:s},this.resize(i,s),this.x=this.y=.5,this.target=r,this.onMouseMove=function(t){g&&t.preventDefault&&t.preventDefault(),this.track(t.clientX,t.clientY)}.bind(this),this.onTouchMove=function(t){g&&t.preventDefault(),this.onMouseMove(t.targetTouches[0])}.bind(this),this.onChange=w,v&&(this.onDebug=this.log),d&&this.enable()}var e,n,r;return e=t,(n=[{key:"enable",value:function(){this._enabled||(this.target.addEventListener("touchmove",this.onTouchMove),this.target.addEventListener("mousemove",this.onMouseMove),this._enabled=!0)}},{key:"disable",value:function(){this._enabled&&(this.target.removeEventListener("touchmove",this.onTouchMove),this.target.removeEventListener("mousemove",this.onMouseMove),this._enabled=!1)}},{key:"dispose",value:function(){this.disable()}},{key:"track",value:function(t,e){var n,r,o;if(this.clientX!==t){this.clientX=t;var i=this.normalizeX;this.x!==i&&(this.x=i,o=!0)}if(this.clientY!==e){this.clientY=e;var a=this.normalizeY;this.y!==a&&(this.y=a,o=!0)}o&&(null===(n=this.onChange)||void 0===n||n.call(this),null===(r=this.onDebug)||void 0===r||r.call(this))}},{key:"resize",value:function(t,e){var n=this.margin.left*t,r=this.margin.right*t;this.hitbox.width=t-n-r,this.offsetX=n;var o=this.margin.top*e,i=this.margin.bottom*e;this.hitbox.height=e-o-i,this.offsetY=o}},{key:"log",value:function(){var t=this.x,e=this.y,n=this.reverseX,r=this.reverseY,o=this.polarizeX,i=this.polarizeY,a=this.reversePolarizeX,s=this.reversePolarizeY,u=this.centerX,c=this.centerY,l=this.reverseCenterX,f=this.reverseCenterY;console.log({x:t,y:e,reverseX:n,reverseY:r,polarizeX:o,polarizeY:i,reversePolarizeX:a,reversePolarizeY:s,centerX:u,centerY:c,reverseCenterX:l,reverseCenterY:f})}},{key:"normalizeX",get:function(){return t.normalize(this.clientX-this.offsetX,this.hitbox.width)}},{key:"normalizeY",get:function(){return t.normalize(this.clientY-this.offsetY,this.hitbox.height)}},{key:"reverseX",get:function(){return t.reverse(this.x)}},{key:"reverseY",get:function(){return t.reverse(this.y)}},{key:"polarizeX",get:function(){return t.polarize(this.x)}},{key:"polarizeY",get:function(){return t.polarize(this.y)}},{key:"reversePolarizeX",get:function(){return t.reversePolarize(this.x)}},{key:"reversePolarizeY",get:function(){return t.reversePolarize(this.y)}},{key:"centerX",get:function(){return t.center(this.x)}},{key:"centerY",get:function(){return t.center(this.y)}},{key:"reverseCenterX",get:function(){return t.reverseCenter(this.x)}},{key:"reverseCenterY",get:function(){return t.reverseCenter(this.y)}}])&&$n(e.prototype,n),r&&$n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Jn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Kn.clamp=function(t){return t>1?1:t<0?0:t},Kn.normalize=function(t,e){return Kn.clamp(t/e)},Kn.reverse=function(t){return 1-t},Kn.polarize=function(t){return 2*t-1},Kn.reversePolarize=function(t){return 1-2*t},Kn.center=function(t){return 1-2*Math.abs(t-.5)},Kn.reverseCenter=function(t){return 2*Math.abs(t-.5)};var er=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.lookAt,o=void 0===r?{x:0,y:0,z:0}:r,i=n.bounds,a=void 0===i?{x:5,y:5,z:0}:i,s=n.speed,u=void 0===s?.002:s,c=n.intro;Jn(this,t),this.camera=e,this.lookAt=new re.Vector3(o.x,o.y,o.z),this.bounds=new re.Vector3(a.x,a.y,a.z),this.speed=u,this.origin=(new re.Vector3).copy(e.position),this.target=new re.Vector3,c&&this.set(c.x,c.y,c.z)}var e,n,r;return e=t,n=[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.camera.position.set(t,e,n),this}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.target.x=this.origin.x+this.bounds.x*t,this.target.y=this.origin.y+this.bounds.y*e,this.target.z=this.origin.z+this.bounds.z*n,this}},{key:"tick",value:function(t){var e=re.MathUtils.clamp(this.speed*t,0,1);return this.camera.position.lerp(this.target,e),this.camera.lookAt(this.lookAt),this}}],n&&tr(e.prototype,n),r&&tr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var or=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.plane,o=n.width,i=void 0===o?1e3:o,a=n.height,s=void 0===a?1e3:a,u=n.horizontal,c=void 0!==u&&u,l=n.cursor,f=n.cursorSize,h=void 0===f?.1:f,p=n.color,y=void 0===p?16711680:p,d=n.opacity,m=void 0===d?.15:d,v=n.lerp,b=n.autoRotate;nr(this,t),r||(r=new re.Mesh(new re.PlaneGeometry(i,s),new re.MeshBasicMaterial({color:y,opacity:m,transparent:m<1})),c&&r.rotateX(-Math.PI/2)),l||(l=new re.Mesh(new re.BoxGeometry(h,h,h),new re.MeshBasicMaterial({color:y}))),e.add(r),e.add(l),this.plane=r,this.cursor=l,this.lerp=v,this.autoRotate=b,this.camera=e.camera,this.tracker=new re.Vector2,this.raycaster=new re.Raycaster,e.debug||(this.plane.visible=!1,this.cursor.visible=!1)}var e,n,r;return e=t,(n=[{key:"set",value:function(t,e){this.tracker.set(t,e)}},{key:"tick",value:function(t){this.autoRotate&&this.plane.quaternion.copy(this.camera.quaternion),this.raycaster.setFromCamera(this.tracker,this.camera);var e=this.raycaster.intersectObject(this.plane)[0];if(null!=e&&e.point){if(!this.lerp)return this.cursor.position.copy(e.point);var n=re.MathUtils.clamp(this.lerp*t,0,1);this.cursor.position.lerp(e.point,n)}}}])&&rr(e.prototype,n),r&&rr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ir(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ar=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sketch=e,!1!==e.settings.cursorTracker&&this.initTracker(),e.settings.cursorProjector&&this.initProjector(),e.settings.cameraRig&&this.initCameraRig(),e.settings.gui&&this.initGUI()}var e,n,r;return e=t,(n=[{key:"initTracker",value:function(){this.tracker=new Kn,this.trackerEnabled=!0}},{key:"initProjector",value:function(){this.projector=new or(this.sketch,this.sketch.settings.cursorProjector),this.cursor=this.projector.cursor}},{key:"initCameraRig",value:function(){var t=this.sketch.settings,e=t.camera.lookAt,n=t.cameraRig.bounds,r=t.cameraRig.speed,o=t.cameraRig.intro;this.cameraRig=new er(this.sketch.camera,{lookAt:e,bounds:n,speed:r,intro:o}),this.cameraRigEnabled=!0}},{key:"initGUI",value:function(){this.gui=new t.GUI,this.gui.title(this.sketch.name.toUpperCase()),this.autoCloseGUI()}},{key:"autoCloseGUI",value:function(){this.gui&&(this.sketch.sketchpad.wide||this.gui.close())}},{key:"refreshGUI",value:function(){this.gui&&!this.gui._closed&&this.gui.controllersRecursive().forEach((function(t){return t.updateDisplay()}))}},{key:"resize",value:function(t,e){var n;null===(n=this.tracker)||void 0===n||n.resize(t,e),this.autoCloseGUI()}},{key:"tick",value:function(t){this.cameraRigEnabled&&this.cameraRig.update(this.tracker.reversePolarizeX,this.tracker.y).tick(t)}}])&&ir(e.prototype,n),r&&ir(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function sr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}ar.GUI=window.GUI,ar.VALUE="value",ar.clamp=re.MathUtils.clamp,ar.lerp=re.MathUtils.lerp;var cr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.background,r=e.camera;if(sr(this,t),this.scene=new re.Scene,n&&(this.scene.background=n),r){if(r instanceof re.Camera==!1){var o=r.start,i=r.lookAt;r=new re.PerspectiveCamera(r.fov,r.aspect,r.near,r.far),o&&r.position.set(o.x,o.y,o.z),i&&r.lookAt(i.x,i.y,i.z)}}else r=new re.PerspectiveCamera;this.camera=r}var e,n,r;return e=t,(n=[{key:"add",value:function(t){this.scene.add(t)}},{key:"remove",value:function(t){this.scene.remove(t)}},{key:"resize",value:function(t,e){this.camera.aspect=t/e,this.camera.updateProjectionMatrix()}}])&&ur(e.prototype,n),r&&ur(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function lr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lr(Object(n),!0).forEach((function(e){hr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function hr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var dr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.defaults,r=void 0===n?{}:n,o=e.settings,i=void 0===o?{}:o,a=e.stage,s=e.background,u=e.random;pr(this,t),i=fr(fr({},r),i),this.settings=i,a||(a=new cr(i)),this.stage=a;var c=i.sketchpad||new xe;this.sketchpad=c,this.effects=new Qn({renderer:c.renderer,stage:a,renderToScreen:i.renderToScreen}),this.random=u||i.random?new on:null,!s&&i.background&&this.initBackground()}var e,n,r;return e=t,n=[{key:"initBackground",value:function(){var t=this.settings.background,e=t instanceof re.Color?t:("string"==typeof t||"number"==typeof t)&&new re.Color(t);if(e)return this.stage.scene.background=e;t.color1&&t.color2&&(this.background=new mn(t),this.add(this.background))}},{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ar;this.initScene(),t&&(this.controls=new t(this))}},{key:"initScene",value:function(){}},{key:"dispose",value:function(){this.stage.dispose(),this.effects.dispose()}},{key:"resize",value:function(t,e,n){var r,o;this.stage.resize(t,e),null===(r=this.controls)||void 0===r||r.resize(t,e),null===(o=this.effects)||void 0===o||o.resize(t,e,n)}},{key:"tick",value:function(t,e){var n;null===(n=this.controls)||void 0===n||n.tick(t,e),this.effects.tick(t,e)}},{key:"add",value:function(t){this.stage.add(t)}},{key:"remove",value:function(t){this.stage.remove(t)}},{key:"camera",get:function(){return this.stage.camera}},{key:"debug",get:function(){return this.sketchpad.debug}},{key:"name",get:function(){return this.settings.name||"Sketch"}},{key:"output",get:function(){return this.effects.composer.readBuffer.texture}}],n&&yr(e.prototype,n),r&&yr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function mr(t){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mr(t)}function vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function br(t,e){return br=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},br(t,e)}function gr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xr(t);if(e){var o=xr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wr(this,n)}}function wr(t,e){if(e&&("object"===mr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function xr(t){return xr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},xr(t)}var Or=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&br(t,e)}(i,t);var e,n,r,o=gr(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).tracker.x=1,e.orientation=1,e.intensity=.5;var n=t.settings.curl;return e.applyCurlSpeed=function(){t.curlSpeed.value=n.speed/(2*n.epsilon)},e}return e=i,(n=[{key:"tick",value:function(t){if(this.trackerEnabled){var e=ar.clamp,n=ar.lerp,r=this.sketch,o=this.tracker,i=e(r.settings.lerpSpeed*t,0,1);this.orientation=n(this.orientation,o.polarizeX,i),this.intensity=n(this.intensity,o.reverseY,i),r.wind.value.x=.7*this.orientation,r.wind.value.y=n(.2,.5,this.intensity),r.wind.value.z=n(-3.5,3.5,this.intensity),this.sketch.settings.speed=n(6e-4,.0018,this.intensity),r.settings.curl.speed=n(.12,.04,this.intensity),this.applyCurlSpeed()}}}])&&vr(e.prototype,n),r&&vr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(ar),Pr={name:"Ablaze",background:{color1:11010090,color2:14505216},colorHigh:13395456,colorLow:16755200,opacity:.9,particle:{count:1e4,size:.04,near:-2,far:-5},disc:{size:.6,segments:64,offset:-1.5,fill:{color:0,opacity:.05,transparent:!0},stroke:{color:13395456,opacity:.1,transparent:!0}},curl:{epsilon:.001,speed:.07,scale:.3,strength:{x:.5,y:.33,z:.5}},rotation:90,scale:{top:0,bottom:1,gradient:.5},GPGPUTextureSize:128,speed:.001,timeFactor:.03,lerpSpeed:.0015,bloom:{strength:.55,radius:.4,threshold:.455},random:!0},kr="\nuniform sampler2D GPGPU_x;\nuniform sampler2D GPGPU_y;\nuniform sampler2D GPGPU_z;\nuniform float uEpsilon;\nuniform float uCurlScale;\nuniform float uCurlSpeed;\nuniform float uDelta;\nuniform float uTime;\nuniform vec3 uBounds;\nuniform vec3 uCurlStrength;\nuniform vec3 uWind;\n".concat(se.glsl,"\n").concat(ke,"\n").concat(Se,"\n\nvoid main() {\n\t\n\t// Read\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\tfloat x = unpackFloat( texture2D( GPGPU_x, uv ) );\n\tfloat y = unpackFloat( texture2D( GPGPU_y, uv ) );\n\tfloat z = unpackFloat( texture2D( GPGPU_z, uv ) );\n\n\t// Curl\n\n\tfloat scaledX = ( x + uTime ) * uCurlScale;\n\tfloat scaledY = ( y + uTime ) * uCurlScale;\n\tfloat scaledZ = ( z + uTime ) * uCurlScale;\n\n\tfloat noiseY1 = simplex3D( scaledX, scaledY + uEpsilon, scaledZ );\n\tfloat noiseY2 = simplex3D( scaledX, scaledY - uEpsilon, scaledZ );\n\tfloat noiseY = noiseY1 - noiseY2;\n\n\tfloat noiseZ1 = simplex3D( scaledX, scaledY, scaledZ + uEpsilon );\n\tfloat noiseZ2 = simplex3D( scaledX, scaledY, scaledZ - uEpsilon );\n\tfloat noiseZ = noiseZ1 - noiseZ2;\n\n\t// epsilon * 2 division applied in uCurlSpeed to save calculations\n\tfloat curl = ( noiseY - noiseZ ) * uCurlSpeed;\n\n\t// Write\n\n\tfloat wind =  uWind.x + simplex3D( uTime, uv.x * 0.1, uv.y * 0.1 );\n\tfloat noise = mix( wind, curl, uCurlStrength.x ) + uWind.x;\n\tx = mix( x, x + noise, uDelta );\n\tx = loopValue( x, uBounds.x, uBounds.z );\n\n\tgl_FragColor = packFloat( x );\n\n}\n"),Sr="\nuniform sampler2D GPGPU_x;\nuniform sampler2D GPGPU_y;\nuniform sampler2D GPGPU_z;\nuniform float uCurlScale;\nuniform float uCurlSpeed;\nuniform float uDelta;\nuniform float uEpsilon;\nuniform vec3 uBounds;\nuniform vec3 uCurlStrength;\nuniform vec3 uWind;\n".concat(se.glsl,"\n").concat(ke,"\n").concat(Se,"\n\nvoid main() {\n\t\n\t// Read\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\tfloat x = unpackFloat( texture2D( GPGPU_x, uv ) );\n\tfloat y = unpackFloat( texture2D( GPGPU_y, uv ) );\n\tfloat z = unpackFloat( texture2D( GPGPU_z, uv ) );\n\n\t// Curl\n\n\tfloat scaledX = x * uCurlScale;\n\tfloat scaledY = y * uCurlScale;\n\tfloat scaledZ = z * uCurlScale;\n\n\tfloat noiseZ1 = simplex3D( scaledX, scaledY, scaledZ + uEpsilon );\n\tfloat noiseZ2 = simplex3D( scaledX, scaledY, scaledZ - uEpsilon );\n\tfloat noiseZ = noiseZ1 - noiseZ2;\n\n\tfloat noiseX1 = simplex3D( scaledX + uEpsilon, scaledY, scaledZ );\n\tfloat noiseX2 = simplex3D( scaledX - uEpsilon, scaledY, scaledZ );\n\tfloat noiseX = noiseX1 - noiseX2;\n\n\tfloat curl = ( noiseZ - noiseX ) * uCurlSpeed;\n\n\t// Write\n\n\tfloat noise = mix( uWind.y, curl, uCurlStrength.y ) + uWind.y;\n\ty = mix( y, y + noise, uDelta );\n\ty = loopValue( y, uBounds.x, uBounds.z );\n\n\tgl_FragColor = packFloat( y );\n\n}\n"),jr="\nuniform sampler2D GPGPU_x;\nuniform sampler2D GPGPU_y;\nuniform sampler2D GPGPU_z;\nuniform float uCurlScale;\nuniform float uCurlSpeed;\nuniform float uDelta;\nuniform float uEpsilon;\nuniform vec3 uBounds;\nuniform vec3 uCurlStrength;\nuniform vec3 uWind;\n".concat(se.glsl,"\n").concat(ke,"\n").concat(Se,"\n\nvoid main() {\n\t\n\t// Read\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\tfloat x = unpackFloat( texture2D( GPGPU_x, uv ) );\n\tfloat y = unpackFloat( texture2D( GPGPU_y, uv ) );\n\tfloat z = unpackFloat( texture2D( GPGPU_z, uv ) );\n\n\t// Curl\n\n\tfloat scaledX = x * uCurlScale;\n\tfloat scaledY = y * uCurlScale;\n\tfloat scaledZ = z * uCurlScale;\n\n\tfloat noiseX1 = simplex3D( scaledX + uEpsilon, scaledY, scaledZ );\n\tfloat noiseX2 = simplex3D( scaledX - uEpsilon, scaledY, scaledZ );\n\tfloat noiseX = noiseX1 - noiseX2;\n\n\tfloat noiseY1 = simplex3D( scaledX, scaledY + uEpsilon, scaledZ );\n\tfloat noiseY2 = simplex3D( scaledX, scaledY - uEpsilon, scaledZ );\n\tfloat noiseY = noiseY1 - noiseY2;\n\n\tfloat curl = ( noiseX - noiseY ) * uCurlSpeed;\n\n\t// Write\n\n\tfloat noise = curl * uCurlStrength.z * uWind.z;\n\tz = mix( z, z + noise, uDelta );\n\tz = clamp( z, uBounds.x, uBounds.y );\n\n\tgl_FragColor = packFloat( z );\n\n}\n"),_r={};function Tr(t){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tr(t)}function Er(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Cr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Er(Object(n),!0).forEach((function(e){Rr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Rr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ar(){return Ar="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=zr(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Ar.apply(this,arguments)}function zr(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fr(t)););return t}function Ur(t,e){return Ur=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ur(t,e)}function Br(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fr(t);if(e){var o=Fr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ir(this,n)}}function Ir(t,e){if(e&&("object"===Tr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Fr(t){return Fr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Fr(t)}_r.GPGPU_x=kr,_r.GPGPU_y=Sr,_r.GPGPU_z=jr,_r.material=je.getBase(),_r.material.vertexShader="\nattribute float aNoise;\nattribute vec2 GPGPU_target;\nuniform float uRotation;\nuniform float uTime;\nuniform sampler2D GPGPU_x;\nuniform sampler2D GPGPU_y;\nuniform sampler2D GPGPU_z;\nuniform vec3 uBounds;\nuniform vec3 uScale;\nvarying float vAltitude;\n\n".concat(je.rotateZ,"\n").concat(je.floatPack,"\n\nvoid main() {\n\n\tfloat translateX = unpackFloat( texture2D( GPGPU_x, GPGPU_target ) );\n\tfloat translateY = unpackFloat( texture2D( GPGPU_y, GPGPU_target ) );\n\tfloat translateZ = unpackFloat( texture2D( GPGPU_z, GPGPU_target ) );\n\n\tvAltitude = mix( 1.0, 0.0, ( translateY - uBounds.x ) / uBounds.z );\n\t\n\tfloat scale = mix( \n\t\tuScale.x,\n\t\tuScale.y,\n\t\tvAltitude * mix( uScale.z, 1.0, aNoise )\n\t);\n\n\tvec3 transformed = position;\n\ttransformed *= scale * rotateZ( uTime * uRotation * aNoise );\n\ttransformed += vec3( translateX, translateY, translateZ );\n\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( transformed, 1.0 );\n\n}\n"),_r.material.fragmentShader="\nuniform float opacity;\nuniform vec3 uColorLow;\nuniform vec3 uColorHigh;\nvarying float vAltitude;\n\nvoid main() {\n\n\tvec3 dynamicColor = mix( uColorHigh, uColorLow, vAltitude );\n\n\tgl_FragColor = vec4( dynamicColor, opacity );\n\n}\n";var Gr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ur(t,e)}(i,t);var e,n,r,o=Br(i);function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Mr(this,i),(t=o.call(this,{defaults:Pr,settings:e})).bounds=new Re(t.camera,t.settings.particle.near,t.settings.particle.far),t}return e=i,n=[{key:"init",value:function(){this.effects.add("bloom",new en(this.settings.bloom)),Ar(Fr(i.prototype),"init",this).call(this,Or)}},{key:"initScene",value:function(){var t=this.random,e=this.settings,n=new re.CircleGeometry(e.disc.size,e.disc.segments),r=new re.MeshBasicMaterial(e.disc.fill),o=new re.Mesh(n,r);o.position.z=e.particle.near+e.disc.offset,this.add(o);var i=new re.EdgesGeometry(n),a=new re.LineBasicMaterial(e.disc.stroke),s=new re.LineSegments(i,a);s.position.copy(o.position),this.add(s);var u=e.GPGPUTextureSize,c=u*u,l=new re.CircleGeometry(e.particle.size,3);l.rotateZ(Math.PI/2);var f=new re.EdgesGeometry(l),h=new Float32Array(c),p=new Float32Array(c),y=new Float32Array(c),d=new Float32Array(2*c),m=new Float32Array(c);this.bounds.update();for(var v=this.bounds,b=v.left,g=v.right,w=v.bottom,x=v.top,O=v.near,P=v.far,k=0,S=0;k<c;k++)h[k]=t.number(b,g),p[k]=t.number(w,x),y[k]=t.number(O,P),d[S++]=k%u/u,d[S++]=~~(k/u)/u,m[k]=t.noise();var j=new re.InstancedBufferGeometry;j.instanceCount=c,j.setAttribute("position",(new re.Float32BufferAttribute).copy(f.attributes.position)),j.setAttribute("GPGPU_target",new re.InstancedBufferAttribute(d,2)),j.setAttribute("aNoise",new re.InstancedBufferAttribute(m,1)),this.particleCountMax=c,this.particleCountMin=Math.round(.1*c),this.initUniforms(h,p,y);var _=new re.ShaderMaterial(_r.material),T=new re.LineSegments(j,_);T.frustumCulled=!1,this.particles=T,this.add(T),this.updateInstanceCount(),l.dispose(),f.dispose()}},{key:"initUniforms",value:function(t,e,n){var r=this.settings,o=r.curl,i=o.epsilon,a=o.speed,s=o.scale,u=o.strength;this.curlEpsilon=new re.Uniform(i),this.curlScale=new re.Uniform(s),this.curlSpeed=new re.Uniform(a/(2*i)),this.curlStrength=new re.Uniform(new re.Vector3(u.x,u.y,u.z)),this.delta=new re.Uniform(0),this.time=new re.Uniform(0),this.wind=new re.Uniform(new re.Vector3);var c={uEpsilon:this.curlEpsilon,uCurlScale:this.curlScale,uCurlSpeed:this.curlSpeed,uCurlStrength:this.curlStrength,uDelta:this.delta,uTime:this.time,uWind:this.wind},l=new de(this.particleCountMax);this.gpgpu=l,l.addVariable("x",{data:t,shader:_r.GPGPU_x,uniforms:Cr({uBounds:{value:this.bounds.x}},c)}),l.addVariable("y",{data:e,shader:_r.GPGPU_y,uniforms:Cr({uBounds:{value:this.bounds.y}},c)}),l.addVariable("z",{data:n,shader:_r.GPGPU_z,uniforms:Cr({uBounds:{value:this.bounds.z}},c)}),l.assign("x","y"),l.assign("x","z"),l.assign("y","x"),l.assign("y","z"),l.assign("z","x"),l.assign("z","y");var f=new re.Color(r.colorLow),h=new re.Color(r.colorHigh);_r.material.uniforms={opacity:new re.Uniform(r.opacity),uBounds:new re.Uniform(this.bounds.y),uColorLow:new re.Uniform(f),uColorHigh:new re.Uniform(h),uRotation:new re.Uniform(r.rotation),uScale:new re.Uniform(new re.Vector3(r.scale.top,r.scale.bottom,r.scale.gradient)),uTime:this.time,GPGPU_x:l.x,GPGPU_y:l.y,GPGPU_z:l.z}}},{key:"updateInstanceCount",value:function(){var t=Math.floor(re.MathUtils.clamp(this.settings.particle.count*this.camera.aspect,this.particleCountMin,this.particleCountMax));this.particles.geometry.instanceCount=t}},{key:"resize",value:function(t,e,n){Ar(Fr(i.prototype),"resize",this).call(this,t,e,n),this.particles&&(this.bounds.update(),this.updateInstanceCount())}},{key:"tick",value:function(t){var e=t*this.settings.speed;this.delta.value=e,this.time.value+=e*this.settings.timeFactor,this.gpgpu.tick(),Ar(Fr(i.prototype),"tick",this).call(this,t)}}],n&&Dr(e.prototype,n),r&&Dr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(dr),Xr=.05,Lr={name:"Blockflow",tile:{countX:40,countZ:40,width:.3,height:.1,depth:.3,margin:{x:Xr,y:0,z:Xr}},border:.875,background:{color1:38323,color2:39270},colorLow:51414,colorHigh:13362688,bloom:{strength:.2,radius:.7,threshold:.5},camera:{start:{x:10,y:5,z:10}},cameraRig:{bounds:{x:8,y:25,z:0},speed:75e-5},cursorProjector:{horizontal:!0,cursorSize:.5,lerp:.007,multiplier:1.5},lerpSpeed:7e-4,speed:{min:2.5,max:3.5,value:3},amplitude:{min:150,max:250,value:200},scale:{min:.2,max:.8,value:.5},thickness:{min:.5,max:1.5,value:1},turbulence:{min:.2,max:1.5,value:1},opacity:{min:.4,max:.6,value:.5}};function Yr(t){return Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yr(t)}function Vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nr(){return Nr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Hr(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Nr.apply(this,arguments)}function Hr(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qr(t)););return t}function Zr(t,e){return Zr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Zr(t,e)}function Wr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=qr(t);if(e){var o=qr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Qr(this,n)}}function Qr(t,e){if(e&&("object"===Yr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function qr(t){return qr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},qr(t)}var $r=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zr(t,e)}(i,t);var e,n,r,o=Wr(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).amplitude=.5,e.intensity=.5;var n=e.sketch.settings.cursorProjector.multiplier,r=.5*t.width*n,a=.5*t.depth*n;return e.projector.bounds={x:{min:-r,max:r},z:{min:-a,max:a}},e}return e=i,(n=[{key:"tick",value:function(t){if(Nr(qr(i.prototype),"tick",this).call(this,t),this.trackerEnabled){var e=this.sketch,n=this.tracker,r=this.projector,o=e.settings,a=ar.clamp,s=ar.lerp;r.set(n.polarizeX,n.reversePolarizeY),r.tick(t),r.cursor.position.x=a(r.cursor.position.x,r.bounds.x.min,r.bounds.x.max),r.cursor.position.z=a(r.cursor.position.z,r.bounds.z.min,r.bounds.z.max);var u=a(o.lerpSpeed*t,0,1);this.amplitude=s(this.amplitude,n.reverseY,u),e.amplitude.value=s(o.amplitude.min,o.amplitude.max,this.amplitude),e.opacity.value=s(o.opacity.max,o.opacity.min,this.amplitude),o.speed.value=s(o.speed.min,o.speed.max,this.amplitude),e.setSpeed(),this.intensity=s(this.intensity,n.x,u),e.scale.value=s(o.scale.min,o.scale.max,this.intensity),e.thickness.value=s(o.thickness.max,o.thickness.min,this.intensity),e.turbulence.value=s(o.turbulence.min,o.turbulence.max,this.intensity)}}}])&&Vr(e.prototype,n),r&&Vr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(ar),Kr=je.getBase();function Jr(t){return Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jr(t)}function to(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function no(){return no="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=ro(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},no.apply(this,arguments)}function ro(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=so(t)););return t}function oo(t,e){return oo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},oo(t,e)}function io(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=so(t);if(e){var o=so(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ao(this,n)}}function ao(t,e){if(e&&("object"===Jr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function so(t){return so=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},so(t)}Kr.vertexShader="\nattribute vec3 aOffset;\nuniform float uAmplitude;\nuniform float uScale;\nuniform float uTime;\nuniform float uThickness;\nuniform float uTurbulence;\nuniform vec3 uCursor;\nvarying float vHeight;\n\n".concat(je.simplex3D,"\n\nvoid main() {\n\n\tvec3 transformed = position + aOffset;\n\n\tfloat distanceToCursor = length( uCursor - aOffset );\n\tfloat force = - 1.0 / ( 1.618 + sqrt( distanceToCursor ) );\n\n\tfloat waves = simplex3D(\n\t\tuScale * 0.02 * aOffset.x, \n\t\tdistanceToCursor * 0.1 - uTime,\n\t\tuScale * 0.02 * aOffset.z\n\t) * force * 8.0;\n\n\tfloat turbulence = simplex3D(\n\t\taOffset.x * uScale,\n\t\taOffset.z * uScale,\n\t\tuTime\n\t) * uTurbulence;\n\n\tfloat noise = abs( uThickness + waves + turbulence );\n\n\ttransformed.y *= position.y * noise * uAmplitude;\n\n\tvHeight = transformed.y;\n\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( transformed, 1.0 );\n\n}\n"),Kr.fragmentShader="\nuniform float opacity;\nuniform vec3 uColorLow;\nuniform vec3 uColorHigh;\nvarying float vHeight;\n\nvoid main() {\n\n\tvec3 dynamicColor = mix( uColorLow, uColorHigh, vHeight );\n\n\tgl_FragColor = vec4( dynamicColor, opacity );\n\n}\n";var uo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oo(t,e)}(i,t);var e,n,r,o=io(i);function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return to(this,i),(t=o.call(this,{defaults:Lr,settings:e})).setSpeed(),t}return e=i,n=[{key:"init",value:function(){this.effects.add("bloom",new en(this.settings.bloom)),no(so(i.prototype),"init",this).call(this,$r),this.cursor.value=this.controls.cursor.position}},{key:"initScene",value:function(){var t=this.settings,e=t.tile,n=e.countX*e.countZ,r=e.width+e.margin.x,o=e.depth+e.margin.z;this.width=r*e.countX-e.margin.x,this.depth=o*e.countZ-e.margin.z;var i=-(this.width-e.width)/2,a=.5*-e.height,s=-(this.depth-e.depth)/2;this.debug&&console.log({instances:n});for(var u=new re.BoxGeometry(e.width,e.height,e.depth),c=new re.EdgesGeometry(u),l=new Float32Array(c.attributes.position.array),f=3*n,h=new Float32Array(f),p=0,y=0,d=0;d<f;d+=3)h[d]=i+p*r,h[d+1]=a,h[d+2]=s+y*o,0==(p=(p+1)%e.countX)&&y++;var m=new re.InstancedBufferGeometry;m.instanceCount=n,m.setAttribute("position",new re.Float32BufferAttribute(l,3)),m.setAttribute("aOffset",new re.InstancedBufferAttribute(h,3)),this.cursor=new re.Uniform(null),this.amplitude=new re.Uniform(t.amplitude.value),this.scale=new re.Uniform(t.scale.value),this.thickness=new re.Uniform(t.thickness.value),this.turbulence=new re.Uniform(t.turbulence.value),this.time=new re.Uniform(0),this.opacity=new re.Uniform(t.opacity.value),this.colorLow=new re.Uniform(new re.Color(t.colorLow)),this.colorHigh=new re.Uniform(new re.Color(t.colorHigh)),Kr.uniforms={uCursor:this.cursor,uAmplitude:this.amplitude,uScale:this.scale,uThickness:this.thickness,uTurbulence:this.turbulence,uTime:this.time,opacity:this.opacity,uColorLow:this.colorLow,uColorHigh:this.colorHigh};var v=new re.ShaderMaterial(Kr);this.grid=new re.LineSegments(m,v),this.add(this.grid);var b=new re.PlaneGeometry(this.width+t.border,this.depth+t.border);b.rotateX(-Math.PI/2),this.border=new re.LineSegments(new re.EdgesGeometry(b),v),this.add(this.border),u.dispose(),c.dispose(),b.dispose()}},{key:"tick",value:function(t){this.time.value+=t*this.speed,no(so(i.prototype),"tick",this).call(this,t)}},{key:"setSpeed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.settings.speed.value,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-4;this.speed=t*e}}],n&&eo(e.prototype,n),r&&eo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(dr);function co(t){return co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},co(t)}function lo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fo(t,e){return fo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},fo(t,e)}function ho(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yo(t);if(e){var o=yo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return po(this,n)}}function po(t,e){if(e&&("object"===co(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function yo(t){return yo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},yo(t)}var mo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fo(t,e)}(i,t);var e,n,r,o=ho(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).intensity=0,e}return e=i,(n=[{key:"tick",value:function(t){var e=this.sketch,n=this.tracker,r=e.settings,o=ar.lerp;this.projector.set(n.polarizeX,n.reversePolarizeY),this.projector.tick(t);var i=e.camera.aspect>1?n.centerX:n.centerY;this.intensity=o(this.intensity,i,r.lerpSpeed),e.depth.value=o(r.depth.max,r.depth.min,this.intensity),e.noiseScale.value=o(r.noiseScale.min,r.noiseScale.max,Math.pow(2*this.intensity,2))}}])&&lo(e.prototype,n),r&&lo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(ar),vo={name:"Backgrid",background:{color1:526345,color2:2105123},colorInactive:2236966,colorActive:3817541,dot:{size:.038,margin:.14,rows:128},deltaScale:.002,timeScale:2e-4,camera:{start:{x:0,y:0,z:0}},cursorProjector:{lerp:.007},lerpSpeed:.048,depth:{min:.05,max:.15},noiseScale:{min:.001,max:4}},bo={};function go(t){return go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},go(t)}function wo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oo(){return Oo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Po(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Oo.apply(this,arguments)}function Po(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_o(t)););return t}function ko(t,e){return ko=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ko(t,e)}function So(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_o(t);if(e){var o=_o(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jo(this,n)}}function jo(t,e){if(e&&("object"===go(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _o(t){return _o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_o(t)}bo.GPGPU_intensity="\nuniform sampler2D GPGPU_intensity;\nuniform sampler2D GPGPU_offsetX;\nuniform sampler2D GPGPU_offsetY;\nuniform vec3 uCursor;\nuniform float uDelta;\nuniform float uNoiseScale;\nuniform float uTime;\n\n".concat(je.floatPack,"\n").concat(je.simplex3D,"\n\n\tvoid main() {\n\t\n\t// Read\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\tfloat intensity = unpackFloat( texture2D( GPGPU_intensity, uv ) );\n\n\tfloat offsetX = unpackFloat( texture2D( GPGPU_offsetX, uv ) );\n\tfloat offsetY = unpackFloat( texture2D( GPGPU_offsetY, uv ) );\n\tvec3 offset = vec3( offsetX, offsetY, 0.0 );\n\n\t// Modify\n\n\tfloat simplex = simplex3D( \n\t\toffsetX * uNoiseScale, \n\t\toffsetY * uNoiseScale, \n\t\tuTime\n\t);\n\t\n\tfloat waves = ( simplex + 1.0 ) * 5.0;\n\t\n\tfloat cursorReaction = ( 0.5 + abs( simplex ) ) * clamp(\n\t\t7.0 / ( length( uCursor - offset ) + 0.1 ),\n\t\t0.0,\n\t\t10.0\n\t);\n\n\tfloat targetIntensity = clamp( \n\t\t( clamp( waves + cursorReaction, 0.0, 20.0 ) - 10.0 ) * 0.2,\n\t\t-1.0,\n\t\t1.0\n\t);\n\n\tintensity = mix( intensity, targetIntensity, uDelta );\n\n\t// Write\n\n\tgl_FragColor = packFloat( intensity );\n\n}\n"),bo.cores=je.getBase(),bo.cores.vertexShader="\nattribute float aOffsetX;\nattribute float aOffsetY;\nattribute vec2 GPGPU_target;\nuniform sampler2D GPGPU_intensity;\nuniform float uDepth;\nvarying float vIntensity;\n".concat(je.floatPack,"\n\nvoid main() {\n\n\tfloat intensity = unpackFloat( texture2D( GPGPU_intensity, GPGPU_target ) );\n\tvIntensity = ( intensity + 1.0 ) / 2.0;\n\n\tvec3 transformed = position;\n\ttransformed *= vIntensity;\n\ttransformed += vec3( aOffsetX, aOffsetY, ( intensity - 1.0) * uDepth );\n\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( transformed, 1.0 );\n\n}\n"),bo.cores.fragmentShader="\nuniform vec3 uColorActive;\nuniform vec3 uColorInactive;\nvarying float vIntensity;\n\nvoid main() {\n\n\tvec3 dynamicColor = mix( uColorInactive, uColorActive, vIntensity );\n\n\tgl_FragColor = vec4( dynamicColor, 1.0 );\n\n}\n",bo.shells=je.getBase(),bo.shells.vertexShader="\nattribute float aOffsetX;\nattribute float aOffsetY;\nattribute vec2 GPGPU_target;\nuniform sampler2D GPGPU_intensity;\nuniform float uDepth;\nvarying float vIntensity;\n".concat(je.floatPack,"\n\nvoid main() {\n\n\tfloat intensity = unpackFloat( texture2D( GPGPU_intensity, GPGPU_target ) );\n\tvIntensity = ( intensity + 1.0 ) / 2.0;\n\n\tvec3 transformed = position;\n\ttransformed *= vIntensity;\n\ttransformed += vec3( aOffsetX, aOffsetY, vIntensity * uDepth );\n\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( transformed, 1.0 );\n\n}\n"),bo.shells.fragmentShader="\nuniform vec3 uColorActive;\nuniform vec3 uColorInactive;\nvarying float vIntensity;\n\nvoid main() {\n\n\tvec3 dynamicColor = mix( uColorInactive, uColorActive, vIntensity );\n\n\tgl_FragColor = vec4( dynamicColor, 1.0 );\n\n}\n";var To=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ko(t,e)}(i,t);var e,n,r,o=So(i);function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return wo(this,i),(t=o.call(this,{defaults:vo,settings:e})).offset=0,t}return e=i,n=[{key:"init",value:function(){Oo(_o(i.prototype),"init",this).call(this,mo),this.cursor.value=this.controls.cursor.position}},{key:"initScene",value:function(){var t=this.settings,e=new re.Group;this.add(e);for(var n=t.dot.rows,r=n*n,o=t.dot.size,i=o+t.dot.margin,a=i*n,s=(i-a)/2,u=-(i-a)/2,c=new Float32Array(r),l=new Float32Array(r),f=new Float32Array(2*r),h=0,p=0,y=0;y<n;y++)for(var d=0;d<n;d++){var m=s+d*i,v=u-y*i;c[h]=m,l[h]=v,f[p++]=h%n/n,f[p++]=~~(h/n)/n,h++}this.dotCount=r,this.tileSize=i,this.totalSize=a,this.initUniforms(c,l);var b=new re.InstancedBufferAttribute(c,1),g=new re.InstancedBufferAttribute(l,1),w=new re.InstancedBufferAttribute(f,2);function x(t){t.setAttribute("aOffsetX",b),t.setAttribute("aOffsetY",g),t.setAttribute("GPGPU_target",w)}var O=new re.PlaneGeometry(o,o),P=new re.InstancedBufferGeometry;P.instanceCount=r,P.setAttribute("position",(new re.Float32BufferAttribute).copy(O.attributes.position)),P.setIndex((new re.Uint16BufferAttribute).copy(O.index)),x(P);var k=new re.ShaderMaterial(bo.cores),S=new re.Mesh(P,k);e.add(S);var j=new re.EdgesGeometry(O),_=new re.InstancedBufferGeometry;_.instanceCount=r,_.setAttribute("position",(new re.Float32BufferAttribute).copy(j.attributes.position)),x(_);var T=new re.ShaderMaterial(bo.shells),E=new re.LineSegments(_,T);e.add(E),this.container=e,this.cores=S,this.shells=E,O.dispose(),j.dispose()}},{key:"initUniforms",value:function(t,e){var n=this.settings;this.colorActive=new re.Color(n.colorActive),this.colorInactive=new re.Color(n.colorInactive),this.cursor=new re.Uniform(null),this.time=new re.Uniform(0),this.delta=new re.Uniform(0),this.depth=new re.Uniform(n.depth.min),this.noiseScale=new re.Uniform(n.noiseScale.max);var r=new de(this.dotCount);r.addConstant("offsetX",t),r.addConstant("offsetY",e),r.addVariable("intensity",{shader:bo.GPGPU_intensity,uniforms:{GPGPU_offsetX:r.offsetX,GPGPU_offsetY:r.offsetY,uCursor:this.cursor,uDelta:this.delta,uNoiseScale:this.noiseScale,uTime:this.time}}),this.gpgpu=r;var o={GPGPU_intensity:r.intensity,uColorActive:new re.Uniform(this.colorActive),uColorInactive:new re.Uniform(this.colorInactive),uDepth:this.depth};bo.cores.uniforms=o,bo.shells.uniforms=o}},{key:"resize",value:function(t,e,n){Oo(_o(i.prototype),"resize",this).call(this,t,e,n);var r=Math.abs(1-this.camera.aspect);this.camera.position.z=Math.max(8-r,1)}},{key:"tick",value:function(t){this.delta.value=t*this.settings.deltaScale,this.time.value+=t*this.settings.timeScale,this.gpgpu.tick(),this.container.position.x=this.offset%this.tileSize,Oo(_o(i.prototype),"tick",this).call(this,t)}}],n&&xo(e.prototype,n),r&&xo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(dr);function Eo(t){return Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eo(t)}function Co(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ro(t,e){return Ro=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ro(t,e)}function Mo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ao(t);if(e){var o=Ao(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Do(this,n)}}function Do(t,e){if(e&&("object"===Eo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ao(t){return Ao=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ao(t)}var zo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ro(t,e)}(i,t);var e,n,r,o=Mo(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).amplitude=.5,e.intensity=.5,e}return e=i,(n=[{key:"initTracker",value:function(){this.tracker=new Kn({margin:.2}),this.trackerEnabled=!0}},{key:"tick",value:function(t){var e=ar.clamp,n=ar.lerp,r=this.sketch,o=this.tracker,i=r.settings,a=e(i.lerpSpeed*t,0,1);this.cameraRigEnabled&&this.cameraRig.update(o.reversePolarizeX,o.y).tick(t);var s=o.x;this.amplitude=n(this.amplitude,s,a);var u=r.noiseScale.value;u.x=n(i.noiseScaleX.min,i.noiseScaleX.max,this.amplitude),u.y=n(i.noiseScaleY.min,i.noiseScaleY.max,this.amplitude),r.amp.value=n(i.amp.min,i.amp.max,this.amplitude);var c=o.reverseY;this.intensity=n(this.intensity,c,a),r.opacity.value=n(i.opacity.min,i.opacity.max,this.intensity),i.speed.value=n(i.speed.min,i.speed.max,this.intensity)}}])&&Co(e.prototype,n),r&&Co(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(ar),Uo={name:"Navscan",background:{color1:16015,color2:6815877},grid:{color:16734254,opacity:.8,z:10},tiles:{x:400,z:200,width:.4,depth:.4},camera:{start:{x:0,y:0,z:5},lookAt:{x:0,y:0,z:-5},intro:{x:0,y:-5,z:5}},cameraRig:{bounds:{x:5,y:5,z:0},speed:.0012},bloom:{strength:.8,radius:.8,threshold:.25},lerpSpeed:7e-4,noiseScaleX:{min:.01,max:.25},noiseScaleY:{min:0,max:.1},amp:{min:1,max:2.5},opacity:{min:.4,max:.8},speed:{min:.004,max:.012,value:.01}},Bo=je.getBase();function Io(t){return Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Io(t)}function Fo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Go(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xo(){return Xo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Lo(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Xo.apply(this,arguments)}function Lo(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ho(t)););return t}function Yo(t,e){return Yo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Yo(t,e)}function Vo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ho(t);if(e){var o=Ho(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return No(this,n)}}function No(t,e){if(e&&("object"===Io(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ho(t){return Ho=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ho(t)}Bo.vertexShader="\nuniform float uAmp;\nuniform float uDistance;\nuniform vec3 uNoiseScale;\n\n".concat(je.simplex3D,"\n\nvoid main() {\n\n\tvec3 transformed = position;\n\n\t// Z\n\ttransformed.z += mod( uDistance, 0.4 );\n\n\t// Y\n\tfloat x = position.x;\n\tfloat z = uDistance - transformed.z;\n\tfloat noise = simplex3D( \n\t\tx * uNoiseScale.x,\n\t\tmod( x, 2.0 ) *uNoiseScale.y,\n\t\tz * uNoiseScale.z\n\t);\n\n\tfloat largeNoise = uAmp * (\n\t\tsimplex3D( x * 0.03, z * 0.03, uNoiseScale.x ) * 0.7 - 1.0\n\t);\n\n\ttransformed.y = uAmp * ( clamp( noise * uAmp, -0.3, 0.3 ) + largeNoise );\n\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( transformed, 1.0 );\n\n}\n"),Bo.fragmentShader="\nuniform vec3 color;\nuniform float opacity;\n\nvoid main() {\n\n\tgl_FragColor = vec4( color, opacity );\n\n}\n";var Zo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yo(t,e)}(i,t);var e,n,r,o=Vo(i);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Fo(this,i),o.call(this,{defaults:Uo,settings:t})}return e=i,(n=[{key:"init",value:function(){this.effects.add("bloom",new en(this.settings.bloom)),Xo(Ho(i.prototype),"init",this).call(this,zo)}},{key:"initScene",value:function(){var t=this.settings,e=-t.tiles.x*t.tiles.width/2,n=-t.tiles.z*t.tiles.depth,r=t.tiles.x+1,o=t.tiles.z+1,i=t.tiles.x*t.tiles.z,a=r*o,s=8*i;this.debug&&console.log({points:a,tiles:i});for(var u=new Float32Array(3*s),c=new Float32Array(a),l=new Float32Array(a),f=0,h=0,p=0,y=0,d=0;d<a;d++)c[f++]=e+t.tiles.width*p,l[h++]=n+t.tiles.depth*y,0==(p=(p+1)%r)&&y++;var m,v,b,g,w=0,x=0,O=0;p=0,y=0;for(var P=function(t){u[w++]=c[t],u[w++]=0,u[w++]=l[t]},k=function(t,e){P(t),P(e)},S=0;S<i;S++)g=(b=S+r+O)+1,k(m=S+O,v=m+1),k(v,g),k(g,b),k(b,m),0==(x=(x+1)%t.tiles.x)&&O++;var j=new re.BufferGeometry;j.setAttribute("position",new re.Float32BufferAttribute(u,3)),this.amp=new re.Uniform(2),this.distance=new re.Uniform(0),this.noiseScale=new re.Uniform(new re.Vector3(.1,.03,.07)),this.color=new re.Uniform(new re.Color(t.grid.color)),this.opacity=new re.Uniform(t.grid.opacity),Bo.uniforms={color:this.color,opacity:this.opacity,uAmp:this.amp,uDistance:this.distance,uNoiseScale:this.noiseScale};var _=new re.ShaderMaterial(Bo),T=new re.LineSegments(j,_);T.position.set(0,0,t.grid.z),this.add(T),this.grid=T}},{key:"tick",value:function(t){this.distance.value+=this.settings.speed.value*t,Xo(Ho(i.prototype),"tick",this).call(this,t)}}])&&Go(e.prototype,n),r&&Go(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(dr);function Wo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Qo=.5*(Math.sqrt(3)-1),qo=(3-Math.sqrt(3))/6,$o=1/6,Ko=(Math.sqrt(5)-1)/4,Jo=(5-Math.sqrt(5))/20,ti=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),ei=new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]);var ni=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.p=function(t){for(var e=new Uint8Array(256),n=0;n<256;n++)e[n]=n;for(var r=0;r<255;r++){var o=r+~~(t.random()*(256-r)),i=e[r];e[r]=e[o],e[o]=i}return e}(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var n=0;n<512;n++)this.perm[n]=this.p[255&n],this.permMod12[n]=this.perm[n]%12}var e,n,r;return e=t,(n=[{key:"noise2D",value:function(t,e){var n,r,o=this.permMod12,i=this.perm,a=0,s=0,u=0,c=(t+e)*Qo,l=Math.floor(t+c),f=Math.floor(e+c),h=(l+f)*qo,p=t-(l-h),y=e-(f-h);p>y?(n=1,r=0):(n=0,r=1);var d=p-n+qo,m=y-r+qo,v=p-1+2*qo,b=y-1+2*qo,g=255&l,w=255&f,x=.5-p*p-y*y;if(x>=0){var O=3*o[g+i[w]];a=(x*=x)*x*(ti[O]*p+ti[O+1]*y)}var P=.5-d*d-m*m;if(P>=0){var k=3*o[g+n+i[w+r]];s=(P*=P)*P*(ti[k]*d+ti[k+1]*m)}var S=.5-v*v-b*b;if(S>=0){var j=3*o[g+1+i[w+1]];u=(S*=S)*S*(ti[j]*v+ti[j+1]*b)}return 70*(a+s+u)}},{key:"noise3D",value:function(t,e,n){var r,o,i,a,s,u,c,l,f,h,p=this.permMod12,y=this.perm,d=.3333333333333333*(t+e+n),m=Math.floor(t+d),v=Math.floor(e+d),b=Math.floor(n+d),g=(m+v+b)*$o,w=t-(m-g),x=e-(v-g),O=n-(b-g);w>=x?x>=O?(s=1,u=0,c=0,l=1,f=1,h=0):w>=O?(s=1,u=0,c=0,l=1,f=0,h=1):(s=0,u=0,c=1,l=1,f=0,h=1):x<O?(s=0,u=0,c=1,l=0,f=1,h=1):w<O?(s=0,u=1,c=0,l=0,f=1,h=1):(s=0,u=1,c=0,l=1,f=1,h=0);var P=w-s+$o,k=x-u+$o,S=O-c+$o,j=w-l+2*$o,_=x-f+2*$o,T=O-h+2*$o,E=w-1+.5,C=x-1+.5,R=O-1+.5,M=255&m,D=255&v,A=255&b,z=.6-w*w-x*x-O*O;if(z<0)r=0;else{var U=3*p[M+y[D+y[A]]];r=(z*=z)*z*(ti[U]*w+ti[U+1]*x+ti[U+2]*O)}var B=.6-P*P-k*k-S*S;if(B<0)o=0;else{var I=3*p[M+s+y[D+u+y[A+c]]];o=(B*=B)*B*(ti[I]*P+ti[I+1]*k+ti[I+2]*S)}var F=.6-j*j-_*_-T*T;if(F<0)i=0;else{var G=3*p[M+l+y[D+f+y[A+h]]];i=(F*=F)*F*(ti[G]*j+ti[G+1]*_+ti[G+2]*T)}var X=.6-E*E-C*C-R*R;if(X<0)a=0;else{var L=3*p[M+1+y[D+1+y[A+1]]];a=(X*=X)*X*(ti[L]*E+ti[L+1]*C+ti[L+2]*R)}return 32*(r+o+i+a)}},{key:"noise4D",value:function(t,e,n,r){var o,i,a,s,u,c=this.perm,l=(t+e+n+r)*Ko,f=Math.floor(t+l),h=Math.floor(e+l),p=Math.floor(n+l),y=Math.floor(r+l),d=(f+h+p+y)*Jo,m=t-(f-d),v=e-(h-d),b=n-(p-d),g=r-(y-d),w=0,x=0,O=0,P=0;m>v?w++:x++,m>b?w++:O++,m>g?w++:P++,v>b?x++:O++,v>g?x++:P++,b>g?O++:P++;var k=w>=3?1:0,S=x>=3?1:0,j=O>=3?1:0,_=P>=3?1:0,T=w>=2?1:0,E=x>=2?1:0,C=O>=2?1:0,R=P>=2?1:0,M=w>=1?1:0,D=x>=1?1:0,A=O>=1?1:0,z=P>=1?1:0,U=m-k+Jo,B=v-S+Jo,I=b-j+Jo,F=g-_+Jo,G=m-T+2*Jo,X=v-E+2*Jo,L=b-C+2*Jo,Y=g-R+2*Jo,V=m-M+3*Jo,N=v-D+3*Jo,H=b-A+3*Jo,Z=g-z+3*Jo,W=m-1+4*Jo,Q=v-1+4*Jo,q=b-1+4*Jo,$=g-1+4*Jo,K=255&f,J=255&h,tt=255&p,et=255&y,nt=.6-m*m-v*v-b*b-g*g;if(nt<0)o=0;else{var rt=c[K+c[J+c[tt+c[et]]]]%32*4;o=(nt*=nt)*nt*(ei[rt]*m+ei[rt+1]*v+ei[rt+2]*b+ei[rt+3]*g)}var ot=.6-U*U-B*B-I*I-F*F;if(ot<0)i=0;else{var it=c[K+k+c[J+S+c[tt+j+c[et+_]]]]%32*4;i=(ot*=ot)*ot*(ei[it]*U+ei[it+1]*B+ei[it+2]*I+ei[it+3]*F)}var at=.6-G*G-X*X-L*L-Y*Y;if(at<0)a=0;else{var st=c[K+T+c[J+E+c[tt+C+c[et+R]]]]%32*4;a=(at*=at)*at*(ei[st]*G+ei[st+1]*X+ei[st+2]*L+ei[st+3]*Y)}var ut=.6-V*V-N*N-H*H-Z*Z;if(ut<0)s=0;else{var ct=c[K+M+c[J+D+c[tt+A+c[et+z]]]]%32*4;s=(ut*=ut)*ut*(ei[ct]*V+ei[ct+1]*N+ei[ct+2]*H+ei[ct+3]*Z)}var lt=.6-W*W-Q*Q-q*q-$*$;if(lt<0)u=0;else{var ft=c[K+1+c[J+1+c[tt+1+c[et+1]]]]%32*4;u=(lt*=lt)*lt*(ei[ft]*W+ei[ft+1]*Q+ei[ft+2]*q+ei[ft+3]*$)}return 27*(o+i+a+s+u)}}])&&Wo(e.prototype,n),r&&Wo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ri(t){return ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ri(t)}function oi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ii(){return ii="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=ai(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},ii.apply(this,arguments)}function ai(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=li(t)););return t}function si(t,e){return si=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},si(t,e)}function ui(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=li(t);if(e){var o=li(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ci(this,n)}}function ci(t,e){if(e&&("object"===ri(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function li(t){return li=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},li(t)}var fi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&si(t,e)}(i,t);var e,n,r,o=ui(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).intensity=1,e.cursorPrevious=new re.Vector2(.5,.5),e.cursorCurrent=new re.Vector2,e}return e=i,(n=[{key:"tick",value:function(t){if(ii(li(i.prototype),"tick",this).call(this,t),this.trackerEnabled){var e=ar.clamp,n=ar.lerp,r=this.sketch,o=this.tracker,a=this.projector,s=r.settings,u=e(s.lerpSpeed*t,0,1),c=o.centerX;this.intensity=n(this.intensity,c,u),r.mesh.material.opacity=n(s.opacity.min,s.opacity.max,this.intensity),r.speed=n(s.speed.min,s.speed.max,this.intensity);var l=n(s.minCount,r.maxCount,o.centerY);r.mesh.count=n(r.mesh.count,l,u);var f=s.targeted,h=f.delay,p=f.growth,y=f.decay;r.targeted.uniforms.opacity.value=r.mesh.material.opacity,a.set(o.polarizeX,o.reversePolarizeY),a.tick(t),this.cursorCurrent.set(o.x,o.y);var d=this.cursorCurrent.distanceTo(this.cursorPrevious);this.cursorPrevious.copy(this.cursorCurrent),r.activity=e(r.activity+d*p-y*t,0,1),r.baseDelay=Math.max(h.max-r.activity*h.max,h.min),r.delay=h.min+r.baseDelay}}}])&&oi(e.prototype,n),r&&oi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(ar),hi={name:"Rain II",random:!0,instances:700,offsetY:-5,originZ:-10,maxAngle:2*Math.PI,ratio:1.2,spread:1.5,geometry:{innerRadius:.6,outerRadius:.72,thetaSegments:6},background:{color1:2490445,color2:26065},material:{color:6467070,transparent:!0},bloom:{strength:.8,radius:.7,threshold:.33},camera:{start:{x:0,y:10,z:10}},cameraRig:{speed:8e-4,bounds:{x:3,y:10,z:0},intro:{x:0,y:4,z:4}},lerpSpeed:.001,opacity:{min:.7,max:1},speed:{min:2e-4,max:4e-4},minCount:100,instanceCount:200,cursorProjector:{horizontal:!0,cursorSize:.5,multiplier:1.5},targeted:{noise:.8,amplitude:4,growth:10,decay:.001,scale:{min:.1,max:1.2},delay:{min:.004,max:1}}},pi={};function yi(t){return yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yi(t)}function di(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vi(){return vi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=bi(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},vi.apply(this,arguments)}function bi(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Oi(t)););return t}function gi(t,e){return gi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},gi(t,e)}function wi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Oi(t);if(e){var o=Oi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xi(this,n)}}function xi(t,e){if(e&&("object"===yi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Oi(t){return Oi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Oi(t)}pi.edit=function(t){return je.editBasic(t,"\nattribute float aProgress;\nvarying float vProgress;\n","\n\tvProgress = aProgress;\n","\nvarying float vProgress;\n","\n\tdiffuseColor.a *= mod( 1.0 - vProgress, 1.0 );\n")},pi.impact=je.getBase(),pi.impact.vertexShader="\nattribute vec3 aOffset;\nattribute float aLife;\nuniform float uScaleMin;\nuniform float uScaleMax;\nvarying float vLife;\n\n".concat(je.rotateZ,"\n\nvoid main() {\n\n\tvLife = clamp( aLife, 0.0, 1.0 );\n\n\tvec3 transformed = aOffset + position * ( uScaleMin + vLife * uScaleMax );\n\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( transformed, 1.0 );\n\n}\n"),pi.impact.fragmentShader="\nuniform vec3 color;\nuniform float opacity;\nvarying float vLife;\n\nvoid main() {\n\n\tfloat dynamicOpacity = ( 1.0 - vLife ) * opacity;\n\n\tgl_FragColor = vec4( color, dynamicOpacity );\n\n}\n";var Pi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gi(t,e)}(i,t);var e,n,r,o=wi(i);function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return di(this,i),(t=o.call(this,{defaults:hi,settings:e})).y=t.settings.offsetY,t.speed=t.settings.speed.min,t.originZ=t.settings.originZ,t.simplex=new ni(t.random),t.instance=0,t.counter=0,t.baseDelay=3,t.delay=1e-5,t.noise=0,t.activity=0,t}return e=i,n=[{key:"init",value:function(){this.effects.add("bloom",new en(this.settings.bloom)),vi(Oi(i.prototype),"init",this).call(this,fi),this.controls.projector.plane.position.set(0,this.y,0),console.log(this.controls)}},{key:"initScene",value:function(){this.initRandomImpacts(),this.initTargetedImpacts()}},{key:"tick",value:function(t){if(!this.speed)return vi(Oi(i.prototype),"tick",this).call(this,t);var e=this.speed*t;this.tickRandom(e),this.tickCursor(e),vi(Oi(i.prototype),"tick",this).call(this,t)}},{key:"initRandomImpacts",value:function(){var t=this.settings.geometry,e=t.innerRadius,n=t.outerRadius,r=t.thetaSegments,o=new re.RingGeometry(e,n,r);o.rotateX(-Math.PI/2);var i=new re.MeshBasicMaterial(this.settings.material);i.onBeforeCompile=pi.edit;var a=this.settings.instances;this.mesh=new re.InstancedMesh(o,i,a),this.add(this.mesh),this.dummy=new re.Object3D;var s=new Float32Array(a);this.x=new Float32Array(a),this.z=new Float32Array(a);for(var u=0;u<a;u++){this.randomizePositionAt(u);var c=this.random.amount();this.dummy.scale.set(c,c,c),s[u]=c,this.dummy.updateMatrix(),this.mesh.setMatrixAt(u,this.dummy.matrix)}o.setAttribute("aProgress",new re.InstancedBufferAttribute(s,1)),this.mesh.instanceMatrix.setUsage(re.DynamicDrawUsage),this.mesh.count=this.maxCount}},{key:"randomizePositionAt",value:function(t){var e=this.random.number(0,this.settings.maxAngle);this.dummy.position.set(Math.cos(e)*this.random.amount()*this.width,this.y,Math.sin(e)*this.random.amount()*this.depth+this.settings.originZ),this.x[t]=this.dummy.position.x,this.z[t]=this.dummy.position.z}},{key:"updateAspect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.camera.aspect;this.maxCount=this.settings.instances,this.maxCount=t<1?Math.round(this.settings.instances*t):this.settings.instances,this.width=Re.getVisibleWidth(this.camera,this.settings.originZ)*this.settings.spread,this.depth=this.width*this.settings.ratio/t}},{key:"resize",value:function(t,e,n){vi(Oi(i.prototype),"resize",this).call(this,t,e,n),this.updateAspect()}},{key:"tickRandom",value:function(t){for(var e=this.mesh.geometry.attributes.aProgress.array,n=0;n<this.mesh.count;n++){var r=e[n]+t;r>1?(r=0,this.randomizePositionAt(n)):this.dummy.position.set(this.x[n],this.y,this.z[n]),this.dummy.scale.set(r,r,r),this.dummy.updateMatrix(),this.mesh.setMatrixAt(n,this.dummy.matrix),e[n]=r}this.mesh.instanceMatrix.needsUpdate=!0,this.mesh.geometry.attributes.aProgress.needsUpdate=!0}},{key:"initTargetedImpacts",value:function(){var t=this.settings,e=new re.CircleGeometry(t.outerRadius,6);e.rotateX(-Math.PI/2);var n=new re.EdgesGeometry(e),r=t.instanceCount,o=new re.InstancedBufferGeometry;o.instanceCount=r,o.setAttribute("position",(new re.Float32BufferAttribute).copy(n.attributes.position)),o.setAttribute("aOffset",new re.InstancedBufferAttribute(new Float32Array(3*r),3)),o.setAttribute("aLife",new re.InstancedBufferAttribute(new Float32Array(r).fill(1),1)),this.targeted={geometry:o},this.targeted.uniforms={uScaleMin:new re.Uniform(t.targeted.scale.min),uScaleMax:new re.Uniform(t.targeted.scale.max),color:new re.Uniform(new re.Color(t.material.color)),opacity:new re.Uniform(1)},pi.impact.uniforms=this.targeted.uniforms;var i=new re.ShaderMaterial(pi.impact);this.cursorImpacts=new re.LineSegments(o,i),this.cursorImpacts.position.set(0,this.y,0),this.add(this.cursorImpacts)}},{key:"generateAt",value:function(t){var e=this.random,n=this.settings.targeted,r=n.noise,o=n.amplitude,i=this.targeted.geometry.attributes,a=i.aOffset,s=i.aLife,u=e.chance(r),c=u?t.x+e.noise()*o*this.activity:t.x,l=u?t.z+e.noise()*o*this.activity:t.z,f=3*this.instance;a.array[f]=c,a.array[f+2]=l,s.array[this.instance]=0,this.instance=(this.instance+1)%this.settings.instanceCount,a.needsUpdate=!0}},{key:"tickCursor",value:function(t){if(this.counter+=t,this.counter>this.delay){var e=this.controls.cursor.position;this.generateAt(e),this.noise=this.simplex.noise3D(e.x,e.y,this.counter),this.counter=0}for(var n=0;n<this.settings.instanceCount;n++)this.targeted.geometry.attributes.aLife.array[n]+=t;this.targeted.geometry.attributes.aLife.needsUpdate=!0}}],n&&mi(e.prototype,n),r&&mi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(dr);function ki(t){return ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ki(t)}function Si(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ji(){return ji="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=_i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},ji.apply(this,arguments)}function _i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ri(t)););return t}function Ti(t,e){return Ti=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ti(t,e)}function Ei(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ri(t);if(e){var o=Ri(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ci(this,n)}}function Ci(t,e){if(e&&("object"===ki(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ri(t){return Ri=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ri(t)}var Mi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ti(t,e)}(i,t);var e,n,r,o=Ei(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t)}return e=i,(n=[{key:"initGUI",value:function(){ji(Ri(i.prototype),"initGUI",this).call(this);var t=ar.VALUE,e=this.gui,n=this.sketch,r=e.addFolder("Colors");r.addColor(n.background,"color1").name("background1"),r.addColor(n.background,"color2").name("background2"),r.addColor(n.color,t).name("particle"),r.add(n.opacity,t,0,1).name("opacity")}}])&&Si(e.prototype,n),r&&Si(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(ar),Di={name:"Cyberdark",background:{color1:"#060610",color2:"#262627"},depth:50,particle:{color:"#323739",opacity:.6,size:.04,length:5,count:6e3,bounds:{x:30,y:10},noiseScale:.2,variance:1.4},speed:{value:.004},bloom:{strength:.2,radius:1,threshold:.2},random:!0},Ai=je.getBase();function zi(t){return zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zi(t)}function Ui(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ii(){return Ii="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Fi(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Ii.apply(this,arguments)}function Fi(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yi(t)););return t}function Gi(t,e){return Gi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Gi(t,e)}function Xi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yi(t);if(e){var o=Yi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Li(this,n)}}function Li(t,e){if(e&&("object"===zi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Yi(t){return Yi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Yi(t)}Ai.vertexShader="\nattribute float aSpeed;\nattribute vec3 aOffset;\nuniform float uDepth;\nuniform float uTraveled;\nvarying float vIntensity;\n\n".concat(je.parabola,"\n\nvoid main() {\n\n\tvec3 offset = aOffset;\n\toffset.z = mod( offset.z + uTraveled * aSpeed, uDepth );\n\n\tfloat progress = offset.z / uDepth;\n\tvIntensity = pow( progress, 2.0 );\n\n\tfloat scale = mix( progress, parabola( progress, 2.0 ), 0.8 );\n\n\tvec3 transformed = position * scale + offset;\n\ttransformed.z *= aSpeed * 1.5;\n\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( transformed, 1.0 );\n\n}\n"),Ai.fragmentShader="\nuniform vec3 color;\nuniform float opacity;\nvarying float vIntensity;\n\nvoid main() {\n\n\tvec3 dynamicColor = color;\n\tfloat dynamicOpacity = opacity * vIntensity;\n\n\tgl_FragColor = vec4( dynamicColor, opacity );\n\n}\n";var Vi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gi(t,e)}(i,t);var e,n,r,o=Xi(i);function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ui(this,i),(t=o.call(this,{defaults:Di,settings:e})).simplex=new ni(t.random),t.traveled=new re.Uniform(0),t.depth=new re.Uniform(t.settings.depth),t.speed=t.settings.speed.value,t.offset=0,t}return e=i,n=[{key:"init",value:function(){Ii(Yi(i.prototype),"init",this).call(this,Mi)}},{key:"initScene",value:function(){for(var t=this.random,e=this.simplex,n=this.settings.particle,r=n.color,o=n.opacity,i=n.size,a=n.length,s=n.count,u=n.noiseScale,c=n.bounds,l=n.variance,f=new re.BoxGeometry(i,i,i*a),h=new re.EdgesGeometry(f),p=3*s,y=new Float32Array(p),d=new Float32Array(s),m=0,v=0;m<p;m+=3){var b=t.number(0,this.depth.value),g=e.noise2D(b*u,m*u)*c.y,w=e.noise2D(g*u,b*u)*c.x;y[m]=w,y[m+1]=g,y[m+2]=b,d[v++]=l*(.5+.5*e.noise3D(w,g,b))}var x=new re.InstancedBufferGeometry;x.instanceCount=s,x.setAttribute("position",(new re.Float32BufferAttribute).copy(h.attributes.position)),x.setAttribute("aOffset",new re.InstancedBufferAttribute(y,3)),x.setAttribute("aSpeed",new re.InstancedBufferAttribute(d,1)),this.color=new re.Uniform(new re.Color(r)),this.opacity=new re.Uniform(o),Ai.uniforms={color:this.color,opacity:this.opacity,uDepth:this.depth,uTraveled:this.traveled};var O=new re.ShaderMaterial(Ai),P=new re.LineSegments(x,O);P.frustumCulled=!1,P.position.z=-this.depth.value,this.add(P),this.particles=P,f.dispose(),h.dispose()}},{key:"tick",value:function(t){this.traveled.value+=t*this.speed,Ii(Yi(i.prototype),"tick",this).call(this,t)}}],n&&Bi(e.prototype,n),r&&Bi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(dr);function Ni(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hi(t,e,n){return e&&Ni(t.prototype,e),n&&Ni(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Zi=Hi((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=document.getElementById("background");this.container=e,this.sketchpad=new xe({container:e}),de.init(this.sketchpad.renderer);var n={sketchpad:this.sketchpad,renderToScreen:!1};this.grid=new To(n),this.navscan=new Zo(n),this.rain=new Pi(n),this.blockflow=new uo(n),this.ablaze=new Gr(n),this.cyber=new Vi(n),this.mixer=new Ee(this.sketchpad.renderer,[this.grid,this.navscan,this.rain,this.blockflow,this.ablaze,this.cyber]),this.sketchpad.init(this.mixer)}));function Wi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Qi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init(e),this.initClick(e),this.initMouseSwipe(e),this.initTouch(e),this.initKeyboad(e),this.initWheel(e)}var e,n,r;return e=t,n=[{key:"init",value:function(t){window.addEventListener("hashchange",(function(){return t.load()}))}},{key:"initClick",value:function(t){var e=t.nav,n=t.menu;e.back.addEventListener("click",(function(){return t.back()})),e.forward.addEventListener("click",(function(){return t.forward()})),e.menuButton.addEventListener("click",(function(){return n.tweenIn()})),n.list.addEventListener("click",(function(e){n.tweenOut();var r=e.target.getAttribute("data-ref");r&&setTimeout((function(){return t.goto(r)}),200)})),n.domElement.addEventListener("click",(function(){return n.tweenOut()})),t.invitation.addEventListener("click",(function(){return t.goto(1)})),t.otherProjects.items.forEach((function(e){return e.addEventListener("click",(function(e){return t.goto(e.currentTarget.getAttribute("data-ref")||0)}))})),Array.from(document.querySelectorAll(".menu-return")).forEach((function(e){return e.addEventListener("click",(function(){return t.goto("other-projects")}))})),t.navProgress.domElement.addEventListener("click",(function(e){var n=e.clientX/window.innerWidth,r=Math.round(n*(t.length-1));t.goto(r)}))}},{key:"initWheel",value:function(t){window.addEventListener("wheel",(function(e){t.menu.opened||(e.deltaX?e.deltaX>0&&!t.isEnding?t.forward():t.isStarting||t.back():e.deltaY>0&&!t.canScrollDown&&!t.isEnding?(t.forward(),window.scrollTo(window.scrollX,0)):e.deltaY<0&&!t.canScrollUp&&!t.isStarting&&(t.back(),window.scrollTo(window.scrollX,Math.max(0,t.height-window.innerHeight))))}))}},{key:"initMouseSwipe",value:function(t){this.onMouseDown=function(t){t.button>0||(this.swiping=!0,this.start=t.clientX)}.bind(this),this.onMouseUp=function(e){if(this.swiping){this.swiping=!1;var n=this.start-e.clientX;Math.abs(n)<10||(n<0?t.back():t.forward())}}.bind(this),t.canvas.addEventListener("mousedown",this.onMouseDown),window.addEventListener("mouseup",this.onMouseUp)}},{key:"initTouch",value:function(t){this.cancelSwipe=function(){this.swiping=!1}.bind(this),this.onTouchStart=function(t){this.cancelSwipeTimer=setTimeout(this.cancelSwipe,1e3),this.onMouseDown(t.targetTouches[0])}.bind(this),this.onTouchEnd=function(t){clearTimeout(this.cancelSwipeTimer),this.onMouseUp(t.changedTouches[0])}.bind(this),t.canvas.addEventListener("touchstart",this.onTouchStart),t.canvas.addEventListener("touchend",this.onTouchEnd)}},{key:"initKeyboad",value:function(t){var e=[33,"PageUp",37,"ArrowLeft"],n=[34,"PageDown",39,"ArrowRight",32," "],r=[].concat(e,n);window.addEventListener("keydown",(function(t){(r.includes(t.keyCode)||r.includes(t.key))&&t.preventDefault()})),window.addEventListener("keyup",(function(r){return console.log(r),e.includes(r.keyCode)||e.includes(r.keyCode)?(r.preventDefault(),t.back()):n.includes(r.keyCode)||n.includes(r.key)?(r.preventDefault(),t.forward()):void 0}))}}],n&&Wi(e.prototype,n),r&&Wi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qi(t){return function(t){if(Array.isArray(t))return $i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return $i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ki(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ji="tools",ta="affinities",ea=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.outputs={tools:document.getElementById(Ji),affinities:document.getElementById(ta)},this.pools={},this.reset(Ji),this.reset(ta);var n=function(t){return e.pools[t].filter((function(n){return n!==e.outputs[t].innerText}))};this.pools.tools=n(Ji),this.pools.affinities=n(ta),this.animations={},this.trigger=this.trigger.bind(this)}var e,r,o;return e=t,(r=[{key:"enable",value:function(){this.timeout=setTimeout(this.trigger,3e3)}},{key:"disable",value:function(){clearTimeout(this.timeout)}},{key:"trigger",value:function(){this.toggled=!this.toggled,this.toggled?this.animate(Ji):this.animate(ta),this.enable()}},{key:"animate",value:function(t){this.animations[t]&&this.animations[t].pause(),this.pools[t].length||this.reset(t);var e=new yt({autoplay:!1,steps:12,noise:12,mode:yt.modes.EXPAND,output:this.outputs[t],to:this.pools[t].pop()});this.animations[t]=n()({duration:2e3,easing:"easeOutSine",targets:e,progress:1})}},{key:"reset",value:function(e){this.pools[e]=t.shuffle(qi(t[e]))}}])&&Ki(e.prototype,r),o&&Ki(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();function na(t){return na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},na(t)}function ra(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return oa(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oa(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oa(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ia(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function aa(){return aa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=sa(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},aa.apply(this,arguments)}function sa(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fa(t)););return t}function ua(t,e){return ua=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ua(t,e)}function ca(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=fa(t);if(e){var o=fa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return la(this,n)}}function la(t,e){if(e&&("object"===na(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function fa(t){return fa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},fa(t)}ea.tools=["after effects","ambient occlusion","anime.js","babel","bayer matrix dithering","bloom","buffer attributes","colorful visuals","curl noise","dat.gui (RIP)","depth of field blur","directional blur","geometric shapes","glitch effects","global illumination","GLSL","GPGPU","gradients","monospace fonts","motion blur","OOP","particles","penner's easings","perlin noise","photoshop","radial blur","simplex noise","vs code","webpack"],ea.affinities=["abstract art","awwwards","baseball caps","clean designs","coffee","complexity","concept art","data visualization","dribbble","electronic music","fantasy UIs","generative art","generative design","glossy textures","glowy things","holograms","kimchi","machine learning","minimalism","pinterest","photography","random word combinations","realistic renders","robots","sci-fi aesthetics","skeuomorphism","soft shadows","spaghetti","synthwave","typographic experiments","UI design"],ea.shuffle=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=[t[n],t[e]];t[e]=r[0],t[n]=r[1]}return t};var ha=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ua(t,e)}(a,t);var e,r,o,i=ca(a);function a(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var n="about";return(e=i.call(this,"".concat(n,"-me"),t)).elements=["".concat(n,"-1"),"".concat(n,"-2"),"".concat(n,"-3"),"".concat(n,"-4a"),"tools","".concat(n,"-4b"),"affinities","".concat(n,"-4c")].map((function(t){return document.getElementById(t)})),e.texts=e.elements.map((function(t){return t.innerText})),e.selfie=document.getElementById("selfie"),e.shuffler=new ea,e.tweenX=10,e}return e=a,(r=[{key:"show",value:function(){aa(fa(a.prototype),"show",this).call(this),this.shuffler.enable()}},{key:"hide",value:function(){aa(fa(a.prototype),"hide",this).call(this),this.shuffler.disable()}},{key:"setup",value:function(t){var e=this,n=t?-this.tweenX:this.tweenX,r=function(t){t.style.opacity=0,t.style.transform="translateX(".concat(n,"rem)")};r(this.selfie),Object.entries(this.elements).forEach((function(t){var n=ra(t,2),o=n[0],i=n[1];i.innerText=e.texts[o],r(i)}))}},{key:"tweenIn",value:function(t){var e=this;aa(fa(a.prototype),"tweenIn",this).call(this,t),this.tweeningIn=n().timeline({easing:"easeOutCirc",delay:250,duration:650,complete:this.completeTweenIn}).add({targets:this.selfie,opacity:1,translateX:0},100),Object.entries(this.elements).forEach((function(t){var n=ra(t,2),r=n[0],o=n[1],i=new yt({output:o,from:"",to:e.texts[r],mode:yt.modes.REVERSE,steps:30,stagger:30,autoplay:!1,align:yt.align.LEFT}),a=100*Math.sqrt(r);e.tweeningIn.add({targets:i,progress:1},a).add({targets:o,translateX:0,opacity:1},a+100)}))}},{key:"tweenOut",value:function(t){var e=this;aa(fa(a.prototype),"tweenOut",this).call(this);var r=t?this.tweenX:-this.tweenX;this.tweeningOut=n().timeline({easing:"easeInOutQuad",duration:400,complete:this.completeTweenOut}).add({targets:this.selfie,opacity:0,translateX:r},0),Object.entries(this.elements).forEach((function(t){var n=ra(t,2),o=n[0],i=n[1],a=new yt({output:i,from:e.texts[o],to:"",autoplay:!1,align:yt.align.LEFT});e.tweeningOut.add({targets:a,progress:1},0).add({targets:i,translateX:r,opacity:0},100)}))}}])&&ia(e.prototype,r),o&&ia(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(It);function pa(t){return pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pa(t)}function ya(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||ma(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(t){return function(t){if(Array.isArray(t))return va(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ma(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ma(t,e){if(t){if("string"==typeof t)return va(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?va(t,e):void 0}}function va(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ba(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ga(){return ga="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=wa(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},ga.apply(this,arguments)}function wa(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ka(t)););return t}function xa(t,e){return xa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},xa(t,e)}function Oa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ka(t);if(e){var o=ka(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pa(this,n)}}function Pa(t,e){if(e&&("object"===pa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ka(t){return ka=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ka(t)}var Sa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xa(t,e)}(a,t);var e,r,o,i=Oa(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,"contact",t)).spans=Array.from(e.domElement.getElementsByTagName("span")),e.spansTexts=e.spans.map((function(t){return t.innerText})),e.links=Array.from(e.domElement.getElementsByTagName("a")),e.linksTexts=e.links.map((function(t){return t.innerText})),e.tweenX=10,[].concat(da(e.spans),da(e.links)).forEach((function(t){t.style.opacity=0,t.style.transform="translateX(".concat(e.tweenX,"rem)")})),e}return e=a,(r=[{key:"tweenIn",value:function(){var t=this;ga(ka(a.prototype),"tweenIn",this).call(this),this.tweeningIn=n().timeline({easing:"easeOutCirc",delay:300,duration:500,complete:this.completeTweenIn}),Object.entries(this.spans).forEach((function(e){var n=ya(e,2),r=n[0],o=n[1],i=new yt({output:o,from:"",steps:15,align:yt.align.LEFT,to:t.spansTexts[r],autoplay:!1}),a=100*r;t.tweeningIn.add({targets:i,progress:1},a),t.tweeningIn.add({targets:o,opacity:1,translateX:0},a)})),Object.entries(this.links).forEach((function(e){var n=ya(e,2),r=n[0],o=n[1],i=new yt({output:o,from:" ",steps:15,to:t.linksTexts[r],mode:yt.modes.REVERSE,autoplay:!1}),a=100*r;t.tweeningIn.add({targets:i,progress:1},a),t.tweeningIn.add({targets:o,opacity:1,translateX:0},a)}))}},{key:"tweenOut",value:function(){var t=this;ga(ka(a.prototype),"tweenOut",this).call(this),this.tweeningOut=n().timeline({easing:"easeInQuad",duration:300,complete:this.completeTweenOut}),Object.entries(this.spans).forEach((function(e){var n=ya(e,2),r=n[0],o=n[1],i=new yt({output:o,from:t.spansTexts[r],to:" ",align:yt.align.LEFT,steps:15,autoplay:!1}),a=r>0?100+50*r:0;t.tweeningOut.add({targets:i,progress:1},0),t.tweeningOut.add({targets:o,opacity:0,translateX:t.tweenX},a)})),Object.entries(this.links).forEach((function(e){var n=ya(e,2),r=n[0],o=n[1],i=new yt({output:o,align:yt.align.LEFT,from:t.linksTexts[r],to:" ",autoplay:!1}),a=100+50*r;t.tweeningOut.add({targets:i,progress:1},.4*a),t.tweeningOut.add({targets:o,opacity:0,translateX:t.tweenX},a)}))}}])&&ba(e.prototype,r),o&&ba(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(It);function ja(t){return ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ja(t)}function _a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ta(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ta(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ta(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ea(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ca(){return Ca="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Ra(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Ca.apply(this,arguments)}function Ra(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=za(t)););return t}function Ma(t,e){return Ma=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ma(t,e)}function Da(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=za(t);if(e){var o=za(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Aa(this,n)}}function Aa(t,e){if(e&&("object"===ja(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function za(t){return za=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},za(t)}var Ua=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ma(t,e)}(a,t);var e,r,o,i=Da(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,"other-projects",t)).items=e.getAll("li"),e.names=e.prepTextform(".other-project-title"),e.summaries=e.prepTextform(".other-project-summary"),e.tweenX=12,e.setup(),e}return e=a,r=[{key:"setup",value:function(t){var e=t?-this.tweenX:this.tweenX,n="translateX(".concat(e,"rem)"),r=function(t){t.element.style.opacity=0,t.element.style.transform=n};this.names.forEach(r),this.summaries.forEach(r)}},{key:"tweenIn",value:function(t){Ca(za(a.prototype),"tweenIn",this).call(this,t);var e=n().timeline({complete:this.completeTweenIn,easing:"easeOutCirc",duration:450,delay:100});this.tweeningIn=e;var r=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=r+50*t;e.add({targets:new yt({autoplay:!1,align:yt.align.LEFT,from:"",to:n.text,output:n.element}),progress:1},150+o),e.add({targets:n.element,opacity:1,translateX:0},o)};Object.entries(this.names).forEach((function(t){var e=_a(t,2),n=e[0],o=e[1];return r(n,o)})),Object.entries(this.summaries).forEach((function(t){var e=_a(t,2),n=e[0],o=e[1];return r(n,o,100)}))}},{key:"tweenOut",value:function(t){Ca(za(a.prototype),"tweenOut",this).call(this,t);var e=t?this.tweenX:-this.tweenX,r=n().timeline({complete:this.completeTweenOut,duration:300,easing:"easeInOutQuad"});this.tweeningOut=r;var o=function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=o+30*t;r.add({targets:new yt({autoplay:!1,mode:yt.modes.REVERSE,align:yt.align.LEFT,from:n.text,to:"",output:n.element}),progress:1},i),r.add({targets:n.element,opacity:0,translateX:e},i)};Object.entries(this.names).forEach((function(t){var e=_a(t,2),n=e[0],r=e[1];return o(n,r)})),Object.entries(this.summaries).forEach((function(t){var e=_a(t,2),n=e[0],r=e[1];return o(n,r)}))}}],r&&Ea(e.prototype,r),o&&Ea(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(It);function Ba(t){return Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ba(t)}function Ia(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Fa(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fa(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fa(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ga(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xa(){return Xa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=La(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Xa.apply(this,arguments)}function La(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ha(t)););return t}function Ya(t,e){return Ya=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ya(t,e)}function Va(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ha(t);if(e){var o=Ha(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Na(this,n)}}function Na(t,e){if(e&&("object"===Ba(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ha(t){return Ha=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ha(t)}var Za=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ya(t,e)}(a,t);var e,r,o,i=Va(a);function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t,e)).video=n.get("video"),n.paragraphs=n.prepTextform("p"),n.links=n.prepTextform("a"),n.tweenX=5,n.tweenY=1,n.setup(),n}return e=a,r=[{key:"show",value:function(){Xa(Ha(a.prototype),"show",this).call(this),this.video.play()}},{key:"hide",value:function(){Xa(Ha(a.prototype),"hide",this).call(this),this.video.pause()}},{key:"setup",value:function(t){var e=this,n=t?-this.tweenX:this.tweenX,r=function(t){e.setOpacity(t,0),e.setX(t,n)};r(this.video),this.paragraphs.forEach((function(t){return r(t.element)})),this.links.forEach((function(t){return r(t.element)}))}},{key:"tweenIn",value:function(t){Xa(Ha(a.prototype),"tweenIn",this).call(this,t);var e=n().timeline({easing:"easeOutCirc",delay:300,duration:500,complete:this.completeTweenIn}).add({targets:this.video,opacity:1,translateX:0},0);this.tweeningIn=e;var r=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=r+150*t;e.add({targets:new yt({autoplay:!1,align:yt.align.LEFT,steps:30,stagger:15,from:"",to:n.text,output:n.element}),progress:1},o).add({targets:n.element,opacity:1,translateX:0},o)};Object.entries(this.paragraphs).forEach((function(t){var e=Ia(t,2),n=e[0],o=e[1];return r(n,o)})),Object.entries(this.links).forEach((function(t){var e=Ia(t,2),n=e[0],o=e[1];return r(n,o,150)}))}},{key:"tweenOut",value:function(t){Xa(Ha(a.prototype),"tweenOut",this).call(this,t);var e=t?this.tweenX:-this.tweenX,r=n().timeline({easing:"easeInOutQuad",duration:300,complete:this.completeTweenOut}).add({targets:this.video,opacity:0,translateX:e},0);this.tweeningOut=r;var o=function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=o+50*t;r.add({targets:new yt({autoplay:!1,align:yt.align.LEFT,steps:30,stagger:15,from:n.text,to:"",output:n.element}),progress:1},i).add({targets:n.element,opacity:0,translateX:e},i)};Object.entries(this.paragraphs).forEach((function(t){var e=Ia(t,2),n=e[0],r=e[1];return o(n,r,50)})),Object.entries(this.links).forEach((function(t){var e=Ia(t,2),n=e[0],r=e[1];return o(n,r)}))}}],r&&Ga(e.prototype,r),o&&Ga(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(It);function Wa(t){return Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wa(t)}function Qa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qa(t,e){return qa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},qa(t,e)}function $a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var o=Ja(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ka(this,n)}}function Ka(t,e){if(e&&("object"===Wa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ja(t){return Ja=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ja(t)}var ts=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qa(t,e)}(i,t);var e,n,r,o=$a(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,document.querySelector("nav"),"flex")).back=t.get("#back"),t.forward=t.get("#forward"),t.menuButton=t.get("#menu-button"),t}return e=i,(n=[{key:"setForward",value:function(t){var e="disabled";t?this.forward.classList.add(e):this.forward.classList.remove(e)}}])&&Qa(e.prototype,n),r&&Qa(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(gt);function es(t){return es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},es(t)}function ns(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return rs(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rs(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rs(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function os(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function is(){return is="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=as(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},is.apply(this,arguments)}function as(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ls(t)););return t}function ss(t,e){return ss=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ss(t,e)}function us(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ls(t);if(e){var o=ls(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return cs(this,n)}}function cs(t,e){if(e&&("object"===es(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ls(t){return ls=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ls(t)}var fs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ss(t,e)}(a,t);var e,r,o,i=us(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,document.querySelector("#menu-overlay"),"flex")).list=t.get("#menu"),t.items=t.prepTextform("li"),t.setup(),t}return e=a,(r=[{key:"show",value:function(){is(ls(a.prototype),"show",this).call(this),this.opened=!0}},{key:"hide",value:function(){is(ls(a.prototype),"hide",this).call(this),this.opened=!1}},{key:"update",value:function(t){var e,n=this.items.filter((function(e){return e.element.getAttribute("data-ref")===t})),r=n.length?n.pop().element:this.items[0].element,o="selected";null===(e=this.currentItem)||void 0===e||e.classList.remove(o),r.classList.add(o),this.currentItem=r}},{key:"setup",value:function(){var t=this;this.setOpacity(this.domElement,0),this.items.forEach((function(e){return t.setOpacity(e.element,0)}))}},{key:"tweenIn",value:function(){var t=this;is(ls(a.prototype),"tweenIn",this).call(this),this.tweeningIn=n().timeline({easing:"easeOutCirc",duration:400,complete:this.completeTweenIn}).add({targets:this.domElement,duration:600,opacity:1}),Object.entries(this.items).forEach((function(e){var n=ns(e,2),r=n[0],o=n[1],i=20*r;t.tweeningIn.add({targets:new yt({autoplay:!1,from:"",align:yt.align.LEFT,to:o.text,output:o.element}),progress:1},50+i).add({targets:o.element,opacity:1},i)}))}},{key:"tweenOut",value:function(){var t=this;is(ls(a.prototype),"tweenOut",this).call(this),this.tweeningOut=n().timeline({easing:"easeOutQuad",duration:300,complete:this.completeTweenOut}).add({targets:this.domElement,opacity:0},100),this.items.forEach((function(e){t.tweeningOut.add({targets:new yt({autoplay:!1,from:e.text,to:"",align:yt.align.LEFT,output:e.element}),progress:1,duration:200},0).add({targets:e.element,duration:200,opacity:0},0)}))}}])&&os(e.prototype,r),o&&os(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(gt);function hs(t){return hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hs(t)}function ps(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ys(t,e){return ys=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ys(t,e)}function ds(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=vs(t);if(e){var o=vs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ms(this,n)}}function ms(t,e){if(e&&("object"===hs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function vs(t){return vs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},vs(t)}var bs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ys(t,e)}(a,t);var e,r,o,i=ds(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,document.getElementById("nav-progress"))).max=t,e.bar=e.get("#nav-progress-bar"),e}return e=a,(r=[{key:"tween",value:function(t){var e=Math.min(Math.max(t/this.max,0),this.max).toPrecision(2);n()({duration:500,easing:"easeInOutQuad",targets:this.bar,scaleX:e})}}])&&ps(e.prototype,r),o&&ps(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(gt);function gs(t){return function(t){if(Array.isArray(t))return ws(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ws(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ws(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ws(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Os=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nav=new ts,this.menu=new fs,this.background=new Zi,this.canvas=this.background.sketchpad.canvas;var n=this.background.cyber,r=new te(this.background.grid,this.nav),o=["navscan","rain","ablaze","blockflow"].map((function(t){return new Nt(t,e.background[t])})),i=new Ua(n),a=["orion","vesuna","textformer","disintegrator","sketches"].map((function(t){return new Za(t,n)})),s=new ha(n),u=new Sa(n);this.screens=[r].concat(gs(o),[i],gs(a),[s,u]),this.length=this.screens.length,this.index=0,this.currentScreen=this.screens[this.index],this.navProgress=new bs(this.length-1),this.animations=new ne(this),this.invitation=r.invitation,this.otherProjects=i,this.controls=new Qi(this)}var e,n,r;return e=t,(n=[{key:"load",value:function(){var t=window.location.hash.replace("#","");this.goto(t)}},{key:"back",value:function(){this.isStarting||this.goto(this.index-1)}},{key:"forward",value:function(){this.isEnding||this.goto(this.index+1)}},{key:"goto",value:function(t){if(!this.locked&&(this.locked=setTimeout(function(){this.locked=!1}.bind(this),400),"string"==typeof t&&(t=this.indexOf(t)),t!==this.index)){t=Math.min(Math.max(t,0),this.screens.length-1);var e=this.currentScreen,n=this.screens[t],r=t<this.index;this.set(t),this.animations.tween(e,n,r)}}},{key:"set",value:function(t){this.index=t,this.currentScreen=this.screens[t];var e=this.currentScreen.id;this.menu.update(e),this.nav.setForward(this.isEnding),window.location.hash=e}},{key:"indexOf",value:function(t){for(var e=0;e<this.length;e++)if(this.screens[e].id===t)return e;return 0}},{key:"isStarting",get:function(){return 0===this.index}},{key:"isEnding",get:function(){return this.index===this.screens.lastIndex}},{key:"height",get:function(){return this.currentScreen instanceof Nt?this.animations.overlay.domElement.clientHeight:this.currentScreen.domElement.clientHeight}},{key:"offset",get:function(){return window.pageYOffset||window.scrollY}},{key:"canScrollUp",get:function(){return this.offset>0}},{key:"canScrollDown",get:function(){return window.innerHeight+this.offset<this.height}}])&&xs(e.prototype,n),r&&xs(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();!function(){var t="nojs";if(new RegExp(t).test(window.location.search))document.documentElement.classList.remove("init");else{var e=document.createElement("div");e.setAttribute("id","fade"),document.body.appendChild(e);try{(new Os).load(),document.documentElement.classList.remove(t),document.documentElement.classList.add("js"),requestAnimationFrame((function(){return document.getElementById("fade").classList.add("out")}))}catch(t){console.error(t)}}}()}()}();
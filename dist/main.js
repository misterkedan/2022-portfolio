(()=>{"use strict";var e={};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=t,this.length=t.length,this.start=0,this.end=this.length-1,this.set(0)}var n,r,i;return n=e,(r=[{key:"back",value:function(){this.index!==this.start&&this.set(this.index-1)}},{key:"forward",value:function(){this.index!==this.end&&this.set(this.index+1)}},{key:"set",value:function(e){e!==this.index&&(this.index=e,this.item=this.items[this.index])}},{key:"atStart",get:function(){return this.index===this.start}},{key:"atEnd",get:function(){return this.index===this.end}}])&&t(n.prototype,r),i&&t(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}();const r=THREE;function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init(t),this.initMouse(t),this.initTouch(t),this.initButtons(t),this.initKeyboad(t)}var t,n,r;return t=e,(n=[{key:"init",value:function(e){window.addEventListener("hashchange",(function(){return e.load()}))}},{key:"initMouse",value:function(e){this.onMouseDown=function(e){this.swiping=!0,this.start=e.clientX}.bind(this),this.onMouseUp=function(t){if(this.swiping){this.swiping=!1;var n=this.start-t.clientX;Math.abs(n)<10||(n<0?e.back():e.forward())}}.bind(this),e.canvas.addEventListener("mousedown",this.onMouseDown),e.canvas.addEventListener("mouseup",this.onMouseUp)}},{key:"initTouch",value:function(e){this.cancelSwipe=function(){this.swiping=!1}.bind(this),this.onTouchStart=function(e){this.cancelSwipeTimer=setTimeout(this.cancelSwipe,1e3),this.onMouseDown(e.targetTouches[0])}.bind(this),this.onTouchEnd=function(e){clearTimeout(this.cancelSwipeTimer),this.onMouseUp(e.changedTouches[0])}.bind(this),e.canvas.addEventListener("touchstart",this.onTouchStart),e.canvas.addEventListener("touchend",this.onTouchEnd)}},{key:"initButtons",value:function(e){var t=e.view,n=t.back,r=t.forward,i=t.nav;n.addEventListener("click",(function(){return e.back()})),r.addEventListener("click",(function(){return e.forward()})),i.showcase.addEventListener("click",(function(){return e.jumpTo("navscan")})),i.works.addEventListener("click",(function(){return e.jumpTo("orion")})),i.about.addEventListener("click",(function(){return e.jumpTo("about")}))}},{key:"initKeyboad",value:function(e){var t=[33,"PageUp",37,"ArrowLeft"],n=[34,"PageDown",39,"ArrowRight"],r=[].concat(t,n);window.addEventListener("keydown",(function(e){(r.includes(e.keyCode)||r.includes(e.key))&&e.preventDefault()})),window.addEventListener("keyup",(function(r){return t.includes(r.keyCode)||t.includes(r.keyCode)?(r.preventDefault(),e.back()):n.includes(r.keyCode)||n.includes(r.key)?(r.preventDefault(),e.forward()):void 0}))}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);["background","title","fader","intro","showcase","works","about","links","navscan","rain","blockflow","ablaze","orion","disintegrator","textformer","vesuna"].forEach((function(e){return t[e]=document.getElementById(e)})),this.firstName=document.getElementById("name-first"),this.alias=document.getElementById("name-alias"),this.back=document.getElementById("arrow-back"),this.forward=document.getElementById("arrow-forward"),this.nav=["showcase","works","about"].reduce((function(e,t){var n=document.getElementById("nav-".concat(t));return n.setAttribute("href","javascript:void(0)"),e[t]=n,e}),{})}var t,n,r;return t=e,(n=[{key:"setArrows",value:function(e,t){var n="hidden",r="visible";this.back.style.visibility=e?n:r,this.forward.style.visibility=t?n:r}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var l=u((function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n||(n=b.getTextureSize(t.length));var i=b.createDataTexture(n);return i.needsUpdate=!0,b.FloatPack.pack(t,i.image.data),new r.Uniform(i)}));var h={glsl:"\nvec4 packFloat( float value ) {\n\n\tif ( value == 0.0 ) return vec4( 0.0, 0.0, 0.0, 0.0 );\n\n\tfloat mag = abs( value );\n\t\n\tfloat exponent = floor( log2( mag ) );\n\texponent += float( exp2( exponent ) <= mag / 2.0 );\n\texponent -= float( exp2( exponent ) > mag );\n\n\tfloat mantissa = ( exponent > 100.0 )\n\t\t? mag / 1024.0 / exp2( exponent - 10.0 ) - 1.0\n\t\t: mag / float( exp2( exponent ) ) - 1.0;\n\n\tfloat r = exponent + 127.0;\n\tmantissa *= 256.0;\n\n\tfloat g = floor( mantissa );\n\tmantissa -= g;\n\tmantissa *= 256.0;\n\n\tfloat b = floor( mantissa );\n\tmantissa -= b;\n\tmantissa *= 128.0;\n\n\tfloat a = floor( mantissa ) * 2.0 + float( value < 0.0 );\n\n\treturn vec4( r, g, b, a ) / 255.0;\n\n}\n\nfloat unpackFloat( vec4 value ) {\n\n\tfloat r = floor( value.r * 255.0 + 0.5 );\n\tfloat g = floor( value.g * 255.0 + 0.5 );\n\tfloat b = floor( value.b * 255.0 + 0.5 );\n\tfloat a = floor( value.a * 255.0 + 0.5 );\n\n\tfloat exponent = r - 127.0;\n\tfloat sign = 1.0 - mod( a, 2.0 ) * 2.0;\n\tfloat mantissa = float( r > 0.0 ) + g / 256.0 + b / 65536.0\n\t\t+ floor( a / 2.0 ) / 8388608.0;\n\treturn sign * mantissa * exp2( exponent );\n\n}",pack:function(e,t){var n,r,i,o,a,s,c;t||(t=new Uint8Array(4*e.length));for(var u=0,l=0,h=e.length;u<h;u++)0!==(n=e[u])&&(r=Math.abs(n),i=Math.floor(Math.log2(r)),i+=(o=Math.pow(2,i))<=r/2,a=(i-=o>r)>100?r/1024/Math.pow(2,i-10)-1:r/o-1,t[l]=i+127,a*=256,s=Math.floor(a),t[l+1]=s,a=256*(a-s),c=Math.floor(a),t[l+2]=c,a=128*(a-c),t[l+3]=2*Math.floor(a)+(n<0)),l+=4;return t},unpack:function(e,t){var n,r,i,o,a,s;t||(t=new Float32Array(e.length/4));for(var c=0,u=0,l=e.length;c<l;c+=4)n=e[c],r=e[c+1],i=e[c+2],a=n-127,s=(1-(o=e[c+3])%2*2)*((n>0)+r/256+i/65536+Math.floor(o/2)/8388608)*Math.pow(2,a),t[u]=s,u++}};function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data,i=t.defaultValue,o=t.textureSize,a=t.length,s=void 0===a?65536:a,c=t.name,u=void 0===c?"data":c,l=t.prefix,h=void 0===l?"GPGPU_":l,d=t.shader,p=void 0===d?e.fragmentShader:d,v=t.uniforms,y=void 0===v?{}:v;if(f(this,e),!b.renderer)throw new Error("Use GPUVariable.init( renderer ) before instancing.");n?s=n.length:o&&(s=o*o),o||(o=b.getTextureSize(s)),this.textureSize=o,this.rt1=b.createRenderTarget(o),this.rt2=b.createRenderTarget(o),this.renderTarget=this.rt1,this.dataTexture=b.createDataTexture(o),this.dataTexture.needsUpdate=!0,n?this.write(n):(n=this.createDataArray(i),i&&this.write(n)),this.output=new r.Uniform(this.dataTexture),this.name=h?h+u:u,this.uniforms=y,this.uniforms[this.name]=this.output,this.material=new r.ShaderMaterial({uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:p});var g=o.toFixed(1);this.material.defines.resolution="vec2( ".concat(g,", ").concat(g," )")}var t,n,i;return t=e,(n=[{key:"update",value:function(){this.renderTarget=this.renderTarget===this.rt1?this.rt2:this.rt1,b.render(this.material,this.renderTarget),this.output.value=this.renderTarget.texture}},{key:"dispose",value:function(){this.rt1.dispose(),this.rt2.dispose(),this.dataTexture.dispose(),this.material.dispose()}},{key:"createDataArray",value:function(e){var t=new Float32Array(this.textureSize*this.textureSize);return e&&t.fill(e),t}},{key:"read",value:function(){b.renderer.readRenderTargetPixels(this.renderTarget,0,0,this.textureSize,this.textureSize,this.buffer);var e=this.createDataArray();return h.unpack(this.buffer,e),e}},{key:"write",value:function(e){h.pack(e,this.buffer)}},{key:"buffer",get:function(){return this.dataTexture.image.data}}])&&d(t.prototype,n),i&&d(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}p.vertexShader="\n    void main() {\n\n        gl_Position = vec4( position, 1.0 );\n\n    }\n",p.fragmentShader="\n    uniform sampler2D GPGPU_data;\n\n    ".concat(h.glsl,"\n\n    void main() {\n        \n        vec2 uv = gl_FragCoord.xy / resolution.xy;\n        float data = unpackFloat( texture2D( GPGPU_data, uv ) );\n\n        // Modify data...\n\n        gl_FragColor = packFloat( data );\n\n    }\n");var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._textureSize=e.getTextureSize(t),this.variables={}}var t,n,r;return t=e,(n=[{key:"addVariable",value:function(e,t){var n=new p(y(y({},t),{},{name:e,textureSize:this._textureSize}));this.variables[e]=n,this[e]=n.output}},{key:"addConstant",value:function(e,t){this[e]=new l(t,this._textureSize)}},{key:"assign",value:function(e,t){var n=this.variables[e],r=this.variables[t];n.uniforms[r.name]=r.output}},{key:"tick",value:function(){Object.values(this.variables).forEach((function(e){return e.update()}))}},{key:"textureSize",get:function(){return this._textureSize}}])&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}b.init=function(e){if(!b.renderer){b.renderer=e;b.isSupported=!0,b.renderer.capabilities.maxVertexTextures||(console.warn("No support for vertex textures."),b.isSupported=!1),b.isSupported||window.alert("Incompatible hardware."),b.isSupported&&(b.renderer=e,b.scene=new r.Scene,b.camera=new r.OrthographicCamera,b.mesh=new r.Mesh(new r.PlaneGeometry(2,2)),b.scene.add(b.mesh))}},b.getTextureSize=function(e){if(isNaN(e)||!isFinite(e)||!Number.isInteger(e)||e<1)throw new RangeError("Parameter must be an int > 0 ");for(var t=1,n=2;n*n<e;)n=Math.pow(2,t),t++;return n},b.createDataTexture=function(e){return new r.DataTexture(new Uint8Array(e*e*4),e,e,r.RGBAFormat,r.UnsignedByteType)},b.createRenderTarget=function(e){return new r.WebGLRenderTarget(e,e,{wrapS:r.ClampToEdgeWrapping,wrapT:r.ClampToEdgeWrapping,minFilter:r.NearestFilter,magFilter:r.NearestFilter,stencilBuffer:!1,depthBuffer:!1,format:r.RGBAFormat,type:r.UnsignedByteType})},b.render=function(e,t){b.mesh.material=e,b.renderer.setRenderTarget(t),b.renderer.render(b.scene,b.camera),b.renderer.setRenderTarget(null)},b.FloatPack=h;var k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math;w(this,e),this.prng=t}var t,n,r;return t=e,n=[{key:"random",value:function(){return this.prng.random()}},{key:"amount",value:function(){return this.random()}},{key:"number",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.random();return isNaN(e)||isNaN(t)?r:n?Math.floor(r*(t-e+1)+e):r*(t-e)+e}},{key:"noise",value:function(){return this.number(-1,1)}},{key:"int",value:function(e,t){return this.number(e,t,!0)}},{key:"uint",value:function(e){return this.int(0,e)}},{key:"boolean",value:function(){return this.random()<.5}},{key:"chance",value:function(e){return this.random()<e}},{key:"item",value:function(e){return e[this.uint(e.length-1)]}},{key:"char",value:function(e){return e.charAt(this.uint(e.length-1))}}],n&&x(t.prototype,n),r&&x(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const P="vec3 bayerMatrixDither( vec3 color ) {\r\n\r\n\t// Silly code because old devices ( OpenGL ES < 3 ) don't support arrays\r\n\r\n\tint index = int( mod( gl_FragCoord.x - 0.5, 8.0 ) ) + \r\n\t\tint( mod( gl_FragCoord.y - 0.5, 8.0 ) * 8.0 );\r\n\r\n\tfloat dither = 0.0078;\r\n\r\n\tdither = ( index == 1 ) ? 0.0039 : dither;\r\n\tdither = ( index == 2 ) ? 0.0068 : dither;\r\n\tdither = ( index == 3 ) ? 0.0029 : dither;\r\n\tdither = ( index == 4 ) ? 0.0076 : dither;\r\n\tdither = ( index == 5 ) ? 0.0036 : dither;\r\n\tdither = ( index == 6 ) ? 0.0066 : dither;\r\n\tdither = ( index == 7 ) ? 0.0027 : dither;\r\n\r\n\tdither = ( index == 8 )  ? 0.0019 : dither;\r\n\tdither = ( index == 9 )  ? 0.0059 : dither;\r\n\tdither = ( index == 10 ) ? 0.0009 : dither;\r\n\tdither = ( index == 11 ) ? 0.0049 : dither;\r\n\tdither = ( index == 12 ) ? 0.0017 : dither;\r\n\tdither = ( index == 13 ) ? 0.0056 : dither;\r\n\tdither = ( index == 14 ) ? 0.0007 : dither;\r\n\tdither = ( index == 15 ) ? 0.0046 : dither;\r\n\r\n\tdither = ( index == 16 ) ? 0.0063 : dither;\r\n\tdither = ( index == 17 ) ? 0.0024 : dither;\r\n\tdither = ( index == 18 ) ? 0.0073 : dither;\r\n\tdither = ( index == 19 ) ? 0.0034 : dither;\r\n\tdither = ( index == 20 ) ? 0.0061 : dither;\r\n\tdither = ( index == 21 ) ? 0.0022 : dither;\r\n\tdither = ( index == 22 ) ? 0.0071 : dither;\r\n\tdither = ( index == 23 ) ? 0.0032 : dither;\r\n\r\n\tdither = ( index == 24 ) ? 0.0005 : dither;\r\n\tdither = ( index == 25 ) ? 0.0044 : dither;\r\n\tdither = ( index == 26 ) ? 0.0014 : dither;\r\n\tdither = ( index == 27 ) ? 0.0054 : dither;\r\n\tdither = ( index == 28 ) ? 0.0002 : dither;\r\n\tdither = ( index == 29 ) ? 0.0041 : dither;\r\n\tdither = ( index == 30 ) ? 0.0012 : dither;\r\n\tdither = ( index == 31 ) ? 0.0051 : dither;\r\n\r\n\tdither = ( index == 32 ) ? 0.0074 : dither;\r\n\tdither = ( index == 33 ) ? 0.0035 : dither;\r\n\tdither = ( index == 34 ) ? 0.0065 : dither;\r\n\tdither = ( index == 35 ) ? 0.0025 : dither;\r\n\tdither = ( index == 36 ) ? 0.0077 : dither;\r\n\tdither = ( index == 37 ) ? 0.0038 : dither;\r\n\tdither = ( index == 38 ) ? 0.0067 : dither;\r\n\tdither = ( index == 39 ) ? 0.0028 : dither;\r\n\r\n\tdither = ( index == 40 ) ? 0.0016 : dither;\r\n\tdither = ( index == 41 ) ? 0.0055 : dither;\r\n\tdither = ( index == 42 ) ? 0.0006 : dither;\r\n\tdither = ( index == 43 ) ? 0.0045 : dither;\r\n\tdither = ( index == 44 ) ? 0.0018 : dither;\r\n\tdither = ( index == 45 ) ? 0.0057 : dither;\r\n\tdither = ( index == 46 ) ? 0.0008 : dither;\r\n\tdither = ( index == 47 ) ? 0.0047 : dither;\r\n\r\n\tdither = ( index == 48 ) ? 0.006  : dither;\r\n\tdither = ( index == 49 ) ? 0.0021 : dither;\r\n\tdither = ( index == 50 ) ? 0.007  : dither;\r\n\tdither = ( index == 51 ) ? 0.003  : dither;\r\n\tdither = ( index == 52 ) ? 0.0062 : dither;\r\n\tdither = ( index == 53 ) ? 0.0023 : dither;\r\n\tdither = ( index == 54 ) ? 0.0072 : dither;\r\n\tdither = ( index == 55 ) ? 0.0033 : dither;\r\n\r\n\tdither = ( index == 56 ) ? 0.0001 : dither;\r\n\tdither = ( index == 57 ) ? 0.004  : dither;\r\n\tdither = ( index == 58 ) ? 0.0011 : dither;\r\n\tdither = ( index == 59 ) ? 0.005  : dither;\r\n\tdither = ( index == 60 ) ? 0.0003 : dither;\r\n\tdither = ( index == 61 ) ? 0.0043 : dither;\r\n\tdither = ( index == 62 ) ? 0.0013 : dither;\r\n\tdither = ( index == 63 ) ? 0.0052 : dither;\r\n\r\n\treturn color - dither;\r\n\t\r\n}",O="vec3 linearGradient( \r\n\tvec2 origin,\r\n\tvec2 target,\r\n\tvec3 color1,\r\n\tvec3 color2,\r\n\tfloat angle\r\n) {\r\n\r\n\tfloat toTarget = length( target );\r\n\tangle = radians( angle ) + atan( target.y, target.x );\r\n\r\n\tfloat progressX = cos( angle ) * toTarget;\r\n\tfloat progressY = sin( angle ) * toTarget;\r\n\tvec2 progress = vec2( progressX, progressY ) + origin;\r\n\r\n\treturn mix( color1, color2, smoothstep( 0.0, 1.0, progress.x ) );\r\n\t\r\n}";function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=G(e);if(t){var i=G(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D(this,n)}}function D(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(a,e);var t,n,i,o=R(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.color1,i=void 0===n?16777215:n,s=t.color2,c=void 0===s?0:s,u=t.angle,l=void 0===u?90:u;T(this,a);var h=new r.PlaneGeometry(2,2),f=new r.ShaderMaterial(j(j({},a.shader),{},{uniforms:{uAngle:{value:l},uColor1:{value:new r.Color(i)},uColor2:{value:new r.Color(c)}}}));return(e=o.call(this,h,f)).frustumCulled=!1,e}return t=a,(n=[{key:"angle",get:function(){return this.material.uniforms.uAngle.value},set:function(e){this.material.uniforms.uAngle.value=e}},{key:"color1",get:function(){return this.material.uniforms.uColor1.value},set:function(e){this.material.uniforms.uColor1.value=e}},{key:"color2",get:function(){return this.material.uniforms.uColor2.value},set:function(e){this.material.uniforms.uColor2.value=e}}])&&z(t.prototype,n),i&&z(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Mesh);M.shader={depthWrite:!1,depthTest:!1,vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\r\n\tgl_Position = vec4( position, 1.0 );\r\n\r\n}",fragmentShader:"\n\t\tuniform float uAngle;\n\t\tuniform vec3 uColor1;\n\t\tuniform vec3 uColor2;\n\t\tvarying vec2 vUv;\n\t\t\n\t\t".concat(O,"\n\t\t").concat(P,"\n\n\t\tvoid main() {\n\n\t\t\tvec2 origin = vec2( 0.5, 0.5 );\n\t\t\tvec2 target = vUv - origin;\n\t\t\tvec3 color = linearGradient( origin, target, uColor1, uColor2, uAngle );\n\t\t\t\n\t\t\tcolor = bayerMatrixDither( color );\n\n\t\t\tgl_FragColor = vec4( color, 1.0 );\n\t\t\t\n\t\t}")};var A={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}"};class U{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const B=new r.OrthographicCamera(-1,1,1,-1,0,1),F=new r.BufferGeometry;F.setAttribute("position",new r.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),F.setAttribute("uv",new r.Float32BufferAttribute([0,2,0,0,2,0],2));class L{constructor(e){this._mesh=new r.Mesh(F,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,B)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class X extends U{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof r.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=r.UniformsUtils.clone(e.uniforms),this.material=new r.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new L(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}class I extends U{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),i=e.state;let o,a;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(o=0,a=1):(o=1,a=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),i.buffers.stencil.setClear(a),i.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class Y extends U{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class N{constructor(e,t){if(this.renderer=e,void 0===t){const n={minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBAFormat},i=e.getSize(new r.Vector2);this._pixelRatio=e.getPixelRatio(),this._width=i.width,this._height=i.height,(t=new r.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===A&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===X&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new X(A),this.clock=new r.Clock}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let t=0,r=this.passes.length;t<r;t++){const r=this.passes[t];if(!1!==r.enabled){if(r.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(t),r.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),r.needsSwap){if(n){const t=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),n.setFunc(t.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==I&&(r instanceof I?n=!0:r instanceof Y&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new r.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let e=0;e<this.passes.length;e++)this.passes[e].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new r.OrthographicCamera(-1,1,1,-1,0,1);const V=new r.BufferGeometry;V.setAttribute("position",new r.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),V.setAttribute("uv",new r.Float32BufferAttribute([0,2,0,0,2,0],2));class W extends U{constructor(e,t,n,i,o){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==o?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new r.Color}render(e,t,n){const r=e.autoClear;let i,o;e.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=r}}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var H=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.renderer,i=t.stage,o=t.useRenderTarget,a=void 0!==o&&o;q(this,e),a&&(this.renderTarget=new r.WebGLRenderTarget),this.composer=new N(n,this.renderTarget),this.composer.renderToScreen=!a,this.passes={},this.add("render",new W(i.scene,i.camera))}var t,n,i;return t=e,(n=[{key:"add",value:function(e,t){this.passes[e]=t,this.composer.addPass(t)}},{key:"remove",value:function(e){var t,n=this.passes[e];n&&(this.composer.removePass(n),null==n||null===(t=n.dispose)||void 0===t||t.call(n),delete this.passes[e])}},{key:"resize",value:function(e,t,n){this.composer.setSize(e,t),Object.values(this.passes).forEach((function(r){return null==r?void 0:r.setSize(e,t,n)}))}},{key:"tick",value:function(){this.composer.render()}},{key:"dispose",value:function(){Object.values(this.passes).forEach((function(e){var t;return null==e||null===(t=e.dispose)||void 0===t?void 0:t.call(e)})),Object.values(this).forEach((function(e){var t;return null==e||null===(t=e.dispose)||void 0===t?void 0:t.call(e)}))}}])&&Q(t.prototype,n),i&&Q(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var J=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.target,r=void 0===n?window:n,i=t.width,o=void 0===i?window.innerWidth:i,a=t.height,s=void 0===a?window.innerHeight:a,c=t.margin,u=void 0===c?0:c,l=t.marginTop,h=t.marginRight,f=t.marginBottom,d=t.marginLeft,p=t.enabled,v=void 0===p||p,y=t.debug,g=void 0!==y&&y,m=t.preventDefault,b=void 0!==m&&m,w=t.onChange;K(this,e);var x=function(e){return"number"==typeof e&&e>=0?e:u};this.margin={top:x(l),right:x(h),bottom:x(f),left:x(d)},this.hitbox={top:this.margin.top,left:this.margin.left,width:o,height:s},this.resize(o,s),this.x=this.y=.5,this.target=r,this.onMouseMove=function(e){b&&e.preventDefault&&e.preventDefault(),this.track(e.clientX,e.clientY)}.bind(this),this.onTouchMove=function(e){b&&e.preventDefault(),this.onMouseMove(e.targetTouches[0])}.bind(this),this.onChange=w,g&&(this.onDebug=this.log),v&&this.enable()}var t,n,r;return t=e,(n=[{key:"enable",value:function(){this._enabled||(this.target.addEventListener("touchmove",this.onTouchMove),this.target.addEventListener("mousemove",this.onMouseMove),this._enabled=!0)}},{key:"disable",value:function(){this._enabled&&(this.target.removeEventListener("touchmove",this.onTouchMove),this.target.removeEventListener("mousemove",this.onMouseMove),this._enabled=!1)}},{key:"dispose",value:function(){this.disable()}},{key:"track",value:function(e,t){var n,r,i;if(this.clientX!==e){this.clientX=e;var o=this.normalizeX;this.x!==o&&(this.x=o,i=!0)}if(this.clientY!==t){this.clientY=t;var a=this.normalizeY;this.y!==a&&(this.y=a,i=!0)}i&&(null===(n=this.onChange)||void 0===n||n.call(this),null===(r=this.onDebug)||void 0===r||r.call(this))}},{key:"resize",value:function(e,t){var n=this.margin.left*e,r=this.margin.right*e;this.hitbox.width=e-n-r,this.offsetX=n;var i=this.margin.top*t,o=this.margin.bottom*t;this.hitbox.height=t-i-o,this.offsetY=i}},{key:"log",value:function(){var e=this.x,t=this.y,n=this.reverseX,r=this.reverseY,i=this.polarizeX,o=this.polarizeY,a=this.reversePolarizeX,s=this.reversePolarizeY,c=this.centerX,u=this.centerY,l=this.reverseCenterX,h=this.reverseCenterY;console.log({x:e,y:t,reverseX:n,reverseY:r,polarizeX:i,polarizeY:o,reversePolarizeX:a,reversePolarizeY:s,centerX:c,centerY:u,reverseCenterX:l,reverseCenterY:h})}},{key:"normalizeX",get:function(){return e.normalize(this.clientX-this.offsetX,this.hitbox.width)}},{key:"normalizeY",get:function(){return e.normalize(this.clientY-this.offsetY,this.hitbox.height)}},{key:"reverseX",get:function(){return e.reverse(this.x)}},{key:"reverseY",get:function(){return e.reverse(this.y)}},{key:"polarizeX",get:function(){return e.polarize(this.x)}},{key:"polarizeY",get:function(){return e.polarize(this.y)}},{key:"reversePolarizeX",get:function(){return e.reversePolarize(this.x)}},{key:"reversePolarizeY",get:function(){return e.reversePolarize(this.y)}},{key:"centerX",get:function(){return e.center(this.x)}},{key:"centerY",get:function(){return e.center(this.y)}},{key:"reverseCenterX",get:function(){return e.reverseCenter(this.x)}},{key:"reverseCenterY",get:function(){return e.reverseCenter(this.y)}}])&&Z(t.prototype,n),r&&Z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}J.clamp=function(e){return e>1?1:e<0?0:e},J.normalize=function(e,t){return J.clamp(e/t)},J.reverse=function(e){return 1-e},J.polarize=function(e){return 2*e-1},J.reversePolarize=function(e){return 1-2*e},J.center=function(e){return 1-2*Math.abs(e-.5)},J.reverseCenter=function(e){return 2*Math.abs(e-.5)};var te=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.lookAt,o=void 0===i?{x:0,y:0,z:0}:i,a=n.bounds,s=void 0===a?{x:5,y:5,z:0}:a,c=n.speed,u=void 0===c?.002:c,l=n.intro;$(this,e),this.camera=t,this.lookAt=new r.Vector3(o.x,o.y,o.z),this.bounds=new r.Vector3(s.x,s.y,s.z),this.speed=u,this.origin=(new r.Vector3).copy(t.position),this.target=new r.Vector3,l&&this.set(l.x,l.y,l.z)}var t,n,i;return t=e,n=[{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.camera.position.set(e,t,n),this}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.target.x=this.origin.x+this.bounds.x*e,this.target.y=this.origin.y+this.bounds.y*t,this.target.z=this.origin.z+this.bounds.z*n,this}},{key:"tick",value:function(e){var t=r.MathUtils.clamp(this.speed*e,0,1);return this.camera.position.lerp(this.target,t),this.camera.lookAt(this.lookAt),this}}],n&&ee(t.prototype,n),i&&ee(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ie=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.plane,o=n.width,a=void 0===o?1e3:o,s=n.height,c=void 0===s?1e3:s,u=n.horizontal,l=void 0!==u&&u,h=n.cursor,f=n.cursorSize,d=void 0===f?.1:f,p=n.color,v=void 0===p?16711680:p,y=n.opacity,g=void 0===y?.15:y,m=n.lerp,b=n.autoRotate;ne(this,e),i||(i=new r.Mesh(new r.PlaneGeometry(a,c),new r.MeshBasicMaterial({color:v,opacity:g,transparent:g<1})),l&&i.rotateX(-Math.PI/2)),h||(h=new r.Mesh(new r.BoxGeometry(d,d,d),new r.MeshBasicMaterial({color:v}))),t.add(i),t.add(h),this.plane=i,this.cursor=h,this.lerp=m,this.autoRotate=b,this.camera=t.camera,this.tracker=new r.Vector2,this.raycaster=new r.Raycaster,t.debug||(this.plane.visible=!1,this.cursor.visible=!1)}var t,n,i;return t=e,(n=[{key:"set",value:function(e,t){this.tracker.set(e,t)}},{key:"tick",value:function(e){this.autoRotate&&this.plane.quaternion.copy(this.camera.quaternion),this.raycaster.setFromCamera(this.tracker,this.camera);var t=this.raycaster.intersectObject(this.plane)[0];if(null!=t&&t.point){if(!this.lerp)return this.cursor.position.copy(t.point);var n=r.MathUtils.clamp(this.lerp*e,0,1);this.cursor.position.lerp(t.point,n)}}}])&&re(t.prototype,n),i&&re(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ae=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sketch=t,!1!==t.settings.cursorTracker&&this.initTracker(),t.settings.cursorProjector&&this.initProjector(),t.settings.cameraRig&&this.initCameraRig(),t.settings.gui&&this.initGUI()}var t,n,r;return t=e,(n=[{key:"initTracker",value:function(){this.tracker=new J,this.trackerEnabled=!0}},{key:"initProjector",value:function(){this.projector=new ie(this.sketch,this.sketch.settings.cursorProjector),this.cursor=this.projector.cursor}},{key:"initCameraRig",value:function(){var e=this.sketch.settings,t=e.camera.lookAt,n=e.cameraRig.bounds,r=e.cameraRig.speed,i=e.cameraRig.intro;this.cameraRig=new te(this.sketch.camera,{lookAt:t,bounds:n,speed:r,intro:i}),this.cameraRigEnabled=!0}},{key:"initGUI",value:function(){this.gui=new e.GUI,this.gui.title(this.sketch.name.toUpperCase()),this.autoCloseGUI()}},{key:"autoCloseGUI",value:function(){this.gui&&(this.sketch.sketchpad.wide||this.gui.close())}},{key:"refreshGUI",value:function(){this.gui&&!this.gui._closed&&this.gui.controllersRecursive().forEach((function(e){return e.updateDisplay()}))}},{key:"resize",value:function(e,t){var n;null===(n=this.tracker)||void 0===n||n.resize(e,t),this.autoCloseGUI()}},{key:"tick",value:function(e){this.cameraRigEnabled&&this.cameraRig.update(this.tracker.reversePolarizeX,this.tracker.y).tick(e)}}])&&oe(t.prototype,n),r&&oe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ae.GUI=window.GUI,ae.VALUE="value",ae.clamp=r.MathUtils.clamp,ae.lerp=r.MathUtils.lerp;var ue=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.background,i=t.camera;if(se(this,e),this.scene=new r.Scene,n&&(this.scene.background=n),i){if(i instanceof r.Camera==!1){var o=i.start,a=i.lookAt;i=new r.PerspectiveCamera(i.fov,i.aspect,i.near,i.far),o&&i.position.set(o.x,o.y,o.z),a&&i.lookAt(a.x,a.y,a.z)}}else i=new r.PerspectiveCamera;this.camera=i}var t,n,i;return t=e,(n=[{key:"add",value:function(e){this.scene.add(e)}},{key:"remove",value:function(e){this.scene.remove(e)}},{key:"resize",value:function(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix()}}])&&ce(t.prototype,n),i&&ce(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var fe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;le(this,e),this.callbacks="function"==typeof t?[t]:t,this.fps=n,this.elapsed=0,this._last=0,this._deltaOffset=0,this._isPlaying=!1,this._update=this.update.bind(this)}var t,n,r;return t=e,(n=[{key:"add",value:function(e){this.has(e)||this.callbacks.push(e)}},{key:"remove",value:function(e){this.has(e)&&this.callbacks.splice(this.callbacks.indexOf(e),1)}},{key:"has",value:function(e){return this.callbacks.includes(e)}},{key:"reset",value:function(){this.elapsed=0}},{key:"start",value:function(){this._last=this.now,this._deltaOffset=0,this._isPlaying=!0,this.requestFrame()}},{key:"pause",value:function(){this._isPlaying=!1}},{key:"stop",value:function(){this.pause(),this.reset()}},{key:"update",value:function(){if(this.isPlaying){this.requestFrame();var t=Math.min(this.now-this._last,e.maxDelta);if(this._last=this.now,this.elapsed+=t,t>=this._frameDuration)return this.tick(t);this._deltaOffset+=t;var n=this._frameDuration-this._deltaOffset;n<=0&&(this.tick(this._frameDuration),this._deltaOffset=Math.abs(n)%this._frameDuration)}}},{key:"tick",value:function(e){var t=this;this.callbacks.forEach((function(n){return n(e,t.elapsed)}))}},{key:"requestFrame",value:function(){requestAnimationFrame(this._update)}},{key:"fps",get:function(){return this._fps},set:function(e){this._fps=e,this._frameDuration=e>0?Math.floor(1e3/e):0}},{key:"isPlaying",get:function(){return this._isPlaying}},{key:"now",get:function(){return e.time.now()}}])&&he(t.prototype,n),r&&he(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}fe.maxDelta=100,fe.time=Date||performance;var ve=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.container,i=void 0===n?"sketch":n,o=t.width,a=t.height,s=t.fps,c=t.renderer,u=void 0===c?new r.WebGLRenderer({powerPreference:"high-performance",antialias:!1,stencil:!1,depth:!1}):c,l=t.debug,h=t.stats;if(de(this,e),this.renderer=u,this.canvas=u.domElement,this.pixelRatio=Math.min(window.devicePixelRatio,2),"string"==typeof i&&(i=document.getElementById(i)),i||(i=document.body),i.appendChild(this.canvas),i.style.touchAction="none",this.width=o>0?o:void 0,this.height=a>0?a:void 0,this.debug=l,this.fps=l?0:s,this.ticker=new fe(this.tick.bind(this),s),h||l){this.stats=new e.Stats,i.appendChild(this.stats.domElement);var f=function(){this.stats.update()}.bind(this);this.ticker.add(f)}}var t,n,i;return t=e,n=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.sketch;this.sketch=e,this.resize(),this.sketch.init(),this.onResize=function(){this.needsResize=!0}.bind(this),window.addEventListener("resize",this.onResize),this.onTouchStart=function(e){return e.preventDefault()},this.canvas.addEventListener("touchstart",this.onTouchStart),this.tick(0,0),this.ticker.start()}},{key:"dispose",value:function(){this.ticker.stop(),window.removeEventListener("resize",this.onResize),window.removeEventListener("touchstart",this.onTouchStart)}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.width,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.height;e||(e=window.innerWidth),t||(t=window.innerHeight),this.renderer.setPixelRatio(this.pixelRatio),this.renderer.setSize(e,t),this.sketch.resize(e,t,this.pixelRatio),this.wide=e>1e3,this.needsResize=!1}},{key:"tick",value:function(e,t){this.needsResize&&this.resize(),this.sketch.tick(e,t)}}],n&&pe(t.prototype,n),i&&pe(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ve.Stats=window.Stats;var xe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.defaults,r=void 0===n?{}:n,i=t.settings,o=void 0===i?{}:i,a=t.stage,s=t.background,c=t.random;be(this,e),o=ge(ge({},r),o),this.settings=o,a||(a=new ue(o)),this.stage=a;var u=o.sketchpad||new ve;this.sketchpad=u,this.effects=new H({renderer:u.renderer,stage:a}),this.random=c||o.random?new k:null,!s&&o.background&&this.initBackground()}var t,n,i;return t=e,n=[{key:"initBackground",value:function(){var e=this.settings.background,t=e instanceof r.Color?e:("string"==typeof e||"number"==typeof e)&&new r.Color(e);if(t)return this.stage.background=t;e.color1&&e.color2&&(this.background=new M(e),this.add(this.background))}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae;this.initScene(),e&&(this.controls=new e(this))}},{key:"initScene",value:function(){}},{key:"dispose",value:function(){this.stage.dispose(),this.effects.dispose()}},{key:"resize",value:function(e,t,n){var r,i;this.stage.resize(e,t),null===(r=this.controls)||void 0===r||r.resize(e,t),null===(i=this.effects)||void 0===i||i.resize(e,t,n)}},{key:"tick",value:function(e,t){var n;null===(n=this.controls)||void 0===n||n.tick(e,t),this.effects.tick(e,t)}},{key:"add",value:function(e){this.stage.add(e)}},{key:"remove",value:function(e){this.stage.remove(e)}},{key:"camera",get:function(){return this.stage.camera}},{key:"debug",get:function(){return this.sketchpad.debug}},{key:"name",get:function(){return this.settings.name||"Sketch"}}],n&&we(t.prototype,n),i&&we(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t){return Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Oe(e,t)}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=je(e);if(t){var i=je(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ce(this,n)}}function Ce(e,t){if(t&&("object"===ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},je(e)}var _e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oe(e,t)}(o,e);var t,n,r,i=Se(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).intensity=0,t}return t=o,(n=[{key:"tick",value:function(e){var t=this.sketch,n=this.tracker,r=t.settings,i=ae.lerp;this.projector.set(n.polarizeX,n.reversePolarizeY),this.projector.tick(e);var o=t.camera.aspect>1?n.reverseCenterX:n.reverseCenterY;this.intensity=i(this.intensity,o,r.lerpSpeed),t.depth.value=i(r.depth.max,r.depth.min,this.intensity),t.noiseScale.value=i(r.noiseScale.min,r.noiseScale.max,Math.pow(2*this.intensity,2))}}])&&Pe(t.prototype,n),r&&Pe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(ae),Te={name:"Backgrid",background:{color1:"#080809",color2:"#201f23"},inactiveColor:"#222226",activeColor:"#3a4045",dot:{size:.038,margin:.14,rows:128},deltaScale:.002,timeScale:2e-4,camera:{start:{x:0,y:0,z:0}},cursorProjector:{lerp:.007},lerpSpeed:.048,depth:{min:.01,max:.1},noiseScale:{min:.001,max:4}};function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t,n){return t&&ze(e.prototype,t),n&&ze(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Re="\n",De=Ee((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){return Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ue(e,t)}function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Le(e);if(t){var i=Le(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Fe(this,n)}}function Fe(e,t){if(t&&("object"===Ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Le(e){return Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Le(e)}De.rotateX="mat3 rotateX( float angle ) {\r\n\treturn mat3(\r\n\t\tvec3(   1.0,\t        0.0,             0.0\t    ),\r\n\t\tvec3(   0.0, \t        cos(angle), \t-sin(angle) ),\r\n\t\tvec3(   0.0, \t        sin(angle), \t cos(angle) )\r\n\t);\r\n}",De.rotateY="mat3 rotateY( float angle ) {\r\n\treturn mat3(\r\n\t\tvec3(   cos(angle),    0.0,           sin(angle)  ),\r\n\t\tvec3(   0.0,           1.0,           0.0         ),\r\n\t\tvec3(   -sin(angle),   0.0,           cos(angle)  )\r\n\t);\r\n}",De.rotateZ="mat3 rotateZ( float angle ) {\r\n\treturn mat3(\r\n\t\tvec3(   cos(angle),   -sin(angle),     0.0   ),\r\n\t\tvec3(   sin(angle),    cos(angle),     0.0   ),\r\n\t\tvec3(   0.0,           0.0,            1.0   )\r\n\t);\r\n}",De.scale="mat3 scale( float x, float y, float z ) {\r\n\treturn mat3(\r\n\t\tvec3(   x,      0.0,    0.0   ),\r\n\t\tvec3(   0.0,    y,      0.0   ),\r\n\t\tvec3(   0.0,    0.0,    z     )\r\n\t);\r\n}",De.bayerMatrixDither=P,De.linearGradient=O,De.loopValue="float loopValue( float value, float minimum, float change ) {\r\n\r\n\treturn minimum + mod( value - minimum, change );\r\n\r\n}",De.simplex3D="//\tSimplex 3D Noise \n//\tby Ian McEwan, Ashima Arts\n//\nvec4 permute( vec4 x ){ return mod( ( ( x * 34.0 ) + 1.0 ) * x, 289.0 ); }\nvec4 taylorInvSqrt( vec4 r ){ return 1.79284291400159 - 0.85373472095314 * r; }\n\nfloat simplex3D( float vx, float vy, float vz ) {\n\n\tvec3 v = vec3( vx, vy, vz );\n\t\n\tconst vec2 C = vec2( 1.0/6.0, 1.0/3.0   );\n\tconst vec4 D = vec4( 0.0, 0.5, 1.0, 2.0 );\n\n\t// First corner\n\tvec3 i  = floor( v + dot( v, C.yyy ) );\n\tvec3 x0 =   v - i + dot( i, C.xxx ) ;\n\n\t// Other corners\n\tvec3 g = step( x0.yzx, x0.xyz );\n\tvec3 l = 1.0 - g;\n\tvec3 i1 = min(  g.xyz, l.zxy );\n\tvec3 i2 = max(  g.xyz, l.zxy );\n\n\t// x0 = x0 - 0. + 0.0 * C \n\tvec3 x1 = x0 - i1 + 1.0 * C.xxx;\n\tvec3 x2 = x0 - i2 + 2.0 * C.xxx;\n\tvec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n\t// Permutations\n\ti = mod( i, 289.0 ); \n\tvec4 p = permute( permute( permute(\n\t\t\t i.z + vec4( 0.0, i1.z, i2.z, 1.0 ) )\n\t\t   + i.y + vec4( 0.0, i1.y, i2.y, 1.0 ) ) \n\t\t   + i.x + vec4( 0.0, i1.x, i2.x, 1.0 ) );\n\n\t// Gradients\n\t// ( N*N points uniformly over a square, mapped onto an octahedron.)\n  \tfloat n_ = 1.0/7.0; // N=7\n  \tvec3  ns = n_ * D.wyz - D.xzx;\n\n  \tvec4 j = p - 49.0 * floor( p * ns.z *ns.z ); //  mod( p,N*N)\n\n  \tvec4 x_ = floor( j * ns.z );\n  \tvec4 y_ = floor( j - 7.0 * x_ ); // mod( j,N)\n\n  \tvec4 x = x_ *ns.x + ns.yyyy;\n  \tvec4 y = y_ *ns.x + ns.yyyy;\n  \tvec4 h = 1.0 - abs( x ) - abs( y );\n\n  \tvec4 b0 = vec4( x.xy, y.xy );\n  \tvec4 b1 = vec4( x.zw, y.zw );\n\n  \tvec4 s0 = floor( b0 )*2.0 + 1.0;\n  \tvec4 s1 = floor( b1 )*2.0 + 1.0;\n  \tvec4 sh = -step( h, vec4( 0.0 ) );\n\n  \tvec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  \tvec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  \tvec3 p0 = vec3( a0.xy,h.x );\n  \tvec3 p1 = vec3( a0.zw,h.y );\n  \tvec3 p2 = vec3( a1.xy,h.z );\n  \tvec3 p3 = vec3( a1.zw,h.w );\n\n\t// Normalise gradients\n  \tvec4 norm = taylorInvSqrt( \n\t\tvec4( dot( p0, p0 ), dot( p1, p1 ), dot( p2, p2 ), dot( p3, p3 ) )\n\t);\n  \tp0 *= norm.x;\n  \tp1 *= norm.y;\n  \tp2 *= norm.z;\n  \tp3 *= norm.w;\n\n\t// Mix final noise value\n  \tvec4 m = max( \n\t\t0.6 - vec4( dot( x0, x0 ), dot( x1, x1 ), dot( x2, x2 ), dot( x3, x3 ) ), \n\t\t0.0\n\t);\n  \tm = m * m;\n  \treturn 42.0 * dot( \n\t\tm*m,\n\t\tvec4( dot( p0,x0 ), dot( p1,x1 ), dot( p2,x2 ), dot( p3,x3 ) )\n\t);\n\n}",De.floatPack=h.glsl,De.editBasic=function(e,t,n,r,i){var o="#include <common>",a="#include <begin_vertex>",s="#include <logdepthbuf_fragment>";return t&&(e.vertexShader=e.vertexShader.replace(o,o+Re+t)),n&&(e.vertexShader=e.vertexShader.replace(a,a+Re+n)),r&&(e.fragmentShader=e.fragmentShader.replace(o,o+Re+r)),i&&(e.fragmentShader=e.fragmentShader.replace(s,i+Re+"\t"+s)),De.debug&&(console.log(e.vertexShader),console.log(e.fragmentShader)),e};var Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}(o,e);var t,n,r,i=Be(o);function o(){return Ae(this,o),i.apply(this,arguments)}return t=o,n&&Me(t.prototype,n),r&&Me(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(De);Xe.GPGPU_intensity="\n\n\tuniform sampler2D GPGPU_intensity;\n\tuniform sampler2D GPGPU_offsetX;\n\tuniform sampler2D GPGPU_offsetY;\n\tuniform vec3 uCursor;\n\tuniform float uDelta;\n\tuniform float uNoiseScale;\n\tuniform float uTime;\n\n\t".concat(De.floatPack,"\n\t").concat(De.simplex3D,"\n\n\tvoid main() {\n\t\n\t// Read\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\tfloat intensity = unpackFloat( texture2D( GPGPU_intensity, uv ) );\n\n\tfloat offsetX = unpackFloat( texture2D( GPGPU_offsetX, uv ) );\n\tfloat offsetY = unpackFloat( texture2D( GPGPU_offsetY, uv ) );\n\tvec3 offset = vec3( offsetX, offsetY, 0.0 );\n\n\t// Modify\n\n\tfloat simplex = simplex3D( \n\t\toffsetX * uNoiseScale, \n\t\toffsetY * uNoiseScale, \n\t\tuTime\n\t);\n\t\n\tfloat waves = ( simplex + 1.0 ) * 5.0;\n\t\n\tfloat cursorReaction = ( 0.5 + abs( simplex ) ) * clamp(\n\t\t7.0 / ( length( uCursor - offset ) + 0.1 ),\n\t\t0.0,\n\t\t10.0\n\t);\n\n\tfloat targetIntensity = clamp( \n\t\t( clamp( waves + cursorReaction, 0.0, 20.0 ) - 10.0 ) * 0.2,\n\t\t-1.0,\n\t\t1.0\n\t);\n\n\tintensity = mix( intensity, targetIntensity, uDelta );\n\n\t// Write\n\n\tgl_FragColor = packFloat( intensity );\n\n}\n");var Ie="\nattribute float aOffsetX;\nattribute float aOffsetY;\nattribute vec2 GPGPU_target;\nuniform sampler2D GPGPU_intensity;\nuniform float uDepth;\nvarying float vIntensity;\n".concat(De.floatPack,"\n");Xe.editCore=function(e){return De.editBasic(e,Ie,"\n\tfloat intensity = unpackFloat( texture2D( GPGPU_intensity, GPGPU_target ) );\n\tvIntensity = ( intensity + 1.0 ) / 2.0;\n\ttransformed *= vIntensity;\n\ttransformed += vec3( aOffsetX, aOffsetY, ( intensity - 1.0) * uDepth );\n","\nuniform vec3 uActiveColor;\nvarying float vIntensity;\n","\n\tdiffuseColor.rgb = mix( diffuseColor.rgb, uActiveColor, vIntensity );\n")};var Ye="\nattribute float aOffsetX;\nattribute float aOffsetY;\nattribute vec2 GPGPU_target;\nuniform sampler2D GPGPU_intensity;\nuniform float uDepth;\nvarying float vIntensity;\n".concat(De.floatPack,"\n");function Ne(e){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(){return qe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Qe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},qe.apply(this,arguments)}function Qe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Je(e)););return e}function He(e,t){return He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},He(e,t)}function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Je(e);if(t){var i=Je(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ze(this,n)}}function Ze(e,t){if(t&&("object"===Ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Je(e){return Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Je(e)}Xe.editShell=function(e){return De.editBasic(e,Ye,"\n\tfloat intensity = unpackFloat( texture2D( GPGPU_intensity, GPGPU_target ) );\n\tvIntensity = ( intensity + 1.0 ) / 2.0;\n\ttransformed *= vIntensity;\n\ttransformed += vec3( aOffsetX, aOffsetY, vIntensity * uDepth );\n","\nuniform vec3 uActiveColor;\nvarying float vIntensity;\n","\n\tdiffuseColor.rgb = mix( diffuseColor.rgb, uActiveColor, vIntensity );\n")};var $e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}(a,e);var t,n,i,o=Ke(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ve(this,a),(e=o.call(this,{defaults:Te,settings:t})).offset=0,e}return t=a,(n=[{key:"init",value:function(){qe(Je(a.prototype),"init",this).call(this,_e),this.cursor.value=this.controls.cursor.position}},{key:"initScene",value:function(){var e=this.settings,t=new r.Group;this.add(t);for(var n=e.dot.rows,i=n*n,o=e.dot.size,a=o+e.dot.margin,s=a*n,c=(a-s)/2,u=-(a-s)/2,l=new Float32Array(i),h=new Float32Array(i),f=new Float32Array(2*i),d=0,p=0,v=0;v<n;v++)for(var y=0;y<n;y++){var g=c+y*a,m=u-v*a;l[d]=g,h[d]=m,f[p++]=d%n/n,f[p++]=~~(d/n)/n,d++}var b=new r.InstancedBufferAttribute(l,1),w=new r.InstancedBufferAttribute(h,1),x=new r.InstancedBufferAttribute(f,2);function k(e){e.setAttribute("aOffsetX",b),e.setAttribute("aOffsetY",w),e.setAttribute("GPGPU_target",x)}var P=new r.PlaneGeometry(o,o),O=new r.InstancedBufferGeometry;O.instanceCount=i,O.setAttribute("position",(new r.Float32BufferAttribute).copy(P.attributes.position)),O.setIndex((new r.Uint16BufferAttribute).copy(P.index)),k(O);var S=new r.MeshBasicMaterial(e.material);S.onBeforeCompile=this.initCoreShader.bind(this);var C=new r.Mesh(O,S);t.add(C);var j=new r.EdgesGeometry(P),_=new r.InstancedBufferGeometry;_.instanceCount=i,_.setAttribute("position",(new r.Float32BufferAttribute).copy(j.attributes.position)),k(_);var T=new r.LineBasicMaterial(e.material);T.onBeforeCompile=this.initShellShader.bind(this);var z=new r.LineSegments(_,T);t.add(z),P.dispose(),j.dispose(),this.container=t,this.cores=C,this.shells=z,this.dotCount=i,this.tileSize=a,this.totalSize=s,this.initGPGPU(l,h)}},{key:"initGPGPU",value:function(e,t){var n=this.settings;this.activeColor=new r.Color(n.activeColor),this.inactiveColor=new r.Color(n.inactiveColor),this.cores.material.color=this.inactiveColor,this.shells.material.color=this.inactiveColor,this.cursor=new r.Uniform(null),this.time=new r.Uniform(0),this.delta=new r.Uniform(0),this.depth=new r.Uniform(n.depth.min),this.noiseScale=new r.Uniform(n.noiseScale.max),b.init(this.sketchpad.renderer);var i=new b(this.dotCount);i.addConstant("offsetX",e),i.addConstant("offsetY",t),i.addVariable("intensity",{shader:Xe.GPGPU_intensity,uniforms:{GPGPU_offsetX:i.offsetX,GPGPU_offsetY:i.offsetY,uCursor:this.cursor,uDelta:this.delta,uNoiseScale:this.noiseScale,uTime:this.time}}),this.gpgpu=i,this.uniforms={GPGPU_intensity:i.intensity,uActiveColor:new r.Uniform(this.activeColor),uDepth:this.depth},this.resize(this.sketchpad.canvas.width,this.sketchpad.canvas.height)}},{key:"initCoreShader",value:function(e){Xe.editCore(e),Object.assign(e.uniforms,this.uniforms),e.uniforms.uDepth=this.depth}},{key:"initShellShader",value:function(e){Xe.editShell(e),Object.assign(e.uniforms,this.uniforms)}},{key:"resize",value:function(e,t,n){var r=Math.abs(1-this.camera.aspect);this.camera.position.z=Math.max(8-r,1),qe(Je(a.prototype),"resize",this).call(this,e,t,n)}},{key:"tick",value:function(e){this.delta.value=e*this.settings.deltaScale,this.time.value+=e*this.settings.timeScale,this.gpgpu.tick(),this.container.position.x=this.offset%this.tileSize,qe(Je(a.prototype),"tick",this).call(this,e)}}])&&We(t.prototype,n),i&&We(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}(xe);const et=anime;var tt=e.n(et);function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){it(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function it(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var at=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=new s;t.title.style.display="none",this.slides=[t.intro,t.navscan,t.rain,t.blockflow,t.ablaze,t.orion,t.disintegrator,t.textformer,t.vesuna,t.about,t.links],this.view=t,this.navigation=new n(this.slides),this.initSketchpad(),this.initAnime(),this.load(),this.controls=new o(this)}var t,r,i;return t=e,(r=[{key:"initSketchpad",value:function(){this.sketchpad=new ve({container:this.view.background}),this.grid=new $e({sketchpad:this.sketchpad}),this.sketchpad.init(this.grid),this.canvas=this.sketchpad.canvas}},{key:"initAnime",value:function(){this.animeGridOffset=21*this.grid.tileSize,this.animeSettings={targets:this.grid,duration:550,easing:"easeOutCirc"},this.clearForwarding=function(){this.forwarding=null}.bind(this),this.clearBacking=function(){this.backing=null}.bind(this)}},{key:"load",value:function(){if(!this.cancelLoad){var e=window.location.hash.replace("#","");this.jumpTo(e)}}},{key:"back",value:function(){if(!this.navigation.atStart&&!this.backing){if(this.forwarding)return this.forwarding.reverse();this.backing=tt()(rt(rt({},this.animeSettings),{},{offset:[0,this.animeGridOffset],complete:this.clearBacking})),this.navigation.back(),this.refresh()}}},{key:"forward",value:function(){if(!this.navigation.atEnd&&!this.forwarding){if(this.backing)return this.backing.reverse();this.forwarding=tt()(rt(rt({},this.animeSettings),{},{offset:[0,-this.animeGridOffset],complete:this.clearForwarding})),this.navigation.forward(),this.refresh()}}},{key:"jumpTo",value:function(e){"number"!=typeof e&&(e=this.indexOf(e)),this.navigation.set(e),this.refresh()}},{key:"refresh",value:function(){this.slides.forEach((function(e){return e.style.display="none"})),this.navigation.item.style.display="flex",this.view.setArrows(this.navigation.atStart,this.navigation.atEnd),window.location.hash=this.navigation.item.id}},{key:"indexOf",value:function(e){var t=0;for(t=this.slides.length-1;t>=0&&this.slides[t].id!==e;t--);return t<0&&(t=0),t}}])&&ot(t.prototype,r),i&&ot(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();!function(){var e=document.documentElement;try{e.classList.add("debug"),e.classList.add("initing");var t=new at;requestAnimationFrame((function(){e.classList.remove("initing"),e.classList.remove("no-js"),e.classList.add("js"),t.load(),console.log(t)}))}catch(t){console.error(t),e.classList.remove("initing")}}()})();